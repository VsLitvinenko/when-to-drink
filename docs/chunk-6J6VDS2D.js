import{b as le,c as se,d as I,f as B}from"./chunk-J25H24X2.js";import{a as y,b as D,c as re,d as ae}from"./chunk-XOIMFEGE.js";import{$ as f,$a as J,Ab as ee,Bb as te,Cb as ie,D as n,G as k,Gb as ne,Ha as W,Ib as M,Jb as oe,K as z,Oa as H,Sa as S,T as u,Ta as $,U as t,Ua as j,V as o,Va as q,W as m,Wa as g,Ya as A,Za as R,_ as N,aa as w,cb as K,g as E,ia as O,ib as b,ka as d,la as c,lb as Q,mb as U,ob as X,pb as Y,qa as x,qb as Z,sa as r,t as v,ta as a,u as _,v as C,ya as V}from"./chunk-M4WESA7Q.js";import"./chunk-Q6FFIHTR.js";import"./chunk-7KGURMOZ.js";import"./chunk-NKG53MNX.js";import"./chunk-62TPDNO2.js";import"./chunk-7PWDY3UP.js";import"./chunk-JRYKI6H5.js";import"./chunk-GIIU5PV3.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-SPMQWSIB.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-2R6CW7ES.js";var L={Name:{en:"Event name",ru:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"},Starts:{en:"Starts",ru:"\u041D\u0430\u0447\u0430\u043B\u043E"},Ends:{en:"Ends",ru:"\u041A\u043E\u043D\u0435\u0446"},Description:{en:"Description",ru:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},NamePlaceholder:{en:"Enter name",ru:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"},DescriptionPlaceholder:{en:"Enter description",ru:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},SaveChanges:{en:"Save changes",ru:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F"},HasBeenSaved:{en:"All changes have been saved successfully",ru:"\u0412\u0441\u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B"}};var me=()=>[0,1];function ve(l,i){if(l&1&&(m(0,"ion-datetime",11),r(1,"async")),l&2){let F=w();u("firstDayOfWeek",1)("locale",a(1,2,F.localizeFormat$))}}function fe(l,i){if(l&1&&(m(0,"ion-datetime",12),r(1,"async")),l&2){let F=w();u("firstDayOfWeek",1)("locale",a(1,2,F.localizeFormat$))}}var pe=(()=>{let i=class i{constructor(){this.startOfMonth=I(se(new Date),"yyyy-MM-dd"),this.endOfMonth=I(le(new Date),"yyyy-MM-dd"),this.eventFormGroup=new q({name:new g(null,S.required),starts:new g(this.startOfMonth,S.required),ends:new g(this.endOfMonth,S.required),description:new g(null)}),this.startDate=B(this.eventFormGroup.controls.starts.valueChanges,{initialValue:this.startOfMonth}),this.endDate=B(this.eventFormGroup.controls.ends.valueChanges,{initialValue:this.endOfMonth}),this.isDatesInvalid=V(()=>{let p=new Date(this.startDate()),s=new Date(this.endDate());return p>=s}),this.localizeService=v(y),this.localizeFormat$=this.localizeService.localizationWithFormat$,this.EditEventFormLocalize=L,this.toast=v(M)}saveChanges(){console.log("save changes",this.eventFormGroup.value),this.localizeService.localize(L.HasBeenSaved).pipe(E(1)).subscribe(p=>this.toast.info(p,"cloud-done-outline"))}};i.\u0275fac=function(s){return new(s||i)},i.\u0275cmp=k({type:i,selectors:[["app-edit-event-form"]],decls:32,vars:32,consts:[["startDateModal",""],["endDateModal",""],["mode","ios",3,"formGroup"],["color","dark","slot","end","formControlName","name",3,"placeholder"],[3,"click"],["datetime","datetimeStart"],[1,"event-datetime-modal",3,"keepContentsMounted","initialBreakpoint","breakpoints"],["datetime","datetimeEnd"],["lines","none",1,"notes-item"],["color","dark","slot","end","formControlName","description",3,"autoGrow","placeholder"],["mode","ios","expand","block",1,"save-changes-button",3,"click","disabled"],["id","datetimeStart","formControlName","starts","presentation","date","mode","ios",3,"firstDayOfWeek","locale"],["id","datetimeEnd","formControlName","ends","presentation","date","mode","ios",3,"firstDayOfWeek","locale"]],template:function(s,e){if(s&1){let h=N();t(0,"ion-list",2)(1,"ion-item")(2,"ion-label"),d(3),r(4,"localize"),o(),m(5,"ion-input",3),r(6,"localize"),o(),t(7,"ion-item",4),f("click",function(){_(h);let P=O(13);return C(P.present())}),t(8,"ion-label"),d(9),r(10,"localize"),o(),m(11,"ion-datetime-button",5),t(12,"ion-modal",6,0),z(14,ve,2,4,"ng-template"),o()(),t(15,"ion-item",4),f("click",function(){_(h);let P=O(21);return C(P.present())}),t(16,"ion-label"),d(17),r(18,"localize"),o(),m(19,"ion-datetime-button",7),t(20,"ion-modal",6,1),z(22,fe,2,4,"ng-template"),o()(),t(23,"ion-item",8)(24,"ion-label"),d(25),r(26,"localize"),o(),m(27,"ion-textarea",9),r(28,"localize"),o()(),t(29,"ion-button",10),f("click",function(){return _(h),C(e.saveChanges())}),d(30),r(31,"localize"),o()}s&2&&(u("formGroup",e.eventFormGroup),n(3),c(" ",a(4,16,e.EditEventFormLocalize.Name)," "),n(2),u("placeholder",a(6,18,e.EditEventFormLocalize.NamePlaceholder)),n(4),c(" ",a(10,20,e.EditEventFormLocalize.Starts)," "),n(3),u("keepContentsMounted",!0)("initialBreakpoint",1)("breakpoints",x(30,me)),n(5),c(" ",a(18,22,e.EditEventFormLocalize.Ends)," "),n(3),u("keepContentsMounted",!0)("initialBreakpoint",1)("breakpoints",x(31,me)),n(5),c(" ",a(26,24,e.EditEventFormLocalize.Description)," "),n(2),u("autoGrow",!0)("placeholder",a(28,26,e.EditEventFormLocalize.DescriptionPlaceholder)),n(2),u("disabled",e.eventFormGroup.invalid||e.isDatesInvalid()),n(),c(" ",a(31,28,e.EditEventFormLocalize.SaveChanges),`
`))},dependencies:[ae,Y,b,Z,X,W,D,ie,K,ee,U,ne,J,$,j,A,R],styles:["ion-list[_ngcontent-%COMP%]{background:transparent}ion-item[_ngcontent-%COMP%]{--background: transparent}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:1.25rem .5rem 1.25rem 0}ion-textarea[_ngcontent-%COMP%], ion-input[_ngcontent-%COMP%]{text-align:end;margin-right:.25rem;width:60%!important}.notes-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-bottom:auto}.notes-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{margin-top:.6rem}.save-changes-button[_ngcontent-%COMP%]{margin:.5rem 1rem}  .event-datetime-modal .ion-delegate-host{padding:.75rem .25rem 2.5rem!important;background-color:var(--ion-color-light, #f4f5f8)!important}"]});let l=i;return l})();var T={Link:{en:"Link",ru:"\u0421\u0441\u044B\u043B\u043A\u0430"},Share:{en:"Share",ru:"\u041F\u043E\u0434\u0435\u043B\u0438\u0442\u044C\u0441\u044F"},GoTo:{en:"Go to",ru:"\u041F\u0435\u0440\u0435\u0439\u0442\u0438"},ClipboardLink:{en:"Link to created event was copied to clipboard",ru:"\u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u043D\u043E\u0435 \u0441\u043E\u0431\u044B\u0442\u0438\u0435 \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u0430 \u0432 \u0431\u0443\u0444\u0435\u0440 \u043E\u0431\u043C\u0435\u043D\u0430"}};var qe=(()=>{let i=class i{constructor(){this.router=v(H),this.toast=v(M),this.tg=v(oe),this.localizeService=v(y),this.EditEventPageLocalize=T}copyToClipboard(){this.localizeService.localize(T.ClipboardLink).pipe(E(1)).subscribe(p=>this.toast.light(p,"clipboard-outline"))}share(){this.tg.share("vslitvinenko.github.io/when-to-drink","whoever reads this will die")}redirectToEvent(){this.router.navigate(["vote"])}};i.\u0275fac=function(s){return new(s||i)},i.\u0275cmp=k({type:i,selectors:[["app-edit-event-page"]],hostAttrs:[1,"app-page-inner"],decls:18,vars:9,consts:[[1,"ion-padding"],[1,"done-actions"],["mode","ios","size","small","color","light",3,"click"],["name","link-outline","slot","start"],["name","arrow-redo-outline","slot","start"],["mode","ios","size","small","color","dark",3,"click"],["name","arrow-forward","slot","end"]],template:function(s,e){s&1&&(t(0,"ion-content",0),m(1,"app-edit-event-form"),t(2,"div",1)(3,"ion-button",2),f("click",function(){return e.copyToClipboard()}),m(4,"ion-icon",3),t(5,"span"),d(6),r(7,"localize"),o()(),t(8,"ion-button",2),f("click",function(){return e.share()}),m(9,"ion-icon",4),t(10,"span"),d(11),r(12,"localize"),o()(),t(13,"ion-button",5),f("click",function(){return e.redirectToEvent()}),m(14,"ion-icon",6),t(15,"span"),d(16),r(17,"localize"),o()()()()),s&2&&(n(6),c(" ",a(7,3,e.EditEventPageLocalize.Link)," "),n(5),c(" ",a(12,5,e.EditEventPageLocalize.Share)," "),n(5),c(" ",a(17,7,e.EditEventPageLocalize.GoTo)," "))},dependencies:[re,Q,te,D,pe,b],styles:[".done-actions[_ngcontent-%COMP%]{margin:.5rem .925rem;display:flex;flex-wrap:wrap;justify-content:space-between;gap:.5rem}.done-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex-grow:1;--padding-top: .6rem;--padding-bottom: .6rem;--border-radius: .75rem}"]});let l=i;return l})();export{qe as EditEventPageComponent};
