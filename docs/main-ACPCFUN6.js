import{$ as u,$a as j3,$b as d6,A as j,Aa as h0,Ab as O1,B as n1,Ba as f1,Bb as J3,C as L2,Ca as b1,Cb as D2,D as p,Da as r1,Db as X0,E as f3,Ea as M1,Eb as Z3,F as L,Fa as h2,Fb as E1,G as _,Ga as d,Gb as a1,H as M3,Ha as w,Hb as Z1,I as K,Ia as c1,Ib as z0,J as u0,Ja as W0,Jb as t6,K as x4,Ka as g2,Kb as e6,L as U0,La as X,Lb as o6,M as h,Ma as A2,Mb as i6,N as k3,Na as v2,Nb as n6,O as z3,Oa as P,Ob as P2,P as R,Pa as Y1,Pb as s6,Q as g1,Qa as H3,Qb as a6,R as s1,Ra as f0,Rb as I2,S as c2,Sa as b3,Sb as t0,T as y3,Ta as k1,Tb as J,U as C3,Ua as H2,Ub as l6,V as S3,Va as X1,Vb as r6,W as G,Wa as Q0,Wb as c6,X as Y,Xa as O3,Xb as h6,Y as W1,Ya as E3,Yb as g6,Z as Q1,Za as T3,Zb as v6,_ as K1,_a as M0,_b as J0,a as U,aa as g,ab as D3,ac as F2,b as c3,ba as v,bb as P3,bc as v1,c as S2,ca as y,cb as I3,cc as R2,d as h3,da as _2,db as k0,dc as Z0,e as B2,ea as V2,eb as F3,ec as e0,f as m0,fa as f4,fb as R3,fc as z1,g as F,ga as N,gb as N3,gc as p6,h as g3,ha as V,hb as q3,hc as d2,i as A1,ia as M,ib as b2,ic as F1,j as v3,ja as B3,jb as K0,jc as y0,k as u1,ka as L3,kb as $3,kc as d1,l as $0,la as M4,lb as U3,lc as Z,m as d3,ma as k4,mb as O0,mc as C0,n as p3,na as z4,nb as O2,nc as N2,o as a0,oa as G1,ob as W3,oc as p1,p as w0,pa as x0,pb as Q3,q as l0,qa as q,qb as E2,r as m3,ra as _3,rb as K3,s as w3,sa as L1,sb as G3,t as B1,ta as f,tb as Y3,u as I1,ua as V3,ub as J1,v as D,va as k,vb as G0,w as U1,wa as H1,wb as T2,x as $,xa as A3,xb as j2,y as u3,ya as r0,yb as X3,z as x3,za as c0,zb as Y0}from"./chunk-KXBJCJIA.js";import"./chunk-Q6FFIHTR.js";import"./chunk-7KGURMOZ.js";import"./chunk-NKG53MNX.js";import"./chunk-62TPDNO2.js";import"./chunk-7PWDY3UP.js";import"./chunk-JRYKI6H5.js";import"./chunk-GIIU5PV3.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-SPMQWSIB.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{a as i1,b as V1,d as r3,f as r2,g as u4}from"./chunk-2R6CW7ES.js";var b=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(b||{}),T1="*";function p2(n,t){return{type:b.Trigger,name:n,definitions:t,options:{}}}function T0(n,t=null){return{type:b.Animate,styles:t,timings:n}}function y4(n,t=null){return{type:b.Group,steps:n,options:t}}function m6(n,t=null){return{type:b.Sequence,steps:n,options:t}}function j1(n){return{type:b.Style,styles:n,offset:null}}function t2(n,t,e=null){return{type:b.Transition,expr:n,animation:t,options:e}}function m2(n,t,e=null){return{type:b.Query,selector:n,animation:t,options:e}}var o0=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(t=0,e=0){this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}},E0=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(t){this.players=t;let e=0,o=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++e==s&&this._onFinish()}),a.onDestroy(()=>{++o==s&&this._onDestroy()}),a.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((a,l)=>Math.max(a,l.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let e=t*this.totalTime;this.players.forEach(o=>{let i=o.totalTime?Math.min(1,e/o.totalTime):1;o.setPosition(i)})}getPosition(){let t=this.players.reduce((e,o)=>e===null||o.totalTime>e.totalTime?o:e,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}},e2="!";function w6(n){return new j(3e3,!1)}function L8(){return new j(3100,!1)}function _8(){return new j(3101,!1)}function V8(n){return new j(3001,!1)}function A8(n){return new j(3003,!1)}function H8(n){return new j(3004,!1)}function x6(n,t){return new j(3005,!1)}function f6(){return new j(3006,!1)}function M6(){return new j(3007,!1)}function k6(n,t){return new j(3008,!1)}function z6(n){return new j(3002,!1)}function y6(n,t,e,o,i){return new j(3010,!1)}function C6(){return new j(3011,!1)}function S6(){return new j(3012,!1)}function B6(){return new j(3200,!1)}function L6(){return new j(3202,!1)}function _6(){return new j(3013,!1)}function V6(n){return new j(3014,!1)}function A6(n){return new j(3015,!1)}function H6(n){return new j(3016,!1)}function b6(n,t){return new j(3404,!1)}function b8(n){return new j(3502,!1)}function O6(n){return new j(3503,!1)}function E6(){return new j(3300,!1)}function T6(n){return new j(3504,!1)}function j6(n){return new j(3301,!1)}function D6(n,t){return new j(3302,!1)}function P6(n){return new j(3303,!1)}function I6(n,t){return new j(3400,!1)}function F6(n){return new j(3401,!1)}function R6(n){return new j(3402,!1)}function N6(n,t){return new j(3505,!1)}function g0(n){switch(n.length){case 0:return new o0;case 1:return n[0];default:return new E0(n)}}function L4(n,t,e=new Map,o=new Map){let i=[],s=[],a=-1,l=null;if(t.forEach(r=>{let c=r.get("offset"),m=c==a,x=m&&l||new Map;r.forEach((O,C)=>{let S=C,H=O;if(C!=="offset")switch(S=n.normalizePropertyName(S,i),H){case e2:H=e.get(C);break;case T1:H=o.get(C);break;default:H=n.normalizeStyleValue(C,S,H,i);break}x.set(S,H)}),m||s.push(x),l=x,a=c}),i.length)throw b8(i);return s}function q2(n,t,e,o){switch(t){case"start":n.onStart(()=>o(e&&C4(e,"start",n)));break;case"done":n.onDone(()=>o(e&&C4(e,"done",n)));break;case"destroy":n.onDestroy(()=>o(e&&C4(e,"destroy",n)));break}}function C4(n,t,e){let o=e.totalTime,i=!!e.disabled,s=$2(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,o??n.totalTime,i),a=n._data;return a!=null&&(s._data=a),s}function $2(n,t,e,o,i="",s=0,a){return{element:n,triggerName:t,fromState:e,toState:o,phaseName:i,totalTime:s,disabled:!!a}}function y1(n,t,e){let o=n.get(t);return o||n.set(t,o=e),o}function _4(n){let t=n.indexOf(":"),e=n.substring(1,t),o=n.slice(t+1);return[e,o]}var O8=typeof document>"u"?null:document.documentElement;function U2(n){let t=n.parentNode||n.host||null;return t===O8?null:t}function E8(n){return n.substring(1,6)=="ebkit"}var j0=null,u6=!1;function q6(n){j0||(j0=T8()||{},u6=j0.style?"WebkitAppearance"in j0.style:!1);let t=!0;return j0.style&&!E8(n)&&(t=n in j0.style,!t&&u6&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in j0.style)),t}function T8(){return typeof document<"u"?document.body:null}function V4(n,t){for(;t;){if(t===n)return!0;t=U2(t)}return!1}function A4(n,t,e){if(e)return Array.from(n.querySelectorAll(t));let o=n.querySelector(t);return o?[o]:[]}var j8=1e3,H4="{{",D8="}}",b4="ng-enter",W2="ng-leave",w2="ng-trigger",u2=".ng-trigger",O4="ng-animating",Q2=".ng-animating";function i0(n){if(typeof n=="number")return n;let t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:S4(parseFloat(t[1]),t[2])}function S4(n,t){switch(t){case"s":return n*j8;default:return n}}function x2(n,t,e){return n.hasOwnProperty("duration")?n:P8(n,t,e)}function P8(n,t,e){let o=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,s=0,a="";if(typeof n=="string"){let l=n.match(o);if(l===null)return t.push(w6(n)),{duration:0,delay:0,easing:""};i=S4(parseFloat(l[1]),l[2]);let r=l[3];r!=null&&(s=S4(parseFloat(r),l[4]));let c=l[5];c&&(a=c)}else i=n;if(!e){let l=!1,r=t.length;i<0&&(t.push(L8()),l=!0),s<0&&(t.push(_8()),l=!0),l&&t.splice(r,0,w6(n))}return{duration:i,delay:s,easing:a}}function $6(n){return n.length?n[0]instanceof Map?n:n.map(t=>new Map(Object.entries(t))):[]}function R1(n,t,e){t.forEach((o,i)=>{let s=K2(i);e&&!e.has(i)&&e.set(i,n.style[s]),n.style[s]=o})}function S0(n,t){t.forEach((e,o)=>{let i=K2(o);n.style[i]=""})}function o2(n){return Array.isArray(n)?n.length==1?n[0]:m6(n):n}function U6(n,t,e){let o=t.params||{},i=E4(n);i.length&&i.forEach(s=>{o.hasOwnProperty(s)||e.push(V8(s))})}var B4=new RegExp(`${H4}\\s*(.+?)\\s*${D8}`,"g");function E4(n){let t=[];if(typeof n=="string"){let e;for(;e=B4.exec(n);)t.push(e[1]);B4.lastIndex=0}return t}function i2(n,t,e){let o=`${n}`,i=o.replace(B4,(s,a)=>{let l=t[a];return l==null&&(e.push(A8(a)),l=""),l.toString()});return i==o?n:i}var I8=/-+([a-z0-9])/g;function K2(n){return n.replace(I8,(...t)=>t[1].toUpperCase())}function W6(n,t){return n===0||t===0}function Q6(n,t,e){if(e.size&&t.length){let o=t[0],i=[];if(e.forEach((s,a)=>{o.has(a)||i.push(a),o.set(a,s)}),i.length)for(let s=1;s<t.length;s++){let a=t[s];i.forEach(l=>a.set(l,G2(n,l)))}}return t}function C1(n,t,e){switch(t.type){case b.Trigger:return n.visitTrigger(t,e);case b.State:return n.visitState(t,e);case b.Transition:return n.visitTransition(t,e);case b.Sequence:return n.visitSequence(t,e);case b.Group:return n.visitGroup(t,e);case b.Animate:return n.visitAnimate(t,e);case b.Keyframes:return n.visitKeyframes(t,e);case b.Style:return n.visitStyle(t,e);case b.Reference:return n.visitReference(t,e);case b.AnimateChild:return n.visitAnimateChild(t,e);case b.AnimateRef:return n.visitAnimateRef(t,e);case b.Query:return n.visitQuery(t,e);case b.Stagger:return n.visitStagger(t,e);default:throw H8(t.type)}}function G2(n,t){return window.getComputedStyle(n)[t]}var X4=(()=>{class n{validateStyleProperty(e){return q6(e)}containsElement(e,o){return V4(e,o)}getParentElement(e){return U2(e)}query(e,o,i){return A4(e,o,i)}computeStyle(e,o,i){return i||""}animate(e,o,i,s,a,l=[],r){return new o0(i,s)}static \u0275fac=function(o){return new(o||n)};static \u0275prov=n1({token:n,factory:n.\u0275fac})}return n})(),P0=class{static NOOP=new X4},I0=class{};var F8=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),t4=class extends I0{normalizePropertyName(t,e){return K2(t)}normalizeStyleValue(t,e,o,i){let s="",a=o.toString().trim();if(F8.has(e)&&o!==0&&o!=="0")if(typeof o=="number")s="px";else{let l=o.match(/^[+-]?[\d\.]+([a-z]*)$/);l&&l[1].length==0&&i.push(x6(t,o))}return a+s}};var e4="*";function R8(n,t){let e=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(o=>N8(o,e,t)):e.push(n),e}function N8(n,t,e){if(n[0]==":"){let r=q8(n,e);if(typeof r=="function"){t.push(r);return}n=r}let o=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(o==null||o.length<4)return e.push(A6(n)),t;let i=o[1],s=o[2],a=o[3];t.push(K6(i,a));let l=i==e4&&a==e4;s[0]=="<"&&!l&&t.push(K6(a,i))}function q8(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,o)=>parseFloat(o)>parseFloat(e);case":decrement":return(e,o)=>parseFloat(o)<parseFloat(e);default:return t.push(H6(n)),"* => *"}}var Y2=new Set(["true","1"]),X2=new Set(["false","0"]);function K6(n,t){let e=Y2.has(n)||X2.has(n),o=Y2.has(t)||X2.has(t);return(i,s)=>{let a=n==e4||n==i,l=t==e4||t==s;return!a&&e&&typeof i=="boolean"&&(a=i?Y2.has(n):X2.has(n)),!l&&o&&typeof s=="boolean"&&(l=s?Y2.has(t):X2.has(t)),a&&l}}var nt=":self",$8=new RegExp(`s*${nt}s*,?`,"g");function st(n,t,e,o){return new F4(n).build(t,e,o)}var G6="",F4=class{_driver;constructor(t){this._driver=t}build(t,e,o){let i=new R4(e);return this._resetContextStyleTimingState(i),C1(this,o2(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector=G6,t.collectedStyles=new Map,t.collectedStyles.set(G6,new Map),t.currentTime=0}visitTrigger(t,e){let o=e.queryCount=0,i=e.depCount=0,s=[],a=[];return t.name.charAt(0)=="@"&&e.errors.push(f6()),t.definitions.forEach(l=>{if(this._resetContextStyleTimingState(e),l.type==b.State){let r=l,c=r.name;c.toString().split(/\s*,\s*/).forEach(m=>{r.name=m,s.push(this.visitState(r,e))}),r.name=c}else if(l.type==b.Transition){let r=this.visitTransition(l,e);o+=r.queryCount,i+=r.depCount,a.push(r)}else e.errors.push(M6())}),{type:b.Trigger,name:t.name,states:s,transitions:a,queryCount:o,depCount:i,options:null}}visitState(t,e){let o=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(o.containsDynamicStyles){let s=new Set,a=i||{};o.styles.forEach(l=>{l instanceof Map&&l.forEach(r=>{E4(r).forEach(c=>{a.hasOwnProperty(c)||s.add(c)})})}),s.size&&e.errors.push(k6(t.name,[...s.values()]))}return{type:b.State,name:t.name,style:o,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let o=C1(this,o2(t.animation),e),i=R8(t.expr,e.errors);return{type:b.Transition,matchers:i,animation:o,queryCount:e.queryCount,depCount:e.depCount,options:D0(t.options)}}visitSequence(t,e){return{type:b.Sequence,steps:t.steps.map(o=>C1(this,o,e)),options:D0(t.options)}}visitGroup(t,e){let o=e.currentTime,i=0,s=t.steps.map(a=>{e.currentTime=o;let l=C1(this,a,e);return i=Math.max(i,e.currentTime),l});return e.currentTime=i,{type:b.Group,steps:s,options:D0(t.options)}}visitAnimate(t,e){let o=K8(t.timings,e.errors);e.currentAnimateTimings=o;let i,s=t.styles?t.styles:j1({});if(s.type==b.Keyframes)i=this.visitKeyframes(s,e);else{let a=t.styles,l=!1;if(!a){l=!0;let c={};o.easing&&(c.easing=o.easing),a=j1(c)}e.currentTime+=o.duration+o.delay;let r=this.visitStyle(a,e);r.isEmptyStep=l,i=r}return e.currentAnimateTimings=null,{type:b.Animate,timings:o,style:i,options:null}}visitStyle(t,e){let o=this._makeStyleAst(t,e);return this._validateStyleAst(o,e),o}_makeStyleAst(t,e){let o=[],i=Array.isArray(t.styles)?t.styles:[t.styles];for(let l of i)typeof l=="string"?l===T1?o.push(l):e.errors.push(z6(l)):o.push(new Map(Object.entries(l)));let s=!1,a=null;return o.forEach(l=>{if(l instanceof Map&&(l.has("easing")&&(a=l.get("easing"),l.delete("easing")),!s)){for(let r of l.values())if(r.toString().indexOf(H4)>=0){s=!0;break}}}),{type:b.Style,styles:o,easing:a,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){let o=e.currentAnimateTimings,i=e.currentTime,s=e.currentTime;o&&s>0&&(s-=o.duration+o.delay),t.styles.forEach(a=>{typeof a!="string"&&a.forEach((l,r)=>{let c=e.collectedStyles.get(e.currentQuerySelector),m=c.get(r),x=!0;m&&(s!=i&&s>=m.startTime&&i<=m.endTime&&(e.errors.push(y6(r,m.startTime,m.endTime,s,i)),x=!1),s=m.startTime),x&&c.set(r,{startTime:s,endTime:i}),e.options&&U6(l,e.options,e.errors)})})}visitKeyframes(t,e){let o={type:b.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(C6()),o;let i=1,s=0,a=[],l=!1,r=!1,c=0,m=t.steps.map(t1=>{let e1=this._makeStyleAst(t1,e),m1=e1.offset!=null?e1.offset:Q8(e1.styles),l1=0;return m1!=null&&(s++,l1=e1.offset=m1),r=r||l1<0||l1>1,l=l||l1<c,c=l1,a.push(l1),e1});r&&e.errors.push(S6()),l&&e.errors.push(B6());let x=t.steps.length,O=0;s>0&&s<x?e.errors.push(L6()):s==0&&(O=i/(x-1));let C=x-1,S=e.currentTime,H=e.currentAnimateTimings,W=H.duration;return m.forEach((t1,e1)=>{let m1=O>0?e1==C?1:O*e1:a[e1],l1=m1*W;e.currentTime=S+H.delay+l1,H.duration=l1,this._validateStyleAst(t1,e),t1.offset=m1,o.styles.push(t1)}),o}visitReference(t,e){return{type:b.Reference,animation:C1(this,o2(t.animation),e),options:D0(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:b.AnimateChild,options:D0(t.options)}}visitAnimateRef(t,e){return{type:b.AnimateRef,animation:this.visitReference(t.animation,e),options:D0(t.options)}}visitQuery(t,e){let o=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;let[s,a]=U8(t.selector);e.currentQuerySelector=o.length?o+" "+s:s,y1(e.collectedStyles,e.currentQuerySelector,new Map);let l=C1(this,o2(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=o,{type:b.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:a,animation:l,originalSelector:t.selector,options:D0(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(_6());let o=t.timings==="full"?{duration:0,delay:0,easing:"full"}:x2(t.timings,e.errors,!0);return{type:b.Stagger,animation:C1(this,o2(t.animation),e),timings:o,options:null}}};function U8(n){let t=!!n.split(/\s*,\s*/).find(e=>e==nt);return t&&(n=n.replace($8,"")),n=n.replace(/@\*/g,u2).replace(/@\w+/g,e=>u2+"-"+e.slice(1)).replace(/:animating/g,Q2),[n,t]}function W8(n){return n?i1({},n):null}var R4=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(t){this.errors=t}};function Q8(n){if(typeof n=="string")return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){let o=e;t=parseFloat(o.get("offset")),o.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}function K8(n,t){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=x2(n,t).duration;return T4(s,0,"")}let e=n;if(e.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=T4(0,0,"");return s.dynamic=!0,s.strValue=e,s}let i=x2(e,t);return T4(i.duration,i.delay,i.easing)}function D0(n){return n?(n=i1({},n),n.params&&(n.params=W8(n.params))):n={},n}function T4(n,t,e){return{duration:n,delay:t,easing:e}}function J4(n,t,e,o,i,s,a=null,l=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:o,duration:i,delay:s,totalTime:i+s,easing:a,subTimeline:l}}var M2=class{_map=new Map;get(t){return this._map.get(t)||[]}append(t,e){let o=this._map.get(t);o||this._map.set(t,o=[]),o.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},G8=1,Y8=":enter",X8=new RegExp(Y8,"g"),J8=":leave",Z8=new RegExp(J8,"g");function at(n,t,e,o,i,s=new Map,a=new Map,l,r,c=[]){return new N4().buildKeyframes(n,t,e,o,i,s,a,l,r,c)}var N4=class{buildKeyframes(t,e,o,i,s,a,l,r,c,m=[]){c=c||new M2;let x=new q4(t,e,c,i,s,m,[]);x.options=r;let O=r.delay?i0(r.delay):0;x.currentTimeline.delayNextStep(O),x.currentTimeline.setStyles([a],null,x.errors,r),C1(this,o,x);let C=x.timelines.filter(S=>S.containsAnimation());if(C.length&&l.size){let S;for(let H=C.length-1;H>=0;H--){let W=C[H];if(W.element===e){S=W;break}}S&&!S.allowOnlyTimelineStyles()&&S.setStyles([l],null,x.errors,r)}return C.length?C.map(S=>S.buildKeyframes()):[J4(e,[],[],[],0,O,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let o=e.subInstructions.get(e.element);if(o){let i=e.createSubContext(t.options),s=e.currentTimeline.currentTime,a=this._visitSubInstructions(o,i,i.options);s!=a&&e.transformIntoNewTimeline(a)}e.previousNode=t}visitAnimateRef(t,e){let o=e.createSubContext(t.options);o.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,o),this.visitReference(t.animation,o),e.transformIntoNewTimeline(o.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,o){for(let i of t){let s=i?.delay;if(s){let a=typeof s=="number"?s:i0(i2(s,i?.params??{},e.errors));o.delayNextStep(a)}}}_visitSubInstructions(t,e,o){let s=e.currentTimeline.currentTime,a=o.duration!=null?i0(o.duration):null,l=o.delay!=null?i0(o.delay):null;return a!==0&&t.forEach(r=>{let c=e.appendInstructionToTimeline(r,a,l);s=Math.max(s,c.duration+c.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),C1(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let o=e.subContextCount,i=e,s=t.options;if(s&&(s.params||s.delay)&&(i=e.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==b.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=o4);let a=i0(s.delay);i.delayNextStep(a)}t.steps.length&&(t.steps.forEach(a=>C1(this,a,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>o&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let o=[],i=e.currentTimeline.currentTime,s=t.options&&t.options.delay?i0(t.options.delay):0;t.steps.forEach(a=>{let l=e.createSubContext(t.options);s&&l.delayNextStep(s),C1(this,a,l),i=Math.max(i,l.currentTimeline.currentTime),o.push(l.currentTimeline)}),o.forEach(a=>e.currentTimeline.mergeTimelineCollectedStyles(a)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let o=t.strValue,i=e.params?i2(o,e.params,e.errors):o;return x2(i,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let o=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;o.delay&&(e.incrementTime(o.delay),i.snapshotCurrentStyles());let s=t.style;s.type==b.Keyframes?this.visitKeyframes(s,e):(e.incrementTime(o.duration),this.visitStyle(s,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let o=e.currentTimeline,i=e.currentAnimateTimings;!i&&o.hasCurrentStyleProperties()&&o.forwardFrame();let s=i&&i.easing||t.easing;t.isEmptyStep?o.applyEmptyStep(s):o.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let o=e.currentAnimateTimings,i=e.currentTimeline.duration,s=o.duration,l=e.createSubContext().currentTimeline;l.easing=o.easing,t.styles.forEach(r=>{let c=r.offset||0;l.forwardTime(c*s),l.setStyles(r.styles,r.easing,e.errors,e.options),l.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(l),e.transformIntoNewTimeline(i+s),e.previousNode=t}visitQuery(t,e){let o=e.currentTimeline.currentTime,i=t.options||{},s=i.delay?i0(i.delay):0;s&&(e.previousNode.type===b.Style||o==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=o4);let a=o,l=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=l.length;let r=null;l.forEach((c,m)=>{e.currentQueryIndex=m;let x=e.createSubContext(t.options,c);s&&x.delayNextStep(s),c===e.element&&(r=x.currentTimeline),C1(this,t.animation,x),x.currentTimeline.applyStylesToKeyframe();let O=x.currentTimeline.currentTime;a=Math.max(a,O)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(a),r&&(e.currentTimeline.mergeTimelineCollectedStyles(r),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let o=e.parentContext,i=e.currentTimeline,s=t.timings,a=Math.abs(s.duration),l=a*(e.currentQueryTotal-1),r=a*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":r=l-r;break;case"full":r=o.currentStaggerTime;break}let m=e.currentTimeline;r&&m.delayNextStep(r);let x=m.currentTime;C1(this,t.animation,e),e.previousNode=t,o.currentStaggerTime=i.currentTime-x+(i.startTime-o.currentTimeline.startTime)}},o4={},q4=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=o4;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(t,e,o,i,s,a,l,r){this._driver=t,this.element=e,this.subInstructions=o,this._enterClassName=i,this._leaveClassName=s,this.errors=a,this.timelines=l,this.currentTimeline=r||new i4(this._driver,e,0),l.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;let o=t,i=this.options;o.duration!=null&&(i.duration=i0(o.duration)),o.delay!=null&&(i.delay=i0(o.delay));let s=o.params;if(s){let a=i.params;a||(a=this.options.params={}),Object.keys(s).forEach(l=>{(!e||!a.hasOwnProperty(l))&&(a[l]=i2(s[l],a,this.errors))})}}_copyOptions(){let t={};if(this.options){let e=this.options.params;if(e){let o=t.params={};Object.keys(e).forEach(i=>{o[i]=e[i]})}}return t}createSubContext(t=null,e,o){let i=e||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,o||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=o4,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,o){let i={duration:e??t.duration,delay:this.currentTimeline.currentTime+(o??0)+t.delay,easing:""},s=new $4(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,o,i,s,a){let l=[];if(i&&l.push(this.element),t.length>0){t=t.replace(X8,"."+this._enterClassName),t=t.replace(Z8,"."+this._leaveClassName);let r=o!=1,c=this._driver.query(this.element,t,r);o!==0&&(c=o<0?c.slice(c.length+o,c.length):c.slice(0,o)),l.push(...c)}return!s&&l.length==0&&a.push(V6(e)),l}},i4=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(t,e,o,i){this._driver=t,this.element=e,this.startTime=o,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new n(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=G8,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,o]of this._globalTimelineStyles)this._backFill.set(e,o||T1),this._currentKeyframe.set(e,T1);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,o,i){e&&this._previousKeyframe.set("easing",e);let s=i&&i.params||{},a=te(t,this._globalTimelineStyles);for(let[l,r]of a){let c=i2(r,s,o);this._pendingStyles.set(l,c),this._localTimelineStyles.has(l)||this._backFill.set(l,this._globalTimelineStyles.get(l)??T1),this._updateStyle(l,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,o)=>{let i=this._styleSummary.get(o);(!i||e.time>i.time)&&this._updateStyle(o,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let t=new Set,e=new Set,o=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((l,r)=>{let c=new Map([...this._backFill,...l]);c.forEach((m,x)=>{m===e2?t.add(x):m===T1&&e.add(x)}),o||c.set("offset",r/this.duration),i.push(c)});let s=[...t.values()],a=[...e.values()];if(o){let l=i[0],r=new Map(l);l.set("offset",0),r.set("offset",1),i=[l,r]}return J4(this.element,i,s,a,this.duration,this.startTime,this.easing,!1)}},$4=class extends i4{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(t,e,o,i,s,a,l=!1){super(t,e,a.delay),this.keyframes=o,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=l,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:o,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){let s=[],a=o+e,l=e/a,r=new Map(t[0]);r.set("offset",0),s.push(r);let c=new Map(t[0]);c.set("offset",Y6(l)),s.push(c);let m=t.length-1;for(let x=1;x<=m;x++){let O=new Map(t[x]),C=O.get("offset"),S=e+C*o;O.set("offset",Y6(S/a)),s.push(O)}o=a,e=0,i="",t=s}return J4(this.element,t,this.preStyleProps,this.postStyleProps,o,e,i,!0)}};function Y6(n,t=3){let e=Math.pow(10,t-1);return Math.round(n*e)/e}function te(n,t){let e=new Map,o;return n.forEach(i=>{if(i==="*"){o??=t.keys();for(let s of o)e.set(s,T1)}else for(let[s,a]of i)e.set(s,a)}),e}function X6(n,t,e,o,i,s,a,l,r,c,m,x,O){return{type:0,element:n,triggerName:t,isRemovalTransition:i,fromState:e,fromStyles:s,toState:o,toStyles:a,timelines:l,queriedElements:r,preStyleProps:c,postStyleProps:m,totalTime:x,errors:O}}var j4={},n4=class{_triggerName;ast;_stateStyles;constructor(t,e,o){this._triggerName=t,this.ast=e,this._stateStyles=o}match(t,e,o,i){return ee(this.ast.matchers,t,e,o,i)}buildStyles(t,e,o){let i=this._stateStyles.get("*");return t!==void 0&&(i=this._stateStyles.get(t?.toString())||i),i?i.buildStyles(e,o):new Map}build(t,e,o,i,s,a,l,r,c,m){let x=[],O=this.ast.options&&this.ast.options.params||j4,C=l&&l.params||j4,S=this.buildStyles(o,C,x),H=r&&r.params||j4,W=this.buildStyles(i,H,x),t1=new Set,e1=new Map,m1=new Map,l1=i==="void",N0={params:lt(H,O),delay:this.ast.options?.delay},q1=m?[]:at(t,e,this.ast.animation,s,a,S,W,N0,c,x),w1=0;return q1.forEach(x1=>{w1=Math.max(x1.duration+x1.delay,w1)}),x.length?X6(e,this._triggerName,o,i,l1,S,W,[],[],e1,m1,w1,x):(q1.forEach(x1=>{let A0=x1.element,q0=y1(e1,A0,new Set);x1.preStyleProps.forEach(H0=>q0.add(H0));let n3=y1(m1,A0,new Set);x1.postStyleProps.forEach(H0=>n3.add(H0)),A0!==e&&t1.add(A0)}),X6(e,this._triggerName,o,i,l1,S,W,q1,[...t1.values()],e1,m1,w1))}};function ee(n,t,e,o,i){return n.some(s=>s(t,e,o,i))}function lt(n,t){let e=i1({},t);return Object.entries(n).forEach(([o,i])=>{i!=null&&(e[o]=i)}),e}var U4=class{styles;defaultParams;normalizer;constructor(t,e,o){this.styles=t,this.defaultParams=e,this.normalizer=o}buildStyles(t,e){let o=new Map,i=lt(t,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{a&&(a=i2(a,i,e));let r=this.normalizer.normalizePropertyName(l,e);a=this.normalizer.normalizeStyleValue(l,r,a,e),o.set(l,a)})}),o}};function oe(n,t,e){return new W4(n,t,e)}var W4=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(t,e,o){this.name=t,this.ast=e,this._normalizer=o,e.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new U4(i.style,s,o))}),J6(this.states,"true","1"),J6(this.states,"false","0"),e.transitions.forEach(i=>{this.transitionFactories.push(new n4(t,i,this.states))}),this.fallbackTransition=ie(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,o,i){return this.transitionFactories.find(a=>a.match(t,e,o,i))||null}matchStyles(t,e,o){return this.fallbackTransition.buildStyles(t,e,o)}};function ie(n,t,e){let o=[(a,l)=>!0],i={type:b.Sequence,steps:[],options:null},s={type:b.Transition,animation:i,matchers:o,options:null,queryCount:0,depCount:0};return new n4(n,s,t)}function J6(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}var ne=new M2,Q4=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(t,e,o){this.bodyNode=t,this._driver=e,this._normalizer=o}register(t,e){let o=[],i=[],s=st(this._driver,e,o,i);if(o.length)throw O6(o);this._animations.set(t,s)}_buildPlayer(t,e,o){let i=t.element,s=L4(this._normalizer,t.keyframes,e,o);return this._driver.animate(i,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,o={}){let i=[],s=this._animations.get(t),a,l=new Map;if(s?(a=at(this._driver,e,s,b4,W2,new Map,new Map,o,ne,i),a.forEach(m=>{let x=y1(l,m.element,new Map);m.postStyleProps.forEach(O=>x.set(O,null))})):(i.push(E6()),a=[]),i.length)throw T6(i);l.forEach((m,x)=>{m.forEach((O,C)=>{m.set(C,this._driver.computeStyle(x,C,T1))})});let r=a.map(m=>{let x=l.get(m.element);return this._buildPlayer(m,new Map,x)}),c=g0(r);return this._playersById.set(t,c),c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let o=this.players.indexOf(e);o>=0&&this.players.splice(o,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw j6(t);return e}listen(t,e,o,i){let s=$2(e,"","","");return q2(this._getPlayer(t),o,s,i),()=>{}}command(t,e,o,i){if(o=="register"){this.register(t,i[0]);return}if(o=="create"){let a=i[0]||{};this.create(t,e,a);return}let s=this._getPlayer(t);switch(o){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t);break}}},Z6="ng-animate-queued",se=".ng-animate-queued",D4="ng-animate-disabled",ae=".ng-animate-disabled",le="ng-star-inserted",re=".ng-star-inserted",ce=[],rt={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},he={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},N1="__ng_removed",k2=class{namespaceId;value;options;get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let o=t&&t.hasOwnProperty("value"),i=o?t.value:t;if(this.value=ve(i),o){let s=t,{value:a}=s,l=r3(s,["value"]);this.options=l}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let o=this.options.params;Object.keys(e).forEach(i=>{o[i]==null&&(o[i]=e[i])})}}},f2="void",P4=new k2(f2),K4=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(t,e,o){this.id=t,this.hostElement=e,this._engine=o,this._hostClassName="ng-tns-"+t,D1(e,this._hostClassName)}listen(t,e,o,i){if(!this._triggers.has(e))throw D6(o,e);if(o==null||o.length==0)throw P6(e);if(!de(o))throw I6(o,e);let s=y1(this._elementListeners,t,[]),a={name:e,phase:o,callback:i};s.push(a);let l=y1(this._engine.statesByElement,t,new Map);return l.has(e)||(D1(t,w2),D1(t,w2+"-"+e),l.set(e,P4)),()=>{this._engine.afterFlush(()=>{let r=s.indexOf(a);r>=0&&s.splice(r,1),this._triggers.has(e)||l.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw F6(t);return e}trigger(t,e,o,i=!0){let s=this._getTrigger(e),a=new z2(this.id,e,t),l=this._engine.statesByElement.get(t);l||(D1(t,w2),D1(t,w2+"-"+e),this._engine.statesByElement.set(t,l=new Map));let r=l.get(e),c=new k2(o,this.id);if(!(o&&o.hasOwnProperty("value"))&&r&&c.absorbOptions(r.options),l.set(e,c),r||(r=P4),!(c.value===f2)&&r.value===c.value){if(!we(r.params,c.params)){let H=[],W=s.matchStyles(r.value,r.params,H),t1=s.matchStyles(c.value,c.params,H);H.length?this._engine.reportError(H):this._engine.afterFlush(()=>{S0(t,W),R1(t,t1)})}return}let O=y1(this._engine.playersByElement,t,[]);O.forEach(H=>{H.namespaceId==this.id&&H.triggerName==e&&H.queued&&H.destroy()});let C=s.matchTransition(r.value,c.value,t,c.params),S=!1;if(!C){if(!i)return;C=s.fallbackTransition,S=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:C,fromState:r,toState:c,player:a,isFallbackTransition:S}),S||(D1(t,Z6),a.onStart(()=>{n2(t,Z6)})),a.onDone(()=>{let H=this.players.indexOf(a);H>=0&&this.players.splice(H,1);let W=this._engine.playersByElement.get(t);if(W){let t1=W.indexOf(a);t1>=0&&W.splice(t1,1)}}),this.players.push(a),O.push(a),a}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,o)=>{this._elementListeners.set(o,e.filter(i=>i.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(o=>o.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let o=this._engine.driver.query(t,u2,!0);o.forEach(i=>{if(i[N1])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(a=>a.triggerLeaveAnimation(i,e,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>o.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(t,e,o,i){let s=this._engine.statesByElement.get(t),a=new Map;if(s){let l=[];if(s.forEach((r,c)=>{if(a.set(c,r.value),this._triggers.has(c)){let m=this.trigger(t,c,f2,i);m&&l.push(m)}}),l.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,a),o&&g0(l).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),o=this._engine.statesByElement.get(t);if(e&&o){let i=new Set;e.forEach(s=>{let a=s.name;if(i.has(a))return;i.add(a);let r=this._triggers.get(a).fallbackTransition,c=o.get(a)||P4,m=new k2(f2),x=new z2(this.id,a,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:a,transition:r,fromState:c,toState:m,player:x,isFallbackTransition:!0})})}}removeNode(t,e){let o=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(o.totalAnimations){let s=o.players.length?o.playersByQueriedElement.get(t):[];if(s&&s.length)i=!0;else{let a=t;for(;a=a.parentNode;)if(o.statesByElement.get(a)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)o.markElementAsRemoved(this.id,t,!1,e);else{let s=t[N1];(!s||s===rt)&&(o.afterFlush(()=>this.clearElementCache(t)),o.destroyInnerAnimations(t),o._onRemovalComplete(t,e))}}insertNode(t,e){D1(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(o=>{let i=o.player;if(i.destroyed)return;let s=o.element,a=this._elementListeners.get(s);a&&a.forEach(l=>{if(l.name==o.triggerName){let r=$2(s,o.triggerName,o.fromState.value,o.toState.value);r._data=t,q2(o.player,l.phase,r,l.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(o)}),this._queue=[],e.sort((o,i)=>{let s=o.transition.ast.depCount,a=i.transition.ast.depCount;return s==0||a==0?s-a:this._engine.driver.containsElement(o.element,i.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},G4=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(t,e)=>{};_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,o){this.bodyNode=t,this.driver=e,this._normalizer=o}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(o=>{o.queued&&t.push(o)})}),t}createNamespace(t,e){let o=new K4(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(o,e):(this.newHostElements.set(e,o),this.collectEnterElement(e)),this._namespaceLookup[t]=o}_balanceNamespaceList(t,e){let o=this._namespaceList,i=this.namespacesByHostElement;if(o.length-1>=0){let a=!1,l=this.driver.getParentElement(e);for(;l;){let r=i.get(l);if(r){let c=o.indexOf(r);o.splice(c+1,0,t),a=!0;break}l=this.driver.getParentElement(l)}a||o.unshift(t)}else o.push(t);return i.set(e,t),t}register(t,e){let o=this._namespaceLookup[t];return o||(o=this.createNamespace(t,e)),o}registerTrigger(t,e,o){let i=this._namespaceLookup[t];i&&i.register(e,o)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let o=this._fetchNamespace(t);this.namespacesByHostElement.delete(o.hostElement);let i=this._namespaceList.indexOf(o);i>=0&&this._namespaceList.splice(i,1),o.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,o=this.statesByElement.get(t);if(o){for(let i of o.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&e.add(s)}}return e}trigger(t,e,o,i){if(J2(e)){let s=this._fetchNamespace(t);if(s)return s.trigger(e,o,i),!0}return!1}insertNode(t,e,o,i){if(!J2(e))return;let s=e[N1];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let a=this.collectedLeaveElements.indexOf(e);a>=0&&this.collectedLeaveElements.splice(a,1)}if(t){let a=this._fetchNamespace(t);a&&a.insertNode(e,o)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),D1(t,D4)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),n2(t,D4))}removeNode(t,e,o){if(J2(e)){let i=t?this._fetchNamespace(t):null;i?i.removeNode(e,o):this.markElementAsRemoved(t,e,!1,o);let s=this.namespacesByHostElement.get(e);s&&s.id!==t&&s.removeNode(e,o)}else this._onRemovalComplete(e,o)}markElementAsRemoved(t,e,o,i,s){this.collectedLeaveElements.push(e),e[N1]={namespaceId:t,setForRemoval:i,hasAnimation:o,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,o,i,s){return J2(e)?this._fetchNamespace(t).listen(e,o,i,s):()=>{}}_buildInstruction(t,e,o,i,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,o,i,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,u2,!0);e.forEach(o=>this.destroyActiveAnimationsForElement(o)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,Q2,!0),e.forEach(o=>this.finishActiveQueriedAnimationOnElement(o)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(o=>{o.queued?o.markedForDestroy=!0:o.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(o=>o.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return g0(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[N1];if(e&&e.setForRemoval){if(t[N1]=rt,e.namespaceId){this.destroyInnerAnimations(t);let o=this._fetchNamespace(e.namespaceId);o&&o.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(D4)&&this.markElementAsDisabled(t,!1),this.driver.query(t,ae,!0).forEach(o=>{this.markElementAsDisabled(o,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((o,i)=>this._balanceNamespaceList(o,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let o=0;o<this.collectedEnterElements.length;o++){let i=this.collectedEnterElements[o];D1(i,le)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let o=[];try{e=this._flushAnimations(o,t)}finally{for(let i=0;i<o.length;i++)o[i]()}}else for(let o=0;o<this.collectedLeaveElements.length;o++){let i=this.collectedLeaveElements[o];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(o=>o()),this._flushFns=[],this._whenQuietFns.length){let o=this._whenQuietFns;this._whenQuietFns=[],e.length?g0(e).onDone(()=>{o.forEach(i=>i())}):o.forEach(i=>i())}}reportError(t){throw R6(t)}_flushAnimations(t,e){let o=new M2,i=[],s=new Map,a=[],l=new Map,r=new Map,c=new Map,m=new Set;this.disabledNodes.forEach(z=>{m.add(z);let B=this.driver.query(z,se,!0);for(let A=0;A<B.length;A++)m.add(B[A])});let x=this.bodyNode,O=Array.from(this.statesByElement.keys()),C=ot(O,this.collectedEnterElements),S=new Map,H=0;C.forEach((z,B)=>{let A=b4+H++;S.set(B,A),z.forEach(T=>D1(T,A))});let W=[],t1=new Set,e1=new Set;for(let z=0;z<this.collectedLeaveElements.length;z++){let B=this.collectedLeaveElements[z],A=B[N1];A&&A.setForRemoval&&(W.push(B),t1.add(B),A.hasAnimation?this.driver.query(B,re,!0).forEach(T=>t1.add(T)):e1.add(B))}let m1=new Map,l1=ot(O,Array.from(t1));l1.forEach((z,B)=>{let A=W2+H++;m1.set(B,A),z.forEach(T=>D1(T,A))}),t.push(()=>{C.forEach((z,B)=>{let A=S.get(B);z.forEach(T=>n2(T,A))}),l1.forEach((z,B)=>{let A=m1.get(B);z.forEach(T=>n2(T,A))}),W.forEach(z=>{this.processLeaveNode(z)})});let N0=[],q1=[];for(let z=this._namespaceList.length-1;z>=0;z--)this._namespaceList[z].drainQueuedTransitions(e).forEach(A=>{let T=A.player,o1=A.element;if(N0.push(T),this.collectedEnterElements.length){let h1=o1[N1];if(h1&&h1.setForMove){if(h1.previousTriggersValues&&h1.previousTriggersValues.has(A.triggerName)){let b0=h1.previousTriggersValues.get(A.triggerName),_1=this.statesByElement.get(A.element);if(_1&&_1.has(A.triggerName)){let C2=_1.get(A.triggerName);C2.value=b0,_1.set(A.triggerName,C2)}}T.destroy();return}}let $1=!x||!this.driver.containsElement(x,o1),S1=m1.get(o1),p0=S.get(o1),Q=this._buildInstruction(A,o,p0,S1,$1);if(Q.errors&&Q.errors.length){q1.push(Q);return}if($1){T.onStart(()=>S0(o1,Q.fromStyles)),T.onDestroy(()=>R1(o1,Q.toStyles)),i.push(T);return}if(A.isFallbackTransition){T.onStart(()=>S0(o1,Q.fromStyles)),T.onDestroy(()=>R1(o1,Q.toStyles)),i.push(T);return}let l3=[];Q.timelines.forEach(h1=>{h1.stretchStartingKeyframe=!0,this.disabledNodes.has(h1.element)||l3.push(h1)}),Q.timelines=l3,o.append(o1,Q.timelines);let B8={instruction:Q,player:T,element:o1};a.push(B8),Q.queriedElements.forEach(h1=>y1(l,h1,[]).push(T)),Q.preStyleProps.forEach((h1,b0)=>{if(h1.size){let _1=r.get(b0);_1||r.set(b0,_1=new Set),h1.forEach((C2,w4)=>_1.add(w4))}}),Q.postStyleProps.forEach((h1,b0)=>{let _1=c.get(b0);_1||c.set(b0,_1=new Set),h1.forEach((C2,w4)=>_1.add(w4))})});if(q1.length){let z=[];q1.forEach(B=>{z.push(N6(B.triggerName,B.errors))}),N0.forEach(B=>B.destroy()),this.reportError(z)}let w1=new Map,x1=new Map;a.forEach(z=>{let B=z.element;o.has(B)&&(x1.set(B,B),this._beforeAnimationBuild(z.player.namespaceId,z.instruction,w1))}),i.forEach(z=>{let B=z.element;this._getPreviousPlayers(B,!1,z.namespaceId,z.triggerName,null).forEach(T=>{y1(w1,B,[]).push(T),T.destroy()})});let A0=W.filter(z=>it(z,r,c)),q0=new Map;et(q0,this.driver,e1,c,T1).forEach(z=>{it(z,r,c)&&A0.push(z)});let H0=new Map;C.forEach((z,B)=>{et(H0,this.driver,new Set(z),r,e2)}),A0.forEach(z=>{let B=q0.get(z),A=H0.get(z);q0.set(z,new Map([...B?.entries()??[],...A?.entries()??[]]))});let m4=[],s3=[],a3={};a.forEach(z=>{let{element:B,player:A,instruction:T}=z;if(o.has(B)){if(m.has(B)){A.onDestroy(()=>R1(B,T.toStyles)),A.disabled=!0,A.overrideTotalTime(T.totalTime),i.push(A);return}let o1=a3;if(x1.size>1){let S1=B,p0=[];for(;S1=S1.parentNode;){let Q=x1.get(S1);if(Q){o1=Q;break}p0.push(S1)}p0.forEach(Q=>x1.set(Q,o1))}let $1=this._buildAnimation(A.namespaceId,T,w1,s,H0,q0);if(A.setRealPlayer($1),o1===a3)m4.push(A);else{let S1=this.playersByElement.get(o1);S1&&S1.length&&(A.parentPlayer=g0(S1)),i.push(A)}}else S0(B,T.fromStyles),A.onDestroy(()=>R1(B,T.toStyles)),s3.push(A),m.has(B)&&i.push(A)}),s3.forEach(z=>{let B=s.get(z.element);if(B&&B.length){let A=g0(B);z.setRealPlayer(A)}}),i.forEach(z=>{z.parentPlayer?z.syncPlayerEvents(z.parentPlayer):z.destroy()});for(let z=0;z<W.length;z++){let B=W[z],A=B[N1];if(n2(B,W2),A&&A.hasAnimation)continue;let T=[];if(l.size){let $1=l.get(B);$1&&$1.length&&T.push(...$1);let S1=this.driver.query(B,Q2,!0);for(let p0=0;p0<S1.length;p0++){let Q=l.get(S1[p0]);Q&&Q.length&&T.push(...Q)}}let o1=T.filter($1=>!$1.destroyed);o1.length?pe(this,B,o1):this.processLeaveNode(B)}return W.length=0,m4.forEach(z=>{this.players.push(z),z.onDone(()=>{z.destroy();let B=this.players.indexOf(z);this.players.splice(B,1)}),z.play()}),m4}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,o,i,s){let a=[];if(e){let l=this.playersByQueriedElement.get(t);l&&(a=l)}else{let l=this.playersByElement.get(t);if(l){let r=!s||s==f2;l.forEach(c=>{c.queued||!r&&c.triggerName!=i||a.push(c)})}}return(o||i)&&(a=a.filter(l=>!(o&&o!=l.namespaceId||i&&i!=l.triggerName))),a}_beforeAnimationBuild(t,e,o){let i=e.triggerName,s=e.element,a=e.isRemovalTransition?void 0:t,l=e.isRemovalTransition?void 0:i;for(let r of e.timelines){let c=r.element,m=c!==s,x=y1(o,c,[]);this._getPreviousPlayers(c,m,a,l,e.toState).forEach(C=>{let S=C.getRealPlayer();S.beforeDestroy&&S.beforeDestroy(),C.destroy(),x.push(C)})}S0(s,e.fromStyles)}_buildAnimation(t,e,o,i,s,a){let l=e.triggerName,r=e.element,c=[],m=new Set,x=new Set,O=e.timelines.map(S=>{let H=S.element;m.add(H);let W=H[N1];if(W&&W.removedBeforeQueried)return new o0(S.duration,S.delay);let t1=H!==r,e1=me((o.get(H)||ce).map(w1=>w1.getRealPlayer())).filter(w1=>{let x1=w1;return x1.element?x1.element===H:!1}),m1=s.get(H),l1=a.get(H),N0=L4(this._normalizer,S.keyframes,m1,l1),q1=this._buildPlayer(S,N0,e1);if(S.subTimeline&&i&&x.add(H),t1){let w1=new z2(t,l,H);w1.setRealPlayer(q1),c.push(w1)}return q1});c.forEach(S=>{y1(this.playersByQueriedElement,S.element,[]).push(S),S.onDone(()=>ge(this.playersByQueriedElement,S.element,S))}),m.forEach(S=>D1(S,O4));let C=g0(O);return C.onDestroy(()=>{m.forEach(S=>n2(S,O4)),R1(r,e.toStyles)}),x.forEach(S=>{y1(i,S,[]).push(C)}),C}_buildPlayer(t,e,o){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,o):new o0(t.duration,t.delay)}},z2=class{namespaceId;triggerName;element;_player=new o0;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(t,e,o){this.namespaceId=t,this.triggerName=e,this.element=o}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,o)=>{e.forEach(i=>q2(t,o,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){y1(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function ge(n,t,e){let o=n.get(t);if(o){if(o.length){let i=o.indexOf(e);o.splice(i,1)}o.length==0&&n.delete(t)}return o}function ve(n){return n??null}function J2(n){return n&&n.nodeType===1}function de(n){return n=="start"||n=="done"}function tt(n,t){let e=n.style.display;return n.style.display=t??"none",e}function et(n,t,e,o,i){let s=[];e.forEach(r=>s.push(tt(r)));let a=[];o.forEach((r,c)=>{let m=new Map;r.forEach(x=>{let O=t.computeStyle(c,x,i);m.set(x,O),(!O||O.length==0)&&(c[N1]=he,a.push(c))}),n.set(c,m)});let l=0;return e.forEach(r=>tt(r,s[l++])),a}function ot(n,t){let e=new Map;if(n.forEach(l=>e.set(l,[])),t.length==0)return e;let o=1,i=new Set(t),s=new Map;function a(l){if(!l)return o;let r=s.get(l);if(r)return r;let c=l.parentNode;return e.has(c)?r=c:i.has(c)?r=o:r=a(c),s.set(l,r),r}return t.forEach(l=>{let r=a(l);r!==o&&e.get(r).push(l)}),e}function D1(n,t){n.classList?.add(t)}function n2(n,t){n.classList?.remove(t)}function pe(n,t,e){g0(e).onDone(()=>n.processLeaveNode(t))}function me(n){let t=[];return ct(n,t),t}function ct(n,t){for(let e=0;e<n.length;e++){let o=n[e];o instanceof E0?ct(o.players,t):t.push(o)}}function we(n,t){let e=Object.keys(n),o=Object.keys(t);if(e.length!=o.length)return!1;for(let i=0;i<e.length;i++){let s=e[i];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}function it(n,t,e){let o=e.get(n);if(!o)return!1;let i=t.get(n);return i?o.forEach(s=>i.add(s)):t.set(n,o),e.delete(n),!0}var s2=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(t,e)=>{};constructor(t,e,o){this._driver=e,this._normalizer=o,this._transitionEngine=new G4(t.body,e,o),this._timelineEngine=new Q4(t.body,e,o),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(t,e,o,i,s){let a=t+"-"+i,l=this._triggerCache[a];if(!l){let r=[],c=[],m=st(this._driver,s,r,c);if(r.length)throw b6(i,r);l=oe(i,m,this._normalizer),this._triggerCache[a]=l}this._transitionEngine.registerTrigger(e,i,l)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,o,i){this._transitionEngine.insertNode(t,e,o,i)}onRemove(t,e,o){this._transitionEngine.removeNode(t,e,o)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,o,i){if(o.charAt(0)=="@"){let[s,a]=_4(o),l=i;this._timelineEngine.command(s,e,a,l)}else this._transitionEngine.trigger(t,e,o,i)}listen(t,e,o,i,s){if(o.charAt(0)=="@"){let[a,l]=_4(o);return this._timelineEngine.listen(a,e,l,s)}return this._transitionEngine.listen(t,e,o,i,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function ue(n,t){let e=null,o=null;return Array.isArray(t)&&t.length?(e=I4(t[0]),t.length>1&&(o=I4(t[t.length-1]))):t instanceof Map&&(e=I4(t)),e||o?new xe(n,e,o):null}var xe=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,o,i){this._element=e,this._startStyles=o,this._endStyles=i;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&R1(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(R1(this._element,this._initialStyles),this._endStyles&&(R1(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(S0(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(S0(this._element,this._endStyles),this._endStyles=null),R1(this._element,this._initialStyles),this._state=3)}}return n})();function I4(n){let t=null;return n.forEach((e,o)=>{fe(o)&&(t=t||new Map,t.set(o,e))}),t}function fe(n){return n==="display"||n==="position"}var s4=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(t,e,o,i){this.element=t,this.keyframes=e,this.options=o,this._specialStyles=i,this._duration=o.duration,this._delay=o.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(o=>{e.push(Object.fromEntries(o))}),e}_triggerWebAnimation(t,e,o){return t.animate(this._convertKeyframesToObject(e),o)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((o,i)=>{i!=="offset"&&t.set(i,this._finished?o:G2(this.element,i))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}},a4=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}containsElement(t,e){return V4(t,e)}getParentElement(t){return U2(t)}query(t,e,o){return A4(t,e,o)}computeStyle(t,e,o){return G2(t,e)}animate(t,e,o,i,s,a=[]){let l=i==0?"both":"forwards",r={duration:o,delay:i,fill:l};s&&(r.easing=s);let c=new Map,m=a.filter(C=>C instanceof s4);W6(o,i)&&m.forEach(C=>{C.currentSnapshot.forEach((S,H)=>c.set(H,S))});let x=$6(e).map(C=>new Map(C));x=Q6(t,x,c);let O=ue(t,x);return new s4(t,x,r,O)}};var Z2="@",ht="@.disabled",l4=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(t,e,o,i){this.namespaceId=t,this.delegate=e,this.engine=o,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,o,i=!0){this.delegate.insertBefore(t,e,o),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,o){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,o,i){this.delegate.setAttribute(t,e,o,i)}removeAttribute(t,e,o){this.delegate.removeAttribute(t,e,o)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,o,i){this.delegate.setStyle(t,e,o,i)}removeStyle(t,e,o){this.delegate.removeStyle(t,e,o)}setProperty(t,e,o){e.charAt(0)==Z2&&e==ht?this.disableAnimations(t,!!o):this.delegate.setProperty(t,e,o)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,o,i){return this.delegate.listen(t,e,o,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},Y4=class extends l4{factory;constructor(t,e,o,i,s){super(e,o,i,s),this.factory=t,this.namespaceId=e}setProperty(t,e,o){e.charAt(0)==Z2?e.charAt(1)=="."&&e==ht?(o=o===void 0?!0:!!o,this.disableAnimations(t,o)):this.engine.process(this.namespaceId,t,e.slice(1),o):this.delegate.setProperty(t,e,o)}listen(t,e,o,i){if(e.charAt(0)==Z2){let s=Me(t),a=e.slice(1),l="";return a.charAt(0)!=Z2&&([a,l]=ke(a)),this.engine.listen(this.namespaceId,s,a,l,r=>{let c=r._data||-1;this.factory.scheduleListenerCallback(c,o,r)})}return this.delegate.listen(t,e,o,i)}};function Me(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function ke(n){let t=n.indexOf("."),e=n.substring(0,t),o=n.slice(t+1);return[e,o]}var r4=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(t,e,o){this.delegate=t,this.engine=e,this._zone=o,e.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(t,e){let o="",i=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let c=this._rendererCache,m=c.get(i);if(!m){let x=()=>c.delete(i);m=new l4(o,i,this.engine,x),c.set(i,m)}return m}let s=e.id,a=e.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);let l=c=>{Array.isArray(c)?c.forEach(l):this.engine.registerTrigger(s,a,t,c.name,c)};return e.data.animation.forEach(l),new Y4(this,a,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,o){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(o));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[a,l]=s;a(l)}),this._animationCallbacksBuffer=[]})}),i.push([e,o])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(t){this.engine.flush(),this.delegate.componentReplaced?.(t)}};var ye=(()=>{class n extends s2{constructor(e,o,i){super(e,o,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(o){return new(o||n)(L2(M3),L2(P0),L2(I0))};static \u0275prov=n1({token:n,factory:n.\u0275fac})}return n})();function Ce(){return new t4}function Se(n,t,e){return new r4(n,t,e)}var gt=[{provide:I0,useFactory:Ce},{provide:s2,useClass:ye},{provide:k3,useFactory:Se,deps:[E3,s2,y3]}],X5=[{provide:P0,useClass:X4},{provide:x4,useValue:"NoopAnimations"},...gt],Be=[{provide:P0,useFactory:()=>new a4},{provide:x4,useFactory:()=>"BrowserAnimations"},...gt];function vt(){return z3("NgEagerAnimations"),[...Be]}function dt(n,t){let e=`${J0.apiUrl}/${n.url}`,o=n.clone({url:e});return t(o)}var pt="query_id=AAELkhMXAAAAAAuSExcjQJEc&user=%7B%22id%22%3A387158539%2C%22first_name%22%3A%22Vyacheslav%22%2C%22last_name%22%3A%22Litvinenko%22%2C%22username%22%3A%22tiltvinenko%22%2C%22language_code%22%3A%22ru%22%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2FV1FcghvcCWb_4wRuaWj3i9iwCWroGAdULGkKcbd41_g.svg%22%7D&auth_date=1752430176&signature=rRDJM6Chom1i2yZJaSAEoUL96pVLpRGCFLTh_UFmzFcwccUAHrhj_ZarwdLn5pELmgjRSZ8E9VW4kqwcnSVjDg&hash=5bd59cf35b1f1cdbf1c409f93c79d3cea2457b30f196a36b640ab6db194e7248";function mt(n,t){let e="Authorization",o=p(z1);return(J0.isTelegramMiniApp?o.initData$:m0(pt)).pipe(D(s=>{let a=n.clone({headers:n.headers.append(e,s)});return t(a)}))}function wt(n,t){let e=p(e0),o=p(k0);return t(n.clone()).pipe(p3(i=>{if(i.status===404&&i.error.processed)o.navigate(["not-found"]);else if(i.status===401||i.status===403)o.navigate(["not-permitted"]);else{let s=i.error.message??i.message;e.error(s,"alert-circle-outline")}return h3}))}var ut={Search:{en:"Search",ru:"\u041F\u043E\u0438\u0441\u043A"}};var a2=(()=>{let t=class t{set src(o){o?(this.img.src=o,this.showPlaceholder()):this.img.src=this.imgPlaceholder}get img(){return this.elRef.nativeElement}constructor(){this.imgPlaceholder="assets/no-avatar.png",this.elRef=p(u0),this.placeholderEl=this.createPlaceholderEl(),this.img.onload=()=>this.hidePlaceholder()}showPlaceholder(){let o=this.placeholderEl;o.style.width=`${this.img.width+2}px`,o.style.height=`${this.img.offsetHeight+2}px`,o.style.top=`${this.img.offsetTop-1}px`,o.style.left=`${this.img.offsetLeft-1}px`,o.style.borderRadius=window.getComputedStyle(this.img).getPropertyValue("border-radius"),this.img.after(this.placeholderEl)}hidePlaceholder(){this.placeholderEl.remove()}createPlaceholderEl(){let o=document.createElement("div");return o.style.zIndex="1",o.style.position="absolute",o.className="skeleton-placeholder",o}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=g1({type:t,selectors:[["","appImgLoad",""]],inputs:{src:"src",imgPlaceholder:"imgPlaceholder"}});let n=t;return n})();var B0=(()=>{let t=class t{set placeholderOpacity(o){this.placeholderEl.style.opacity=o}get el(){return this.elRef.nativeElement}constructor(){this.elRef=p(u0),this.placeholderEl=this.createPlaceholderEl(),this.loadingCounter$=new c3(0),this.loading$=this.loadingCounter$.pipe(F(o=>o>0),w0()),this.destroyed$=new U}ngOnInit(){this.el.style.position="relative",this.loading$.pipe(U1(this.destroyed$)).subscribe(o=>o?this.onLoadStarts():this.onLoadEnds())}ngOnDestroy(){this.destroyed$.next(void 0),this.destroyed$.complete()}incrLoading(){this.loadingCounter$.next(this.loadingCounter$.value+1)}decrLoading(){this.loadingCounter$.next(this.loadingCounter$.value-1)}onLoadStarts(){this.el.appendChild(this.placeholderEl)}onLoadEnds(){this.placeholderEl.remove()}createPlaceholderEl(){let o=document.createElement("div");return o.style.zIndex="2",o.style.position="absolute",o.style.top="0",o.style.bottom="0",o.style.left="0",o.style.right="0",o.style.pointerEvents="none",o.style.borderRadius="0.5rem",o.className="skeleton-placeholder",o}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=g1({type:t,selectors:[["","appFeatureLoad",""]],inputs:{placeholderOpacity:"placeholderOpacity"},exportAs:["appFeatureLoad"]});let n=t;return n})();var Le=["altLabel"],_e=["end"],xt=(n,t)=>({$implicit:n,index:t});function Ve(n,t){if(n&1&&f4(0,6),n&2){let e=M(),o=e.$implicit,i=e.$index,s=M();u("ngTemplateOutlet",s.altLabelTemplateRef)("ngTemplateOutletContext",h2(2,xt,o,i))}}function Ae(n,t){if(n&1&&(g(0,"ion-label"),f(1),v()),n&2){let e=M().$implicit;h(),k(" ",e.fullName," ")}}function He(n,t){if(n&1&&f4(0,6),n&2){let e=M(),o=e.$implicit,i=e.$index,s=M();u("ngTemplateOutlet",s.endTemplateRef)("ngTemplateOutletContext",h2(2,xt,o,i))}}function be(n,t){if(n&1){let e=N();g(0,"ion-item",3),V("click",function(){let i=L(e),s=i.$implicit,a=i.$index,l=M();return _(l.onUserClicked(a,s))}),g(1,"ion-avatar",4),y(2,"img",5),v(),G(3,Ve,1,5,"ng-container",6)(4,Ae,2,1,"ion-label"),G(5,He,1,5,"ng-container",6),v()}if(n&2){let e=t.$implicit,o=t.$index,i=t.$count,s=M();u("lines",o===i-1?"none":"")("button",s.clickable()),h(2),u("src",e.photoUrl,U0),h(),Y(s.altLabelTemplateRef?3:4),h(2),Y(s.endTemplateRef?5:-1)}}var c4=(()=>{let t=class t{constructor(){this.clickable=P(!1),this.users=P.required(),this.searchStr=K(null),this.filteredUsers=X(()=>{let o=this.users(),i=this.searchStr()?.toLowerCase();return i?o.filter(s=>s.fullName.toLowerCase().includes(i)):o}),this.searchFocused=v2(),this.userClicked=v2(),this.UsersListLocalize=ut}onUserClicked(o,i){this.clickable()&&this.userClicked.emit({index:o,user:i1({},i)})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=R({type:t,selectors:[["app-users-list"]],contentQueries:function(i,s,a){if(i&1&&(M4(a,Le,7),M4(a,_e,7)),i&2){let l;k4(l=z4())&&(s.altLabelTemplateRef=l.first),k4(l=z4())&&(s.endTemplateRef=l.first)}},inputs:{clickable:[1,"clickable"],users:[1,"users"]},outputs:{searchFocused:"searchFocused",userClicked:"userClicked"},decls:5,vars:4,consts:[["mode","ios","clear-icon","close-outline",3,"ionInput","ionFocus","ionBlur","debounce","placeholder"],["mode","ios"],[3,"lines","button"],[3,"click","lines","button"],["slot","start"],["appImgLoad","",3,"src"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,s){i&1&&(g(0,"ion-searchbar",0),d(1,"localize"),V("ionInput",function(l){return s.searchStr.set(l.detail.value)})("ionFocus",function(){return s.searchFocused.emit(!0)})("ionBlur",function(){return s.searchFocused.emit(!1)}),v(),g(2,"ion-list",1),Q1(3,be,6,5,"ion-item",2,W1),v()),i&2&&(u("debounce",300)("placeholder",w(1,2,s.UsersListLocalize.Search)),h(3),K1(s.filteredUsers()))},dependencies:[Q0,b3,Z,Z1,E1,Y0,a1,c6,a2],styles:["[_nghost-%COMP%]{height:100%;position:relative}ion-searchbar[_ngcontent-%COMP%]{position:sticky;top:0}ion-list[_ngcontent-%COMP%]{background:transparent;max-height:calc(100% - 3.75rem);overflow-y:auto}ion-item[_ngcontent-%COMP%]{--background: transparent}ion-label[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}"]});let n=t;return n})();function Oe(n,t){if(n&1&&(g(0,"ion-avatar"),y(1,"img",1),v()),n&2){let e=t.$implicit,o=t.$index,i=t.$count;_3("z-index",i-o),h(),u("src",e.photoUrl,U0)}}var ft=(()=>{let t=class t{constructor(){this.users=P.required(),this.maxCount=P(8),this.sliced=X(()=>this.users().slice(0,this.maxCount()))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=R({type:t,selectors:[["app-avatars-list"]],inputs:{users:[1,"users"],maxCount:[1,"maxCount"]},decls:2,vars:0,consts:[[3,"zIndex"],["appImgLoad","","alt","",3,"src"]],template:function(i,s){i&1&&Q1(0,Oe,2,3,"ion-avatar",0,W1),i&2&&K1(s.sliced())},dependencies:[Q0,Y0,a2],styles:["[_nghost-%COMP%]{display:flex}ion-avatar[_ngcontent-%COMP%]{width:1.6rem;height:1.6rem}ion-avatar[_ngcontent-%COMP%]:not(:last-child){margin-right:-.7rem}"]});let n=t;return n})();var Mt={ScrollTop:{en:"Scroll to top",ru:"\u0412\u0435\u0440\u043D\u0443\u0442\u044C\u0441\u044F \u043D\u0430\u0432\u0435\u0440\u0445"}};function Ee(n,t){if(n&1){let e=N();g(0,"ion-button",1),V("click",function(){L(e);let i=M();return _(i.scrollTop())}),y(1,"ion-icon",2),g(2,"span"),f(3),d(4,"localize"),v()()}if(n&2){let e=M();u("@ifAnimation",void 0),h(3),k(" ",w(4,2,e.ScrollTopButtonLocalize.ScrollTop)," ")}}var kt=(()=>{let t=class t{constructor(){this.animationTime=250,this.thresholdPx=400,this.ionContent=p(X0),this.ScrollTopButtonLocalize=Mt,this.manualHideButton=!1,this.showButton$=this.ionContent.ionScroll.pipe(d3(250),F(o=>o.detail.scrollTop>this.thresholdPx),I1(!1),w0(),w3())}ngOnInit(){this.ionContent.scrollEvents=!0}scrollTop(){this.manualHideButton=!0,this.ionContent.scrollToTop(this.animationTime).then(()=>this.manualHideButton=!1)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=R({type:t,selectors:[["app-scroll-top-button"]],inputs:{animationTime:"animationTime",thresholdPx:"thresholdPx"},decls:2,vars:3,consts:[["mode","ios","size","small","color","dark","shape","round"],["mode","ios","size","small","color","dark","shape","round",3,"click"],["name","arrow-up","slot","start"]],template:function(i,s){i&1&&(G(0,Ee,5,4,"ion-button",0),d(1,"async")),i&2&&Y(!s.manualHideButton&&w(1,1,s.showButton$)?0:-1)},dependencies:[Q0,k1,Z,O1,J],styles:["[_nghost-%COMP%]{z-index:5;position:fixed;left:50%;transform:translate(-50%);top:1.5rem}ion-button[_ngcontent-%COMP%]{white-space:nowrap;--padding-top: .5rem;--padding-bottom: .5rem;--padding-start: 1.25rem;--padding-end: 1.25rem;--box-shadow: 0 0 1rem 0 var(--ion-background-color, #fff)}"],data:{animation:[p2("ifAnimation",[t2(":enter",[j1({opacity:0}),T0("0.25s ease-out",j1({opacity:1}))]),t2(":leave",[T0("0.25s ease-in",j1({opacity:0}))])])]}});let n=t;return n})();var F0={Member:{en:"member",ru:"\u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A"},Initiator:{en:"Initiator",ru:"\u0418\u043D\u0438\u0446\u0438\u0430\u0442\u043E\u0440"},Starts:{en:"Starts",ru:"\u041D\u0430\u0447\u0430\u043B\u043E"},Ends:{en:"Ends",ru:"\u041A\u043E\u043D\u0435\u0446"},DaysOfWeek:{en:"Days of week",ru:"\u0414\u043D\u0438 \u043D\u0435\u0434\u0435\u043B\u0438"},Description:{en:"Description",ru:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},Refresh:{en:"Refresh",ru:"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C"},Share:{en:"Share",ru:"\u041F\u043E\u0434\u0435\u043B\u0438\u0442\u044C\u0441\u044F"},Link:{en:"Link",ru:"\u0421\u0441\u044B\u043B\u043A\u0430"},Edit:{en:"Edit",ru:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"},Delete:{en:"Delete",ru:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"},ClipboardLink:{en:"Link was copied to clipboard",ru:"\u0421\u0441\u044B\u043B\u043A\u0430 \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u0430 \u0432 \u0431\u0443\u0444\u0435\u0440 \u043E\u0431\u043C\u0435\u043D\u0430"},EventWasDeleted:{en:"Event was successfully deleted",ru:"\u0421\u043E\u0431\u044B\u0442\u0438\u0435 \u0431\u044B\u043B\u043E \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D\u043E"},DeleteQuestion:{en:"Delete event?",ru:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0441\u043E\u0431\u044B\u0442\u0438\u0435?"},CannotBeUndone:{en:"This cannot be undone",ru:"\u042D\u0442\u043E \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C"}};var zt={Cancel:{en:"Cancel",ru:"\u041E\u0442\u043C\u0435\u043D\u0430"}};var P1=(()=>{let t=class t{constructor(){this.local=p(d1),this.cancelText=this.local.localizeSync(zt.Cancel)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=n1({token:t,factory:t.\u0275fac});let n=t;return n})();var yt=(()=>{let t=class t extends P1{constructor(){super(),this.tg=p(z1)}createConfirm(o){let i=new U;return this.tg.miniApp$.pipe($(s=>{if(!s){i.next(!1),i.complete();return}let a={title:o.header,message:o.message,buttons:[{id:"ok",text:o.okText??"OK",type:o.okDanger?"destructive":"default"},{id:"cancel",text:o.cancelText,type:o.cancelText?"default":"cancel"}]};s.showPopup(a,l=>{i.next(l==="ok"),i.complete()})}),D(()=>i.asObservable()))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=n1({token:t,factory:t.\u0275fac});let n=t;return n})();var Ct=(()=>{let t=class t extends P1{constructor(){super(),this.alert=p(a6)}createConfirm(o){let i=new U;return this.alert.create({mode:"ios",header:o.header,message:o.message,backdropDismiss:!1,buttons:[{text:o.cancelText??this.cancelText,role:"cancel",handler:()=>{i.next(!1),i.complete()}},{text:o.okText??"OK",role:o.okDanger?"destructive":void 0,handler:()=>{i.next(!0),i.complete()}}]}).then(s=>s.present()),i.asObservable()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=n1({token:t,factory:t.\u0275fac});let n=t;return n})();var St=n=>f3([{provide:P1,useClass:n?yt:Ct}]);var Bt=(()=>{let t=class t{constructor(){this.baseUrl="events",this.http=p(M0)}getEventInfo(o){return this.http.get(`${this.baseUrl}/info/${o}`)}getEventUsers(o){return this.http.get(`${this.baseUrl}/users/${o}`)}deleteEvent(o){return this.http.delete(`${this.baseUrl}/${o}`)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=n1({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Te=()=>[0,1],Lt=()=>[];function je(n,t){if(n&1){let e=N();g(0,"ion-item",16),V("click",function(){L(e);let i=M(2);return _(i.redirectToEdit())}),y(1,"ion-icon",20),g(2,"ion-label"),f(3),d(4,"localize"),v()(),g(5,"ion-item",16),V("click",function(){L(e);let i=M(2);return _(i.deleteEvent())}),y(6,"ion-icon",21),g(7,"ion-label",22),f(8),d(9,"localize"),v()()}if(n&2){let e=M(2);u("detail",!1),h(3),k(" ",w(4,4,e.EventMainInfoLocalize.Edit)," "),h(2),u("detail",!1),h(3),k(" ",w(9,6,e.EventMainInfoLocalize.Delete)," ")}}function De(n,t){if(n&1){let e=N();g(0,"ion-list",15)(1,"ion-item",16),V("click",function(){L(e);let i=M();return i.refreshInfo(),_(i.refreshUsers())}),y(2,"ion-icon",17),g(3,"ion-label"),f(4),d(5,"localize"),v()(),g(6,"ion-item",16),V("click",function(){L(e);let i=M();return _(i.share())}),y(7,"ion-icon",18),g(8,"ion-label"),f(9),d(10,"localize"),v()(),g(11,"ion-item",16),V("click",function(){L(e);let i=M();return _(i.copyToClipboard())}),y(12,"ion-icon",19),g(13,"ion-label"),f(14),d(15,"localize"),v()(),G(16,je,10,8),v()}if(n&2){let e=M(),o=r1(0);h(),u("detail",!1),h(3),k(" ",w(5,7,e.EventMainInfoLocalize.Refresh)," "),h(2),u("detail",!1),h(3),k(" ",w(10,9,e.EventMainInfoLocalize.Share)," "),h(2),u("detail",!1),h(3),k(" ",w(15,11,e.EventMainInfoLocalize.Link)," "),h(2),Y(o!=null&&o.canEdit?16:-1)}}function Pe(n,t){if(n&1){let e=N();g(0,"ion-item",16),V("click",function(){L(e),M();let i=q(41);return _(i.present())}),g(1,"ion-label"),f(2),d(3,"localizeMany"),v(),y(4,"app-avatars-list",23),v()}if(n&2){let e=M(),o=r1(1),i=r1(16);u("detail",!1),h(2),H1(" ",i," ",c1(3,4,e.EventMainInfoLocalize.Member,i)," "),h(2),u("users",o??M1(7,Lt))}}function Ie(n,t){if(n&1&&(f1(0),d(1,"date"),f(2),d(3,"titlecase")),n&2){let e=t.$implicit,o=t.$index,i=t.$count,s=M(2),a=r1(2),l=W0(1,2,s.daysOfWeek[e-1],"EEE",void 0,a);h(2),H1(" ",w(3,7,l),"",o===i-1?"":","," ")}}function Fe(n,t){if(n&1&&(g(0,"ion-item",12)(1,"ion-label"),f(2),d(3,"localize"),v(),g(4,"ion-note"),Q1(5,Ie,4,9,null,null,W1),v()()),n&2){let e=M(),o=r1(0);u("lines",o!=null&&o.description?"":"none"),h(2),k(" ",w(3,2,e.EventMainInfoLocalize.DaysOfWeek)," "),h(3),K1(o==null?null:o.isoDaysOfWeek)}}function Re(n,t){if(n&1&&(g(0,"ion-item",13)(1,"ion-label"),f(2),d(3,"localize"),v(),g(4,"ion-note"),f(5),v()()),n&2){let e=M(),o=r1(0);h(2),k(" ",w(3,2,e.EventMainInfoLocalize.Description)," "),h(3),k(" ",o==null?null:o.description," ")}}function Ne(n,t){if(n&1&&(g(0,"ion-note",26),f(1),v()),n&2){let e=M().$implicit;h(),k(" ","@"+e.username," ")}}function qe(n,t){if(n&1&&s1(0,Ne,2,1,"ion-note",25),n&2){let e=t.$implicit;u("ngIf",e.username)}}function $e(n,t){if(n&1){let e=N();g(0,"app-users-list",24),V("searchFocused",function(i){L(e),M();let s=q(41);return _(s.backdropDismiss=!i)}),s1(1,qe,1,1,"ng-template",null,1,g2),v()}if(n&2){M();let e=r1(1);u("users",e??M1(1,Lt))}}var h4=(()=>{let t=class t{constructor(){this.eventId=P.required(),this.eventId$=F1(this.eventId),this.router=p(k0),this.toast=p(e0),this.confirm=p(P1),this.tg=p(z1),this.request=p(Bt),this.featureLoad=p(B0,{optional:!0}),this.refreshInfo$=new U,this.refreshUsers$=new U,this.info$=this.refreshInfo$.pipe(I1(!0),D(()=>this.eventId$),$(()=>this.featureLoad?.incrLoading()),D(o=>this.request.getEventInfo(o).pipe(l0(()=>this.featureLoad?.decrLoading()))),B1(1)),this.users$=this.refreshUsers$.pipe(I1(!0),D(()=>this.eventId$),$(()=>this.featureLoad?.incrLoading()),D(o=>this.request.getEventUsers(o).pipe(l0(()=>this.featureLoad?.decrLoading()))),B1(1)),this.info=y0(this.info$),this.users=y0(this.users$),this.local=p(d1),this.localizeFormat$=this.local.localizationWithFormat$,this.EventMainInfoLocalize=F0,this.tools=p(Z0),this.daysOfWeek=this.tools.daysOfWeek}refreshInfo(){this.refreshInfo$.next(!0)}refreshUsers(){this.refreshUsers$.next(!0)}copyToClipboard(){this.tg.getEventTgLink(this.eventId()).pipe(D(o=>B2(navigator.clipboard.writeText(o))),a0(1)).subscribe(()=>{let o=this.local.localizeSync(F0.ClipboardLink);this.toast.light(o,"clipboard-outline")})}share(){this.eventId()&&this.tg.shareEvent(this.eventId(),this.info()?.name)}redirectToEdit(){let o={eventId:this.eventId()};this.router.navigate(["edit"],{queryParams:o})}deleteEvent(){let o=this.local.localizeSync(F0.DeleteQuestion),i=this.local.localizeSync(F0.CannotBeUndone),s=this.local.localizeSync(F0.Delete),a=this.local.localizeSync(F0.EventWasDeleted);this.confirm.createConfirm({header:o,message:i,okText:s,okDanger:!0}).pipe($0(Boolean),$(()=>this.featureLoad?.incrLoading()),D(()=>this.request.deleteEvent(this.eventId())),$(()=>this.toast.info(a,"trash-outline")),l0(()=>this.featureLoad?.decrLoading())).subscribe(()=>this.router.navigate(["edit"]))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=R({type:t,selectors:[["app-event-main-info"]],inputs:{eventId:[1,"eventId"]},decls:43,vars:35,consts:[["usersModal",""],["end",""],["mode","ios"],["value","info"],["slot","header",1,"header-item"],["slot","start"],["appImgLoad","",3,"src"],["id","menu-popover-trigger","slot","end","color","dark","fill","clear","size","large",1,"menu-button",3,"click"],["name","ellipsis-vertical","slot","icon-only"],["mode","ios","trigger","menu-popover-trigger","triggerAction","click",3,"dismissOnSelect","arrow"],["slot","content","mode","ios",1,"info-list"],["button","",3,"detail"],[3,"lines"],["lines","none",1,"notes-item"],[3,"initialBreakpoint","breakpoints"],["lines","none",1,"popover-menu-list"],["button","",3,"click","detail"],["name","refresh-outline","slot","start","color","medium"],["name","share-social-outline","slot","start","color","medium"],["name","link-outline","slot","start","color","medium"],["name","create-outline","slot","start","color","medium"],["name","trash-outline","slot","start","color","danger"],["color","danger"],[3,"users"],[3,"searchFocused","users"],["class","username",4,"ngIf"],[1,"username"]],template:function(i,s){if(i&1){let a=N();f1(0)(1)(2),d(3,"async"),g(4,"ion-accordion-group",2)(5,"ion-accordion",3)(6,"ion-item",4)(7,"ion-avatar",5),y(8,"img",6),v(),g(9,"ion-label"),f(10),v(),g(11,"ion-button",7),V("click",function(r){return L(a),_(r.stopPropagation())}),y(12,"ion-icon",8),v(),g(13,"ion-popover",9),s1(14,De,17,13,"ng-template"),v()(),g(15,"ion-list",10),f1(16),G(17,Pe,5,8,"ion-item",11),g(18,"ion-item")(19,"ion-label"),f(20),d(21,"localize"),v(),g(22,"ion-note"),f(23),v()(),g(24,"ion-item")(25,"ion-label"),f(26),d(27,"localize"),v(),g(28,"ion-note"),f(29),d(30,"date"),v()(),g(31,"ion-item",12)(32,"ion-label"),f(33),d(34,"localize"),v(),g(35,"ion-note"),f(36),d(37,"date"),v()(),G(38,Fe,7,4,"ion-item",12),G(39,Re,6,4,"ion-item",13),v()()(),g(40,"ion-modal",14,0),s1(42,$e,3,2,"ng-template"),v()}if(i&2){let a=b1(s.info());h();let l=b1(s.users());h(),b1(w(3,18,s.localizeFormat$)??void 0),h(6),u("src",a==null||a.creator==null?null:a.creator.photoUrl,U0),h(2),k(" ",(a==null?null:a.name)??"Event name"," "),h(3),u("dismissOnSelect",!0)("arrow",!1),h(3);let r=b1((l==null?null:l.length)??0);h(),Y(r>0?17:-1),h(3),k(" ",w(21,22,s.EventMainInfoLocalize.Initiator)," "),h(3),k(" ",a==null||a.creator==null?null:a.creator.fullName," "),h(3),k(" ",w(27,24,s.EventMainInfoLocalize.Starts)," "),h(3),k(" ",c1(30,26,a==null?null:a.starts,"dd.MM.yyyy")," ");let c=!!(a!=null&&a.specifyDaysOfWeek&&(!(a==null||a.isoDaysOfWeek==null)&&a.isoDaysOfWeek.length)),m=!!(a!=null&&a.description);h(2),u("lines",c||m?"":"none"),h(2),k(" ",w(34,29,s.EventMainInfoLocalize.Ends)," "),h(3),k(" ",c1(37,31,a==null?null:a.ends,"dd.MM.yyyy")," "),h(2),Y(c?38:-1),h(),Y(m?39:-1),h(),u("initialBreakpoint",1)("breakpoints",M1(34,Te))}},dependencies:[p1,f0,a1,O1,J,Z1,E1,z0,k1,H2,X1,Z,C0,j2,T2,Y0,J1,G0,ft,c4,a2],styles:["ion-accordion-group[_ngcontent-%COMP%]{border-radius:.5rem}ion-list.info-list[_ngcontent-%COMP%]{margin-top:.5rem;background:transparent}ion-item[_ngcontent-%COMP%]{--background: transparent}ion-item.header-item[_ngcontent-%COMP%]{border-radius:.5rem;--padding-start: .75rem;--min-height: 3.7rem}ion-item.header-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:2.75rem!important;height:2.75rem!important}ion-item.header-item[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]{margin-right:-1rem}ion-item.header-item[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.25rem}ion-item.header-item[_ngcontent-%COMP%]     .ion-accordion-toggle-icon{position:absolute;right:3rem}ion-item.notes-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-bottom:auto}ion-item.notes-item[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{padding:.5rem 0;margin-left:max(20%,2.5rem);text-align:end}ion-popover[_ngcontent-%COMP%]{--offset-y: -.25rem;--offset-x: -.6rem;--width: auto}ion-popover[_ngcontent-%COMP%]   .popover-menu-list[_ngcontent-%COMP%]{padding:.25rem 0;background-color:var(--popover-menu-bg);white-space:nowrap}app-avatars-list[_ngcontent-%COMP%]{opacity:.9}ion-modal[_ngcontent-%COMP%]{--height: auto}ion-modal[_ngcontent-%COMP%]   app-users-list[_ngcontent-%COMP%]{height:60vh;padding:1rem}"],changeDetection:0});let n=t;return n})();var _t={FilterResults:{en:"Filter results",ru:"\u0424\u0438\u043B\u044C\u0442\u0440\u043E\u0432\u0430\u0442\u044C \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B"},Exclude:{en:"Exclude",ru:"\u0418\u0441\u043A\u043B\u044E\u0447\u0438\u0442\u044C "},Maybe:{en:'"maybe"',ru:'"\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E"'},Time:{en:'"time"',ru:'"\u0432\u0440\u0435\u043C\u044F"'},IgnorePastDates:{en:"Ignore past dates",ru:"\u0423\u0431\u0440\u0430\u0442\u044C \u043F\u0440\u043E\u0448\u0435\u0434\u0448\u0438\u0435 \u0434\u0430\u0442\u044B"},OnlyWithMe:{en:"Only with me",ru:"\u0422\u043E\u043B\u044C\u043A\u043E \u0441\u043E \u043C\u043D\u043E\u0439"},AtLeast:{en:"At least",ru:"\u041A\u0430\u043A \u043C\u0438\u043D\u0438\u043C\u0443\u043C"},Member:{en:"member",ru:"\u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A"}};var At=r2(d2());var Ht=(()=>{let t=class t{set maxOverlap(o){(0,At.isNil)(o)||this.membersCount.set(o)}constructor(){this.disabled=!1,this.noMaybe=K(!1),this.noTime=K(!1),this.onlyWithMe=K(!1),this.trimPast=K(!0),this.membersCount=K(1),this.ResultFiltersLocalize=_t}ngOnInit(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=R({type:t,selectors:[["app-result-filters"]],inputs:{disabled:"disabled",maxMembers:"maxMembers",maxOverlap:"maxOverlap"},decls:38,vars:40,consts:[["mode","ios"],["value","filters","toggleIcon","remove-outline"],["slot","header",1,"header-item"],["slot","content","mode","ios"],[3,"ngModelChange","ngModel"],["color","warning"],["color","success"],["lines","none"],["lines","none",1,"range-list-item"],[3,"ngModelChange","ngModel","snaps","min","max","ticks"]],template:function(i,s){i&1&&(g(0,"ion-accordion-group",0)(1,"ion-accordion",1)(2,"ion-item",2)(3,"ion-label"),f(4),d(5,"localize"),v()(),g(6,"ion-list",3)(7,"ion-item")(8,"ion-checkbox",4),h0("ngModelChange",function(l){return c0(s.noMaybe,l)||(s.noMaybe=l),l}),f(9),d(10,"localize"),g(11,"ion-text",5),f(12),d(13,"localize"),v()()(),g(14,"ion-item")(15,"ion-checkbox",4),h0("ngModelChange",function(l){return c0(s.noTime,l)||(s.noTime=l),l}),f(16),d(17,"localize"),g(18,"ion-text",6),f(19),d(20,"localize"),v()()(),g(21,"ion-item")(22,"ion-checkbox",4),h0("ngModelChange",function(l){return c0(s.onlyWithMe,l)||(s.onlyWithMe=l),l}),f(23),d(24,"localize"),v()(),g(25,"ion-item")(26,"ion-checkbox",4),h0("ngModelChange",function(l){return c0(s.trimPast,l)||(s.trimPast=l),l}),f(27),d(28,"localize"),v()(),g(29,"ion-item",7)(30,"ion-label"),f(31),d(32,"localize"),v(),g(33,"ion-note"),f(34),d(35,"localizeMany"),v()(),g(36,"ion-item",8)(37,"ion-range",9),h0("ngModelChange",function(l){return c0(s.membersCount,l)||(s.membersCount=l),l}),v()()()()()),i&2&&(L1("disabled",s.disabled),h(4),k(" ",w(5,21,s.ResultFiltersLocalize.FilterResults)," "),h(4),r0("ngModel",s.noMaybe),h(),k(" ",w(10,23,s.ResultFiltersLocalize.Exclude)," "),h(3),k(" ",w(13,25,s.ResultFiltersLocalize.Maybe)," "),h(3),r0("ngModel",s.noTime),h(),k(" ",w(17,27,s.ResultFiltersLocalize.Exclude)," "),h(3),k(" ",w(20,29,s.ResultFiltersLocalize.Time)," "),h(3),r0("ngModel",s.onlyWithMe),h(),k(" ",w(24,31,s.ResultFiltersLocalize.OnlyWithMe)," "),h(3),r0("ngModel",s.trimPast),h(),k(" ",w(28,33,s.ResultFiltersLocalize.IgnorePastDates)," "),h(4),k(" ",w(32,35,s.ResultFiltersLocalize.AtLeast)," "),h(3),H1(" ",s.membersCount()," ",c1(35,37,s.ResultFiltersLocalize.Member,s.membersCount())," "),h(3),r0("ngModel",s.membersCount),u("snaps",!0)("min",1)("max",s.maxMembers)("ticks",s.maxMembers<=10))},dependencies:[p1,a1,Z1,E1,z0,P2,Z,C0,j2,T2,I2,r6,E2,K0,O2],styles:[".disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}ion-accordion[_ngcontent-%COMP%]{background:var(--ion-color-light, #f4f5f8);border-radius:.5rem;--padding-end: 0}.header-item[_ngcontent-%COMP%]{--inner-padding-end: .9rem}ion-list[_ngcontent-%COMP%]{background:var(--ion-color-light, #f4f5f8)}ion-item[_ngcontent-%COMP%]{--background: transparent}ion-item[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{opacity:.85}ion-item[_ngcontent-%COMP%]   ion-range[_ngcontent-%COMP%]{--knob-size: 22px}ion-item.range-list-item[_ngcontent-%COMP%]{margin-top:-.65rem;--padding-start: 1px;--inner-padding-end: .2rem}"]});let n=t;return n})();var bt=(()=>{let t=class t{constructor(){this.popover=p(G0),this.destroyed$=new U}ngOnInit(){this.popover.willPresent.pipe($0(o=>!!o.target),D(o=>A1(o.target,"contextmenu")),U1(this.destroyed$)).subscribe(o=>o.preventDefault())}ngOnDestroy(){this.destroyed$.next(void 0),this.destroyed$.complete()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=g1({type:t,selectors:[["","appPreventContext",""]]});let n=t;return n})();var E=function(n){return n.Ready="ready",n.Maybe="maybe",n.Time="time",n}(E||{});var Ot=r2(d2());var L0=(()=>{let t=class t{set voteDates(o){let i=(0,Ot.groupBy)(o,"voteType"),s=i[E.Ready]??[],a=i[E.Maybe]??[],l=i[E.Time]??[];this.readyDates.set(new Set(s.map(r=>this.formatVoteDate(r.date)))),this.maybeDates.set(new Set(a.map(r=>this.formatVoteDate(r.date)))),this.timeDates.set(new Map(l.map(r=>[this.formatVoteDate(r.date),r])))}get voteDates(){return this.voteDatesSignal()}get rootEl(){return this.elRef.nativeElement.shadowRoot}constructor(){this.readyDates=K(new Set),this.maybeDates=K(new Set),this.timeDates=K(new Map),this.voteDatesSignal=X(()=>{let o=this.readyDates(),i=this.maybeDates(),s=this.timeDates();return[...Array.from(o).map(a=>({date:new Date(a),voteType:E.Ready})),...Array.from(i).map(a=>({date:new Date(a),voteType:E.Maybe})),...Array.from(s.values())]}),this.ionDateComponent=p(t0),this.elRef=p(u0),this.rootObs=new MutationObserver(()=>{let o=this.rootEl.querySelectorAll("button.calendar-day");this.dateButtons$.next(Array.from(o))}),this.dateButtons$=new S2(1),A2(()=>{let o=this.readyDates(),i=this.maybeDates(),s=this.timeDates();this.ionDateComponent.highlightedDates=[...Array.from(o).map(a=>({date:a,textColor:"var(--ready-text-color)",backgroundColor:"var(--ready-bg-color)"})),...Array.from(i).map(a=>({date:a,textColor:"var(--maybe-text-color)",backgroundColor:"var(--maybe-bg-color)"})),...Array.from(s.keys()).map(a=>({date:a,textColor:"var(--time-text-color)",backgroundColor:"var(--time-bg-color)"}))]})}ngAfterViewInit(){this.rootObs.observe(this.rootEl,{childList:!0,subtree:!0})}ngOnDestroy(){this.dateButtons$.complete(),this.rootObs.disconnect()}emitAllDatesSignals(){this.readyDates.set(new Set(this.readyDates())),this.maybeDates.set(new Set(this.maybeDates())),this.timeDates.set(new Map(this.timeDates()))}formatVoteDate(o){return v1(o,"yyyy-MM-dd")}getDataFromButton(o){let i=Number(o.getAttribute("data-day")),s=Number(o.getAttribute("data-month")),a=Number(o.getAttribute("data-year"));return{day:i,month:s,year:a}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=g1({type:t,selectors:[["","appVoteData",""]],inputs:{voteDates:"voteDates"},exportAs:["appVoteData"]});let n=t;return n})();var Et=(()=>{let t=class t{constructor(){this.timeModalActionChange=new c2,this.timeModalCancelChange=new c2,this.data=p(L0)}get currentSet(){switch(this.appVoteHandleClick){case E.Ready:return this.data.readyDates();case E.Maybe:return this.data.maybeDates();case E.Time:return this.data.timeDates()}}ngAfterViewInit(){this.data.dateButtons$.pipe(D(o=>{let i=o.map(s=>A1(s,"click",{capture:!0}).pipe($(a=>a.stopPropagation()),F(()=>s)));return u1(...i)})).subscribe(o=>this.handleClick(o))}handleClick(o){return u4(this,null,function*(){let{day:i,month:s,year:a}=this.data.getDataFromButton(o),l=this.data.formatVoteDate(new Date(a,s-1,i));this.currentSet.has(l)?this.currentSet.delete(l):(this.data.readyDates().delete(l),this.data.maybeDates().delete(l),this.data.timeDates().delete(l),yield this.addDateToSet(o,l,a,s,i)),this.data.emitAllDatesSignals()})}addDateToSet(o,i,s,a,l){return u4(this,null,function*(){switch(this.appVoteHandleClick){case E.Ready:this.data.readyDates().add(i);break;case E.Maybe:this.data.maybeDates().add(i);break;case E.Time:o.style.opacity="0.7";let c=yield new Promise(C=>{this.timeModalCancelChange.emit(()=>C(void 0)),this.timeModalActionChange.emit(C)});if(o.style.opacity="",!c)return;let m=new Date(c.start),x=new Date(c.end);m.setFullYear(s,a-1,l),x.setFullYear(s,a-1,l);let O={date:new Date(i),voteType:E.Time,start:m,end:x};this.data.timeDates().set(i,O);break}})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=g1({type:t,selectors:[["","appVoteHandleClick",""]],inputs:{appVoteHandleClick:"appVoteHandleClick"},outputs:{timeModalActionChange:"timeModalActionChange",timeModalCancelChange:"timeModalCancelChange"}});let n=t;return n})();var Tt=(n,t=500)=>{let e=A1(n,"touchstart"),o=A1(n,"touchend"),i=A1(n,"touchmove");return e.pipe(D(s=>v3(t).pipe(F(()=>s),U1(u1(o,i)))))};var _0=class{static toJsDates(t){let e=V1(i1({},t),{date:new Date(t.date),start:t.start?new Date(t.start):void 0,end:t.end?new Date(t.end):void 0});return t.start===void 0&&delete e.start,t.end===void 0&&delete e.end,e}static toStringDates(t){return V1(i1({},t),{date:v1(t.date,"yyyy-MM-dd"),start:t.start?v1(t.start,"yyyy-MM-dd'T'HH:mm:ss"):void 0,end:t.end?v1(t.end,"yyyy-MM-dd'T'HH:mm:ss"):void 0})}};var jt=(()=>{let t=class t{constructor(){this.data=p(L0),this.lastFocusedButton$=new U,this.focusedDateChanges=this.lastFocusedButton$.pipe(F(o=>{if(!o)return;let{day:i,month:s,year:a}=this.data.getDataFromButton(o),l=new Date(a,s-1,i),r=this.data.formatVoteDate(l);return this.data.readyDates().has(r)?{date:l,voteType:E.Ready}:this.data.maybeDates().has(r)?{date:l,voteType:E.Maybe}:this.data.timeDates().get(r)}))}ngAfterViewInit(){this.data.dateButtons$.pipe(D(o=>{let i=o.map(s=>{let a=A1(s,"contextmenu"),l=Tt(s);return u1(a,l).pipe($(r=>r.preventDefault()),F(r=>V1(i1({},r),{target:s})),u3(500))});return u1(...i)})).subscribe(o=>this.showPopover(o))}showPopover(o){let i=o.target;this.lastFocusedButton$.next(i),this.appVoteHandlePopover.present(o),this.appVoteHandlePopover.willPresent.pipe(a0(1)).subscribe(()=>i.style.opacity="0.7"),this.appVoteHandlePopover.didDismiss.pipe(a0(1)).subscribe(s=>{if(this.lastFocusedButton$.next(void 0),i.style.opacity="",s.detail.data){let{day:a,month:l,year:r}=this.data.getDataFromButton(i);this.handlePopoverButtons(s.detail.data,r,l,a)}})}handlePopoverButtons(o,i,s,a){let l=new Date(i,s-1,a),r=this.data.formatVoteDate(l);if((o.clear||!o.ready&&!o.maybe&&!o.time)&&(this.data.readyDates().delete(r),this.data.maybeDates().delete(r),this.data.timeDates().delete(r)),o.ready)this.data.readyDates().add(r);else if(o.maybe)this.data.maybeDates().add(r);else if(o.time){let c=new Date(o.start),m=new Date(o.end);c.setFullYear(i,s-1,a),m.setFullYear(i,s-1,a);let x={date:l,voteType:E.Time,start:c,end:m};this.data.timeDates().set(r,x)}this.data.emitAllDatesSignals()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=g1({type:t,selectors:[["","appVoteHandlePopover",""]],inputs:{appVoteHandlePopover:"appVoteHandlePopover"},outputs:{focusedDateChanges:"focusedDateChanges"}});let n=t;return n})();var t3={Ready:{en:"Ready",ru:"\u0413\u043E\u0442\u043E\u0432"},Maybe:{en:"Maybe",ru:"\u0412\u043E\u0437\u043C\u043E\u0436\u043D\u043E"},Time:{en:"Time",ru:"\u0412\u0440\u0435\u043C\u044F"},ToggleStatus:{en:"Toggle default status",ru:"\u041F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0430\u0439\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441 \u043F\u043E-\u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E"},Or:{en:"Or",ru:"\u0418\u043B\u0438"},HoldDate:{en:"hold date",ru:"\u0443\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0439\u0442\u0435 \u0434\u0430\u0442\u0443"},RightClickDate:{en:"right click on date",ru:"\u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u043F\u0440\u0430\u0432\u043E\u0439 \u043A\u043D\u043E\u043F\u043A\u043E\u0439 \u043C\u044B\u0448\u0438 \u043F\u043E \u0434\u0430\u0442\u0435"},SelectSpecificStatus:{en:"to select specific one",ru:"\u0434\u043B\u044F \u0442\u043E\u0447\u043D\u043E\u0433\u043E \u0432\u044B\u0431\u043E\u0440\u0430"},Clear:{en:"Clear",ru:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C"},Cancel:{en:"Cancel",ru:"\u041E\u0442\u043C\u0435\u043D\u0430"},Save:{en:"Save",ru:"\u0413\u043E\u0442\u043E\u0432\u043E"},StartTime:{en:"Start time",ru:"\u0412\u0440\u0435\u043C\u044F \u043D\u0430\u0447\u0430\u043B\u0430"},EndTime:{en:"End time",ru:"\u0412\u0440\u0435\u043C\u044F \u043E\u043A\u043E\u043D\u0447\u0430\u043D\u0438\u044F"},SpecifyTime:{en:"Specify time",ru:"\u0423\u043A\u0430\u0437\u0430\u0442\u044C \u0432\u0440\u0435\u043C\u044F"},HasBeenSaved:{en:"All changes have been saved successfully",ru:"\u0412\u0441\u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B"}};var Dt=(()=>{let t=class t{constructor(){this.baseUrl="votes",this.http=p(M0)}getEventVote(o){let i={eventId:o};return this.http.get(this.baseUrl,{params:i}).pipe(F(s=>{let a=s.dates.map(l=>_0.toJsDates(l));return V1(i1({},s),{dates:a})}))}updateEventVote(o,i){let a={dates:i.map(r=>_0.toStringDates(r))},l={eventId:o};return this.http.post(this.baseUrl,a,{params:l}).pipe(F(r=>{let c=r.dates.map(m=>_0.toJsDates(m));return V1(i1({},r),{dates:c})}))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=n1({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Pt=r2(d2());var Ue=()=>[],We=()=>[0,1];function Qe(n,t){if(n&1){let e=N();g(0,"ion-button",30),V("click",function(){L(e),M(2);let i=q(47);return _(i.dismiss({clear:!0}))}),y(1,"ion-icon",31),v()}}function Ke(n,t){if(n&1){let e=N();g(0,"div",22)(1,"ion-button",23),V("click",function(){L(e),M();let i=q(47);return _(i.dismiss({ready:!0}))}),y(2,"ion-icon",24),v(),g(3,"ion-button",25),V("click",function(){L(e),M();let i=q(47);return _(i.dismiss({maybe:!0}))}),y(4,"ion-icon",26),v(),g(5,"ion-button",27),V("click",function(){L(e);let i=M(),s=q(47);return _(i.timeModalAction.set(s.dismiss.bind(s)))}),y(6,"ion-icon",28),v(),s1(7,Qe,2,0,"ion-button",29),v()}if(n&2){let e=M();h(7),u("ngIf",e.focusedDate!==void 0)}}function Ge(n,t){if(n&1){let e=N();g(0,"div",32)(1,"div",33)(2,"div",34)(3,"ion-label"),f(4),d(5,"localize"),v(),g(6,"ion-datetime",35),h0("ngModelChange",function(i){L(e);let s=M();return c0(s.startTime,i)||(s.startTime=i),_(i)}),v()(),g(7,"div",34)(8,"ion-label"),f(9),d(10,"localize"),v(),g(11,"ion-datetime",35),h0("ngModelChange",function(i){L(e);let s=M();return c0(s.endTime,i)||(s.endTime=i),_(i)}),v()()(),g(12,"ion-button",36),V("click",function(){L(e);let i=M(),s=q(51);return _(i.onTimeSelected(s))}),f(13),d(14,"localize"),v()()}if(n&2){let e=M();h(4),k(" ",w(5,6,e.VoteCalendarLocalize.StartTime)," "),h(2),r0("ngModel",e.startTime),h(3),k(" ",w(10,8,e.VoteCalendarLocalize.EndTime)," "),h(2),r0("ngModel",e.endTime),h(),u("disabled",e.isTimeInvalid()),h(),k(" ",w(14,10,e.VoteCalendarLocalize.SpecifyTime)," ")}}var g4="yyyy-MM-dd'T'HH:mm:ss",v4=(()=>{let t=class t{constructor(){this.appVoteData=Y1(L0),this.voteDatesFromCalendar=X(()=>this.appVoteData()?.voteDatesSignal()),this.eventId=P.required(),this.minDate=P(),this.maxDate=P(),this.daysOfWeek=P(),this.voteUpdated=v2(),this.isDateEnabled=X(()=>{let o=new Set(this.daysOfWeek());return i=>{if(o.size===0)return!0;let s=new Date(i);return o.has(R2(s))}}),this.resetDates$=new U,this.clearDates$=new U,this.saveDates$=new U,this.request=p(Dt),this.featureLoad=p(B0,{optional:!0}),this.loadedEventVote$=F1(this.eventId).pipe($(()=>this.featureLoad?.incrLoading()),D(o=>this.request.getEventVote(o).pipe(l0(()=>this.featureLoad?.decrLoading()))),B1(1)),this.updatedEventVote$=this.saveDates$.pipe(F(()=>this.voteDatesFromCalendar()??[]),$(()=>this.featureLoad?.incrLoading()),D(o=>this.request.updateEventVote(this.eventId(),o).pipe(l0(()=>this.featureLoad?.decrLoading()))),$(o=>this.voteUpdated.emit(o)),$(()=>{let o=this.loc.localizeSync(t3.HasBeenSaved);this.toast.info(o,"cloud-done-outline")}),B1(1)),this.stagedVoteDates$=u1(this.loadedEventVote$,this.updatedEventVote$).pipe(F(o=>o.dates),B1(1)),this.voteDates$=u1(this.clearDates$.pipe(F(()=>[])),this.resetDates$.pipe(I1(!0),D(()=>this.stagedVoteDates$),F(o=>o.slice()))),this.startTime=K(v1(new Date,g4)),this.endTime=K(v1(new Date,g4)),this.lastAppliedStartTime=this.startTime(),this.lastAppliedEndTime=this.endTime(),this.isTimeInvalid=X(()=>{let o=new Date(this.startTime()),i=new Date(this.endTime());return o>=i}),this.focusedDate=void 0,this.timeModalAction=K(void 0),this.timeModalCancel=K(void 0),this.toast=p(e0),this.tools=p(Z0),this.isTouchDevice=this.tools.isTouchDevice,this.VoteType=E,this.defaultVoteType=E.Ready,this.loc=p(d1),this.localizeFormat$=this.loc.localizationWithFormat$,this.VoteCalendarLocalize=t3,this.noUnsavedChanges=F1(this.voteDatesFromCalendar).pipe(x3(this.stagedVoteDates$),F(([o,i])=>(0,Pt.isEqual)(o,i)),w0(),B1(1))}updateFocusedDate(o){this.focusedDate=o;let i=o?.start?v1(o.start,g4):this.lastAppliedStartTime,s=o?.end?v1(o.end,g4):this.lastAppliedEndTime;this.startTime.set(i),this.endTime.set(s)}onTimeSelected(o){this.lastAppliedStartTime=this.startTime(),this.lastAppliedEndTime=this.endTime();let i=this.timeModalAction();i&&(i({time:!0,start:this.startTime(),end:this.endTime()}),this.timeModalAction.set(void 0),this.timeModalCancel.set(void 0)),o.dismiss()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=R({type:t,selectors:[["app-vote-calendar"]],viewQuery:function(i,s){i&1&&G1(s.appVoteData,L0,5),i&2&&x0()},inputs:{eventId:[1,"eventId"],minDate:[1,"minDate"],maxDate:[1,"maxDate"],daysOfWeek:[1,"daysOfWeek"]},outputs:{voteUpdated:"voteUpdated",noUnsavedChanges:"noUnsavedChanges"},decls:53,vars:59,consts:[["popover",""],["timeModal",""],[1,"vote-calendar"],[1,"vote-calendar-header"],[1,"chips"],[1,"chip-container","brighter",3,"click"],["color","primary"],["name","checkmark-outline"],[1,"chip-container",3,"click"],["color","warning"],["name","help-outline"],["color","success"],["name","time-outline"],[1,"subtitle"],["appVoteData","","presentation","date","mode","ios",1,"wtd-datetime",3,"focusedDateChanges","timeModalActionChange","timeModalCancelChange","appVoteHandleClick","appVoteHandlePopover","voteDates","firstDayOfWeek","min","max","isDateEnabled","locale"],["mode","ios",1,"vote-calendar-actions"],["color","medium",3,"click"],[1,"right"],["color","danger",3,"click","disabled"],["color","primary",3,"click","disabled"],["appPreventContext","","mode","ios","side","top","alignment","center",3,"arrow"],[3,"ionModalWillDismiss","initialBreakpoint","breakpoints","isOpen"],[1,"popover-content"],["size","small","color","primary",3,"click"],["name","checkmark-outline","slot","icon-only"],["size","small","color","warning",3,"click"],["name","help-outline","slot","icon-only"],["size","small","color","success",3,"click"],["name","time-outline","slot","icon-only"],["size","small","color","light",3,"click",4,"ngIf"],["size","small","color","light",3,"click"],["name","ban-outline","slot","icon-only"],[1,"time-modal-content"],[1,"time-pickers"],[1,"pick"],["presentation","time","mode","ios",3,"ngModelChange","ngModel"],["mode","ios",3,"click","disabled"]],template:function(i,s){if(i&1){let a=N();g(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),V("click",function(){return L(a),_(s.defaultVoteType=s.VoteType.Ready)}),g(4,"ion-chip",6),y(5,"ion-icon",7),g(6,"ion-label"),f(7),d(8,"localize"),v()()(),g(9,"div",8),V("click",function(){return L(a),_(s.defaultVoteType=s.VoteType.Maybe)}),g(10,"ion-chip",9),y(11,"ion-icon",10),g(12,"ion-label"),f(13),d(14,"localize"),v()()(),g(15,"div",8),V("click",function(){return L(a),_(s.defaultVoteType=s.VoteType.Time)}),g(16,"ion-chip",11),y(17,"ion-icon",12),g(18,"ion-label"),f(19),d(20,"localize"),v()()()(),g(21,"span",13),f(22),d(23,"localize"),y(24,"br"),f(25),d(26,"localize"),d(27,"localize"),d(28,"localize"),y(29,"br"),v()(),g(30,"ion-datetime",14),d(31,"async"),d(32,"async"),V("focusedDateChanges",function(r){return L(a),_(s.updateFocusedDate(r))})("timeModalActionChange",function(r){return L(a),_(s.timeModalAction.set(r))})("timeModalCancelChange",function(r){return L(a),_(s.timeModalCancel.set(r))}),v(),g(33,"ion-buttons",15),f1(34),d(35,"async"),g(36,"ion-button",16),V("click",function(){return L(a),_(s.clearDates$.next(!0))}),f(37),d(38,"localize"),v(),g(39,"div",17)(40,"ion-button",18),V("click",function(){return L(a),_(s.resetDates$.next(!0))}),f(41),d(42,"localize"),v(),g(43,"ion-button",19),V("click",function(){return L(a),_(s.saveDates$.next(!0))}),f(44),d(45,"localize"),v()()()(),g(46,"ion-popover",20,0),s1(48,Ke,8,1,"ng-template"),v(),f1(49),g(50,"ion-modal",21,1),V("ionModalWillDismiss",function(){L(a);let r=r1(49);return r==null||r(),_(s.timeModalAction.set(void 0))}),s1(52,Ge,15,12,"ng-template"),v()}if(i&2){let a=q(47);h(3),L1("active",s.defaultVoteType===s.VoteType.Ready),h(4),k(" ",w(8,30,s.VoteCalendarLocalize.Ready)," "),h(2),L1("active",s.defaultVoteType===s.VoteType.Maybe),h(4),k(" ",w(14,32,s.VoteCalendarLocalize.Maybe)," "),h(2),L1("active",s.defaultVoteType===s.VoteType.Time),h(4),k(" ",w(20,34,s.VoteCalendarLocalize.Time)," "),h(3),k(" ",w(23,36,s.VoteCalendarLocalize.ToggleStatus)," "),h(3),A3(" ",w(26,38,s.VoteCalendarLocalize.Or)," ",w(27,40,s.isTouchDevice?s.VoteCalendarLocalize.HoldDate:s.VoteCalendarLocalize.RightClickDate)," ",w(28,42,s.VoteCalendarLocalize.SelectSpecificStatus)," "),h(5),u("appVoteHandleClick",s.defaultVoteType)("appVoteHandlePopover",a)("voteDates",w(31,44,s.voteDates$)??M1(57,Ue))("firstDayOfWeek",1)("min",s.minDate()??void 0)("max",s.maxDate()??void 0)("isDateEnabled",s.isDateEnabled())("locale",w(32,46,s.localizeFormat$));let l=w(35,48,s.noUnsavedChanges);h(7),k(" ",w(38,50,s.VoteCalendarLocalize.Clear)," "),h(3),u("disabled",l),h(),k(" ",w(42,52,s.VoteCalendarLocalize.Cancel)," "),h(2),u("disabled",l),h(),k(" ",w(45,54,s.VoteCalendarLocalize.Save)," "),h(2),u("arrow",!0);let r=s.timeModalAction();h(3),b1(s.timeModalCancel()),h(),u("initialBreakpoint",1)("breakpoints",M1(58,We))("isOpen",r!==void 0)}},dependencies:[p1,f0,a1,O1,J3,J,k1,Z,t0,D2,G0,J1,E2,K0,O2,L0,Et,jt,bt],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;height:100%;min-width:350px;align-self:center}.vote-calendar-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;background-color:var(--ion-color-light, #f4f5f8);padding:.5rem .5rem .25rem;border-top-left-radius:.5rem;border-top-right-radius:.5rem}.vote-calendar-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{padding:.25rem .5rem .825rem;opacity:.8;color:var(--ion-text-color-step-500, #b3b3b3);font-size:.9rem;line-height:1.25rem}.vote-calendar-header[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]{display:flex;padding:0 .2rem;justify-content:space-between;gap:.5rem}.vote-calendar-header[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   .chip-container.active[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{background:rgba(var(--ion-color-base-rgb, 0, 0, 0),.215)!important;outline:2px solid rgba(var(--ion-color-base-rgb, 0, 0, 0),.215);outline-offset:2px}.vote-calendar-header[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   .chip-container.active.brighter[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{color:var(--ion-color-base);background:rgba(var(--ion-color-base-rgb, 0, 0, 0),.27)!important;outline-color:rgba(var(--ion-color-base-rgb, 0, 0, 0),.27)}.vote-calendar-header[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   .chip-container[_ngcontent-%COMP%]:not(.active):not(.brighter){opacity:.85}.vote-calendar-actions[_ngcontent-%COMP%]{padding:.5rem .75rem;background-color:var(--ion-color-light, #f4f5f8);justify-content:space-between;border-bottom-left-radius:.5rem;border-bottom-right-radius:.5rem;gap:1rem}.vote-calendar-actions[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;gap:.5rem}ion-datetime[_ngcontent-%COMP%]{border-radius:0}ion-popover[_ngcontent-%COMP%]{--offset-y: -.15rem;--width: auto}.popover-content[_ngcontent-%COMP%]{padding:.5rem;width:100%;display:flex;justify-content:space-between;gap:5px;opacity:.9}ion-modal[_ngcontent-%COMP%]{--height: auto}.time-modal-content[_ngcontent-%COMP%]{padding:1.5rem;display:flex;flex-direction:column;gap:1rem}.time-modal-content[_ngcontent-%COMP%]   .time-pickers[_ngcontent-%COMP%]{display:flex;gap:1rem}.time-modal-content[_ngcontent-%COMP%]   .time-pickers[_ngcontent-%COMP%]   .pick[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;align-items:center;gap:1rem}.time-modal-content[_ngcontent-%COMP%]   .time-pickers[_ngcontent-%COMP%]   .pick[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%]{width:100%;border-radius:1rem}"],changeDetection:0});let n=t;return n})();var d0=function(n){return n.List="list",n.Calendar="calendar",n}(d0||{});var It=(()=>{let t=class t{constructor(){this.disabled=!1,this.ViewPick=d0,this.value=K(d0.List),this.refresh=new c2}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=R({type:t,selectors:[["app-result-view-picker-control"]],inputs:{disabled:"disabled"},outputs:{refresh:"refresh"},decls:7,vars:3,consts:[[1,"picker",3,"ngClass"],[1,"item",3,"click"],["name","list-outline"],["name","calendar-outline"],[3,"click"],["slot","icon-only","name","refresh-outline"]],template:function(i,s){i&1&&(g(0,"div",0)(1,"div",1),V("click",function(){return s.value.set(s.ViewPick.List)}),y(2,"ion-icon",2),v(),g(3,"div",1),V("click",function(){return s.value.set(s.ViewPick.Calendar)}),y(4,"ion-icon",3),v()(),g(5,"ion-button",4),V("click",function(){return s.refresh.emit()}),y(6,"ion-icon",5),v()),i&2&&(L1("disabled",s.disabled),u("ngClass",s.value()))},dependencies:[p1,H3,O1,J],styles:['[_nghost-%COMP%]{display:flex;justify-content:space-between;align-items:center}.picker[_ngcontent-%COMP%]{position:relative;display:flex;border-radius:.5rem;background-color:var(--ion-color-light, #f4f5f8);--border-size: 2px}.picker.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.picker[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{z-index:2;padding:.8rem 1.25rem;display:flex;align-items:center;cursor:pointer}.picker[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:hover{opacity:.7}.picker[_ngcontent-%COMP%]:after{content:"";transition:left .2s ease-in-out;z-index:1;position:absolute;top:var(--border-size);bottom:var(--border-size);width:calc(50% - var(--border-size) * 2);box-shadow:var(--picker-box-shadow);background-color:var(--ion-background-color-step-350, #fff);border-radius:.5rem}.picker.list[_ngcontent-%COMP%]:after{left:var(--border-size)!important}.picker.calendar[_ngcontent-%COMP%]:after{left:calc(50% + var(--border-size))!important}ion-button[_ngcontent-%COMP%]{margin:0;--border-radius: .5rem;--padding-bottom: .75rem;--padding-end: .75rem;--padding-start: .75rem;--padding-top: .75rem}']});let n=t;return n})();var Ye=["*"],Xe=(n,t)=>({value:n,params:t}),Ft="0.4s ease-in-out",Je={transform:"translateX(0)"},Ze={transform:"translateX({{ leaveEnd }}%)"},t5={transform:"translateX({{ enterStart }}%)"},Rt=(()=>{let t=class t{constructor(){this.viewPick=P.required(),this.animationDisabled=K(!0),this.animationParams=X(()=>{switch(this.viewPick()){case d0.List:return{leaveEnd:120,enterStart:-120};case d0.Calendar:return{leaveEnd:-120,enterStart:120};default:return{}}}),C3(()=>{this.animationDisabled()&&this.animationDisabled.set(!1)})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=R({type:t,selectors:[["app-result-view-picker-container"]],inputs:{viewPick:[1,"viewPick"]},ngContentSelectors:Ye,decls:2,vars:5,consts:[[1,"result-view-picker-container-animated"]],template:function(i,s){i&1&&(B3(),g(0,"div",0),L3(1),v()),i&2&&u("@.disabled",s.animationDisabled())("@openCloseResultView",h2(2,Xe,s.viewPick(),s.animationParams()))},styles:[".result-view-picker-container-animated[_ngcontent-%COMP%]{display:grid;overflow:hidden;place-items:start}  .result-view-picker-container-animated>*{display:block;grid-column:1;grid-row:1;width:100%}"],data:{animation:[p2("openCloseResultView",[t2("* => *",[y4([m2(":enter",j1(t5)),m2(":leave",[T0(Ft,j1(Ze))],{optional:!0}),m2(":enter",[T0(Ft),j1(Je)])])],{params:{leaveEnd:-120,enterStart:120}})])]},changeDetection:0});let n=t;return n})();var Nt=(()=>{let t=class t{constructor(){this.baseUrl="results",this.http=p(M0)}getEventResults(o){let i={eventId:o};return this.http.get(this.baseUrl,{params:i}).pipe(F(s=>{let a=s.dates.map(l=>_0.toJsDates(l));return V1(i1({},s),{dates:a})}))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=n1({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var e5=F2(new Date),s0=(()=>{let t=class t{constructor(){this.eventId=P.required(),this.min=P.required(),this.noMaybe=P.required(),this.noTime=P.required(),this.onlyWithMe=P.required(),this.trimPast=P.required(),this.request=p(Nt),this.featureLoad=p(B0,{optional:!0}),this.refresh$=new U,this.eventid$=F1(this.eventId),this.info$=this.refresh$.pipe(I1(!0),D(()=>this.eventid$),$(()=>this.featureLoad?.incrLoading()),D(o=>this.request.getEventResults(o).pipe(l0(()=>this.featureLoad?.decrLoading()))),B1(1)),this.info=y0(this.info$),this.dates=X(()=>this.info()?.dates??[]),this.filteredDates=X(()=>this.dates().filter(o=>o.users.length>=this.min()&&(!this.trimPast()||o.date>=e5)&&(!this.noMaybe()||o.voteType!==E.Maybe)&&(!this.noTime()||o.voteType!==E.Time)&&(!this.onlyWithMe()||o.isWithMe))),this.filteredDatesMap=X(()=>{let o=this.filteredDates();return new Map(o.map(i=>[this.formatVoteDate(i.date),i]))})}refresh(){this.refresh$.next(!0)}formatVoteDate(o){return v1(o,"yyyy-MM-dd")}getVoteDate(o){let i=this.formatVoteDate(o);return this.filteredDatesMap().get(i)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=g1({type:t,selectors:[["","appResultView",""]],inputs:{eventId:[1,"eventId"],min:[1,"min"],noMaybe:[1,"noMaybe"],noTime:[1,"noTime"],onlyWithMe:[1,"onlyWithMe"],trimPast:[1,"trimPast"]},exportAs:["appResultView"]});let n=t;return n})();var $t=r2(d2());var V0=class{static getColorByType(t){switch(t){case E.Ready:return"primary";case E.Maybe:return"warning";case E.Time:return"success"}}static getIconByType(t){switch(t){case E.Ready:return"checkmark-outline";case E.Maybe:return"help-outline";case E.Time:return"time-outline"}}};var l2={Member:{en:"member",ru:"\u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A"},NoData:{en:"No data, try to change filters",ru:"\u041F\u0443\u0441\u0442\u043E, \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0434\u0440\u0443\u0433\u0438\u0435 \u0444\u0438\u043B\u044C\u0442\u0440\u044B"},NoTimeOverlap:{en:"No time overlap",ru:"\u041D\u0435\u0442 \u043E\u0431\u0449\u0435\u0433\u043E \u0432\u0440\u0435\u043C\u0435\u043D\u0438"}};var o5=()=>[0,1];function i5(n,t){if(n&1&&(_2(0),g(1,"h3"),f(2),d(3,"date"),v(),V2()),n&2){let e=t.ngIf,o=M(3);h(2),k(" ",W0(3,1,o.resultDate.date,e.dateFormat,void 0,e.localize)," ")}}function n5(n,t){if(n&1&&(g(0,"ion-chip",6),y(1,"ion-icon",9),g(2,"ion-label"),f(3),d(4,"localize"),v()()),n&2){let e=M(3);h(3),k(" ",w(4,1,e.ResultViewLocalize.NoTimeOverlap)," ")}}function s5(n,t){if(n&1&&(g(0,"ion-chip",7),y(1,"ion-icon",10),g(2,"ion-label"),f(3),d(4,"date"),d(5,"date"),v()()),n&2){let e=M(3);u("color",e.Helpers.getColorByType(e.resultDate.voteType)),h(),u("name",e.Helpers.getIconByType(e.resultDate.voteType)),h(2),H1(" ",e.resultDate.start?c1(4,4,e.resultDate.start,"HH:mm"):"00:00"," - ",e.resultDate.end?c1(5,7,e.resultDate.end,"HH:mm"):"23:59"," ")}}function a5(n,t){if(n&1&&(g(0,"ion-text",11),f(1),v()),n&2){let e=M().$implicit;h(),k(" ",e.username?"@"+e.username:e.fullName," ")}}function l5(n,t){if(n&1&&f(0),n&2){let e=M().$implicit;k(" ",e.fullName," ")}}function r5(n,t){if(n&1&&(g(0,"ion-label"),G(1,a5,2,1,"ion-text",11)(2,l5,1,1),v()),n&2){let e=t.$implicit,o=M(3);h(),Y(o.timeModeIndexes.has(e.index)?1:2)}}function c5(n,t){if(n&1&&(g(0,"ion-text",12),f(1),d(2,"date"),d(3,"date"),v()),n&2){let e=M().$implicit,o=M(3);u("color",o.Helpers.getColorByType(e.voteType)),h(),H1(" ",e.start?c1(2,3,e.start,"HH:mm"):"00:00"," - ",e.end?c1(3,6,e.end,"HH:mm"):"23:59"," ")}}function h5(n,t){if(n&1&&y(0,"ion-icon",13),n&2){let e=M().$implicit,o=M(3);u("color",o.Helpers.getColorByType(e.voteType))("icon",o.Helpers.getIconByType(e.voteType))}}function g5(n,t){if(n&1&&G(0,c5,4,9,"ion-text",12)(1,h5,1,2,"ion-icon",13),n&2){let e=t.$implicit,o=M(3);Y(o.timeModeIndexes.has(e.index)?0:1)}}function v5(n,t){if(n&1){let e=N();g(0,"div",4),s1(1,i5,4,6,"ng-container",5),d(2,"async"),G(3,n5,5,3,"ion-chip",6)(4,s5,6,10,"ion-chip",7),v(),g(5,"app-users-list",8),V("userClicked",function(i){L(e);let s=M(2);return _(s.toggleUserMode(i.user))})("searchFocused",function(i){L(e),M(2);let s=q(1);return _(s.backdropDismiss=!i)}),s1(6,r5,3,1,"ng-template",null,1,g2)(8,g5,2,1,"ng-template",null,2,g2),v()}if(n&2){let e=M(2);h(),u("ngIf",w(2,4,e.dateFormat$)),h(2),Y(e.resultDate.noTimeOverlap?3:4),h(2),u("users",e.resultDate.users)("clickable",!0)}}function d5(n,t){if(n&1&&G(0,v5,10,6),n&2){let e=M();Y(e.resultDate?0:-1)}}var d4=(()=>{let t=class t{constructor(){this.ionModal=Y1(J1),this.timeModeIndexes=new Set,this.Helpers=V0,this.localizeService=p(d1),this.ResultViewLocalize=l2,this.dateFormat$=this.localizeService.localizeLongDateFormat$}present(o){let i=this.ionModal();i&&(this.resultDate=o,o.users=o.users.map((s,a)=>V1(i1({},s),{index:a})),i.present())}clearData(){this.resultDate=void 0,this.timeModeIndexes=new Set}toggleUserMode(o){let i=o.index;this.timeModeIndexes.has(i)?this.timeModeIndexes.delete(i):this.timeModeIndexes.add(i)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=R({type:t,selectors:[["app-result-date-info-modal"]],viewQuery:function(i,s){i&1&&G1(s.ionModal,J1,5),i&2&&x0()},decls:3,vars:3,consts:[["modal",""],["altLabel",""],["end",""],[3,"ionModalDidDismiss","initialBreakpoint","breakpoints"],[1,"header"],[4,"ngIf"],["color","danger"],[1,"ion-activated",3,"color"],[3,"userClicked","searchFocused","users","clickable"],["name","alert-circle-outline"],[3,"name"],["color","medium"],[1,"user-time-info",3,"color"],[3,"color","icon"]],template:function(i,s){if(i&1){let a=N();g(0,"ion-modal",3,0),V("ionModalDidDismiss",function(){return L(a),_(s.clearData())}),s1(2,d5,1,1,"ng-template"),v()}i&2&&u("initialBreakpoint",1)("breakpoints",M1(2,o5))},dependencies:[p1,f0,a1,J,P2,k1,X1,Z,c4,J1,D2],styles:["ion-modal[_ngcontent-%COMP%]{--height: auto}ion-modal[_ngcontent-%COMP%]   app-users-list[_ngcontent-%COMP%]{height:52.25vh;padding:0 1rem 1rem}.header[_ngcontent-%COMP%]{padding:2rem 2rem .5rem;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;column-gap:.5rem;row-gap:.25rem}.header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.header[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{pointer-events:none;margin:0}.user-time-info[_ngcontent-%COMP%]{font-size:.85rem;margin-bottom:-1px}"]});let n=t;return n})();var qt=(()=>{let t=class t{get rootEl(){return this.elRef.nativeElement.shadowRoot}constructor(){this.data=p(s0),this.elRef=p(u0),this.rootObs=new MutationObserver(()=>{let o=this.rootEl.querySelectorAll("button.calendar-day");this.dateButtons$.next(Array.from(o))}),this.dateButtons$=new S2(1),this.voteDateSelected$=this.dateButtons$.pipe(D(o=>{let i=o.map(s=>A1(s,"click",{capture:!0}).pipe($(a=>a.stopPropagation()),F(()=>s)));return u1(...i)}),w0((o,i)=>!this.noActionsAfterReset&&o===i),F(o=>this.getDateSelectedEvent(o)),F(o=>o.voteDate?o:void 0),I1(void 0),m3(),$(([o,i])=>this.handleButtonStyles(o,i)),F(([o,i])=>i?.voteDate),$(()=>this.noActionsAfterReset=!1)),this.noActionsAfterReset=!0,this.dateSelected=u1(this.voteDateSelected$,this.getResetDateEvent(this.dateButtons$),this.getResetDateEvent(F1(this.data.filteredDates)))}ngAfterViewInit(){this.rootObs.observe(this.rootEl,{childList:!0,subtree:!0})}ngOnDestroy(){this.dateButtons$.complete(),this.rootObs.disconnect()}getResetDateEvent(o){return o.pipe($(()=>this.noActionsAfterReset=!0),F(()=>{}))}getDateSelectedEvent(o){let i=Number(o.getAttribute("data-day")),s=Number(o.getAttribute("data-month")),a=Number(o.getAttribute("data-year")),l=new Date(a,s-1,i);return{prevBgColor:o.style.backgroundColor,prevColor:o.style.color,voteDate:this.data.getVoteDate(l),buttonEl:o}}handleButtonStyles(o,i){if(o&&!this.noActionsAfterReset){let s=o.buttonEl;s.style.backgroundColor=`${o.prevBgColor} !important`,s.style.color=`${o.prevColor} !important`}if(i){let s=i.buttonEl;s.style.backgroundColor=`${s.style.color} !important`,s.style.color="var(--ion-color-contrast) !important"}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=g1({type:t,selectors:[["","appResultViewCalendarPicker",""]],outputs:{dateSelected:"dateSelected"}});let n=t;return n})();function p5(n,t){if(n&1){let e=N();g(0,"div",3)(1,"ion-item",4),V("click",function(){let i=L(e);M();let s=q(6);return _(s.present(i))}),y(2,"ion-icon",5),g(3,"ion-label"),f(4),d(5,"date"),v(),g(6,"ion-note",6),f(7),d(8,"localizeMany"),v()()()}if(n&2){let e=t,o=M();h(2),u("color",e.noTimeOverlap?"danger":o.Helpers.getColorByType(e.voteType))("name",o.Helpers.getIconByType(e.voteType)),h(2),k(" ",c1(5,5,e.date,"dd.MM.yyyy")," "),h(3),H1(" ",e.users.length," ",c1(8,8,o.ResultViewLocalize.Member,e.users.length)," ")}}var Ut=(()=>{let t=class t{constructor(){this.minDate=P(),this.maxDate=P(),this.daysOfWeek=P(),this.isDateEnabled=X(()=>{let o=new Set(this.daysOfWeek());return i=>{if(o.size===0)return!0;let s=new Date(i);return o.has(R2(s))}}),this.ionDateComponent=Y1(t0),this.data=p(s0),this.Helpers=V0,this.ResultViewLocalize=l2,this.selectedDate=K(void 0),this.localizeService=p(d1),this.localizeFormat$=this.localizeService.localizationWithFormat$,A2(()=>{let o=this.ionDateComponent(),i=this.data.filteredDates();if(o)if(i.length===0){o.highlightedDates=[];return}else{let s=(0,$t.groupBy)(i,"voteType"),a=s[E.Ready]??[],l=s[E.Maybe]??[],r=s[E.Time]??[];o.highlightedDates=[...a.map(c=>({date:this.data.formatVoteDate(c.date),textColor:"var(--ready-text-color) !important",backgroundColor:"var(--ready-bg-color) !important"})),...l.map(c=>({date:this.data.formatVoteDate(c.date),textColor:"var(--maybe-text-color) !important",backgroundColor:"var(--maybe-bg-color) !important"})),...r.map(c=>({date:this.data.formatVoteDate(c.date),textColor:"var(--time-text-color) !important",backgroundColor:"var(--time-bg-color) !important"}))]}else return})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=R({type:t,selectors:[["app-result-view-calendar"]],viewQuery:function(i,s){i&1&&G1(s.ionDateComponent,t0,5),i&2&&x0()},inputs:{minDate:[1,"minDate"],maxDate:[1,"maxDate"],daysOfWeek:[1,"daysOfWeek"]},decls:7,vars:8,consts:[["infoModal",""],[1,"calendar-header"],["appResultViewCalendarPicker","","presentation","date","mode","ios",1,"wtd-datetime",3,"dateSelected","firstDayOfWeek","min","max","isDateEnabled","locale"],[1,"calendar-footer"],["button","","lines","none",3,"click"],["slot","start",3,"color","name"],["slot","end"]],template:function(i,s){if(i&1){let a=N();g(0,"div"),y(1,"div",1),g(2,"ion-datetime",2),d(3,"async"),V("dateSelected",function(r){return L(a),_(s.selectedDate.set(r))}),v(),G(4,p5,9,11,"div",3),v(),y(5,"app-result-date-info-modal",null,0)}if(i&2){let a;h(2),u("firstDayOfWeek",1)("min",s.minDate()??void 0)("max",s.maxDate()??void 0)("isDateEnabled",s.isDateEnabled())("locale",w(3,6,s.localizeFormat$)),h(2),Y((a=s.selectedDate())?4:-1,a)}},dependencies:[p1,a1,J,E1,z0,k1,X1,C0,t0,d4,qt],styles:[".calendar-header[_ngcontent-%COMP%]{background-color:var(--ion-color-light, #f4f5f8);border-top-left-radius:.5rem;border-top-right-radius:.5rem;width:100%;height:.5rem}ion-datetime[_ngcontent-%COMP%]:last-child{border-bottom-left-radius:.5rem;border-bottom-right-radius:.5rem}.calendar-footer[_ngcontent-%COMP%]{background-color:var(--ion-color-light, #f4f5f8);border-bottom-left-radius:.5rem;border-bottom-right-radius:.5rem;padding-bottom:.25rem}.calendar-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent}"],changeDetection:0});let n=t;return n})();function m5(n,t){if(n&1){let e=N();g(0,"ion-item",4),V("click",function(){let i=L(e).$implicit;M();let s=q(5);return _(s.present(i))}),y(1,"ion-icon",5),g(2,"ion-label"),f(3),d(4,"date"),v(),g(5,"ion-note",6),f(6),d(7,"localizeMany"),v()()}if(n&2){let e=t.$implicit,o=t.$index,i=t.$count,s=M();u("lines",o===i-1?"none":""),h(),u("color",e.noTimeOverlap?"danger":s.Helpers.getColorByType(e.voteType))("name",s.Helpers.getIconByType(e.voteType)),h(2),k(" ",c1(4,6,e.date,"dd.MM.yyyy")," "),h(3),H1(" ",e.users.length," ",c1(7,9,s.ResultViewLocalize.Member,e.users.length)," ")}}function w5(n,t){if(n&1&&(g(0,"ion-item",3),y(1,"ion-icon",7),g(2,"ion-note",8),f(3),d(4,"localize"),v()()),n&2){let e=M();h(3),k(" ",w(4,1,e.ResultViewLocalize.NoData)," ")}}var Wt=(()=>{let t=class t{constructor(){this.data=p(s0),this.filteredDates=this.data.filteredDates,this.Helpers=V0,this.ResultViewLocalize=l2}ngOnInit(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=R({type:t,selectors:[["app-result-view-list"]],decls:6,vars:1,consts:[["infoModal",""],["mode","ios"],["button","",3,"lines"],["lines","none"],["button","",3,"click","lines"],["slot","start",3,"color","name"],["slot","end"],["slot","start","name","calendar-clear-outline","color","medium"],[1,"no-data"]],template:function(i,s){i&1&&(g(0,"ion-list",1),Q1(1,m5,8,12,"ion-item",2,W1,!1,w5,5,3,"ion-item",3),v(),y(4,"app-result-date-info-modal",null,0)),i&2&&(h(),K1(s.filteredDates()))},dependencies:[p1,a1,J,Z1,E1,z0,X1,Z,C0,d4],styles:["ion-list[_ngcontent-%COMP%]{background:var(--ion-color-light, #f4f5f8);border-radius:.5rem;padding-block:.25rem}ion-item[_ngcontent-%COMP%]{--background: transparent}.no-data[_ngcontent-%COMP%]{font-size:.9rem;line-height:.9rem}"],changeDetection:0});let n=t;return n})();var p4={Results:{en:"Results",ru:"\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B"},Vote:{en:"Vote",ru:"\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0434\u0430\u0442\u044B"},EventEnded:{en:"This event has already ended",ru:"\u042D\u0442\u043E \u0441\u043E\u0431\u044B\u0442\u0438\u0435 \u0443\u0436\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u043B\u043E\u0441\u044C"},LeaveQuestion:{en:"Leave this page?",ru:"\u041F\u043E\u043A\u0438\u043D\u0443\u0442\u044C \u044D\u0442\u0443 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443?"},LoseUnsaved:{en:"You have unsaved changes",ru:"\u0415\u0441\u0442\u044C \u043D\u0435\u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043D\u044B\u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F"}};var u5=()=>[];function x5(n,t){if(n&1&&(g(0,"div",9),y(1,"ion-icon",18),g(2,"span",19),f(3),d(4,"localize"),v()()),n&2){let e=M();h(3),k(" ",w(4,1,e.VotePageLocalize.EventEnded)," ")}}function f5(n,t){n&1&&y(0,"app-result-view-list")}function M5(n,t){if(n&1&&y(0,"app-result-view-calendar",17),n&2){M();let e=r1(4),o=r1(5);u("minDate",e==null?null:e.starts)("maxDate",e==null?null:e.ends)("daysOfWeek",o)}}var Qt=(()=>{let t=class t{constructor(){this.eventId=P.required(),this.mainInfoComponent=Y1(h4),this.voteCalendarComponent=Y1(v4),this.resultDirective=Y1(s0),this.alreadyInit=!1,this.preventLeave=!1,this.tg=p(z1),this.confirm=p(P1),this.local=p(d1),this.ViewPick=d0,this.VotePageLocalize=p4,this.today=F2(new Date)}ionViewWillEnter(){this.alreadyInit?(this.resultDirective()?.refresh(),this.mainInfoComponent()?.refreshInfo(),this.voteCalendarComponent()?.resetDates$.next(!0)):this.alreadyInit=!0}ionViewDidLeave(){this.tg.toggleClosingConfirm(!1)}canDeactivate(){let o=this.local.localizeSync(p4.LeaveQuestion),i=this.local.localizeSync(p4.LoseUnsaved);return this.preventLeave?this.confirm.createConfirm({header:o,message:i}):m0(!0)}isEventEnded(o){return o?this.today>new Date(o):!1}onNoUnsavedChanges(o){this.preventLeave=!o,this.tg.toggleClosingConfirm(!o)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=R({type:t,selectors:[["app-vote-event-page"]],viewQuery:function(i,s){i&1&&(G1(s.mainInfoComponent,h4,5),G1(s.voteCalendarComponent,v4,5),G1(s.resultDirective,s0,5)),i&2&&x0(3)},hostAttrs:[1,"app-page-inner"],inputs:{eventId:[1,"eventId"]},decls:33,vars:31,consts:[["eventMainInfo",""],["filters",""],["viewPicker",""],["resLoading","appFeatureLoad","result","appResultView"],[1,"ion-padding"],["appFeatureLoad","","placeholderOpacity","0.85",3,"eventId"],["mode","ios"],["value","vote","contentId","vote"],["value","info","contentId","info"],[1,"event-ended-warning"],["id","vote"],[1,"segment-view-content"],["appFeatureLoad","","placeholderOpacity","0.75",3,"noUnsavedChanges","voteUpdated","eventId","minDate","maxDate","daysOfWeek"],["id","info"],[3,"disabled","maxMembers","maxOverlap"],[3,"refresh","disabled"],["appFeatureLoad","","placeholderOpacity","0.75","appResultView","",3,"viewPick","eventId","min","noMaybe","noTime","onlyWithMe","trimPast"],[3,"minDate","maxDate","daysOfWeek"],["name","alert-circle-outline"],[1,"label"]],template:function(i,s){if(i&1){let a=N();g(0,"ion-content",4),y(1,"app-scroll-top-button")(2,"app-event-main-info",5,0),f1(4)(5),g(6,"ion-segment",6)(7,"ion-segment-button",7)(8,"ion-label"),f(9),d(10,"localize"),v()(),g(11,"ion-segment-button",8)(12,"ion-label"),f(13),d(14,"localize"),v()()(),G(15,x5,5,3,"div",9),g(16,"ion-segment-view",6)(17,"ion-segment-content",10)(18,"div",11)(19,"app-vote-calendar",12),V("noUnsavedChanges",function(r){return L(a),_(s.onNoUnsavedChanges(r))})("voteUpdated",function(r){L(a);let c=q(3),m=q(30);return r.alreadyVoted||c.refreshUsers(),_(m.refresh())}),v()()(),g(20,"ion-segment-content",13)(21,"div",11),y(22,"app-result-filters",14,1),d(24,"async"),g(25,"app-result-view-picker-control",15,2),d(27,"async"),V("refresh",function(){L(a);let r=q(30);return _(r.refresh())}),v(),g(28,"app-result-view-picker-container",16,3),G(31,f5,1,0,"app-result-view-list")(32,M5,1,3,"app-result-view-calendar",17),v()()()()()}if(i&2){let a,l,r=q(3),c=q(23),m=q(26),x=q(29),O=q(30);h(2),u("eventId",s.eventId()),h(2);let C=b1(r.info()),S=r.users();h();let H=b1(C!=null&&C.specifyDaysOfWeek?C==null?null:C.isoDaysOfWeek:M1(30,u5));h(4),k(" ",w(10,22,s.VotePageLocalize.Vote)," "),h(4),k(" ",w(14,24,s.VotePageLocalize.Results)," "),h(2),Y(s.isEventEnded(C==null?null:C.ends)?15:-1),h(4),u("eventId",s.eventId())("minDate",C==null?null:C.starts)("maxDate",C==null?null:C.ends)("daysOfWeek",H),h(3),u("disabled",w(24,26,x.loading$))("maxMembers",(S==null?null:S.length)??0)("maxOverlap",(a=O.info())==null?null:a.maxOverlap),h(3),u("disabled",w(27,28,x.loading$)),h(3),u("viewPick",m.value())("eventId",s.eventId())("min",c.membersCount())("noMaybe",c.noMaybe())("noTime",c.noTime())("onlyWithMe",c.onlyWithMe())("trimPast",c.trimPast()),h(3),Y((l=m.value())===s.ViewPick.List?31:l===s.ViewPick.Calendar?32:-1)}},dependencies:[N2,X0,a1,J,k1,Z,v4,h4,Ht,It,Rt,Wt,Ut,s0,h6,t6,e6,o6,B0,kt],styles:["ion-segment[_ngcontent-%COMP%]{margin:1rem 0 .5rem;background:var(--ion-color-light, #f4f5f8)}ion-segment-button[_ngcontent-%COMP%]:before{content:none!important}ion-segment-view[_ngcontent-%COMP%]{height:auto}.event-ended-warning[_ngcontent-%COMP%]{margin:.75rem .75rem .25rem;padding:.5rem 1.15rem;border-radius:.5rem;color:var(--ion-color-danger-shade, #ad000d);background-color:rgba(var(--ion-color-danger-rgb, 197, 0, 15),.12);display:flex;align-items:center;gap:.5rem}.event-ended-warning[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}.event-ended-warning[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.9rem}.segment-view-content[_ngcontent-%COMP%]{padding:.25rem .75rem 1.25rem;display:flex;flex-direction:column;gap:.75rem}"],changeDetection:0});let n=t;return n})();var e3={Name:{en:"Event name",ru:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"},Starts:{en:"Starts",ru:"\u041D\u0430\u0447\u0430\u043B\u043E"},Ends:{en:"Ends",ru:"\u041A\u043E\u043D\u0435\u0446"},Description:{en:"Description",ru:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},NamePlaceholder:{en:"Enter name",ru:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"},DescriptionPlaceholder:{en:"Enter description",ru:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},SpecificDaysOfWeek:{en:"Restrict by days of week",ru:"\u041E\u0433\u0440\u0430\u043D\u0438\u0447\u0438\u0442\u044C \u043F\u043E \u0434\u043D\u044F\u043C \u043D\u0435\u0434\u0435\u043B\u0438"},DaysOfWeekPlaceholder:{en:"Available days of week",ru:"\u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u0434\u043D\u0438 \u043D\u0435\u0434\u0435\u043B\u0438"},SaveEvent:{en:"Save event",ru:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0441\u043E\u0431\u044B\u0442\u0438\u0435"},HasBeenSaved:{en:"All changes have been saved successfully",ru:"\u0412\u0441\u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B"},Cancel:{en:"Cancel",ru:"\u041E\u0442\u043C\u0435\u043D\u0430"}};var Kt=(()=>{let t=class t{constructor(){this.baseUrl="events",this.http=p(M0)}getEventInfo(o){return this.http.get(`${this.baseUrl}/info/${o}`)}createEvent(o){return this.http.post(this.baseUrl,o)}updateEvent(o,i){return this.http.patch(`${this.baseUrl}/${o}`,i)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=n1({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Yt=r2(d2());var Gt=()=>[0,1];function k5(n,t){if(n&1&&y(0,"ion-datetime",15),n&2){M();let e=r1(4);u("firstDayOfWeek",1)("locale",e)}}function z5(n,t){if(n&1&&y(0,"ion-datetime",16),n&2){M();let e=r1(4);u("firstDayOfWeek",1)("locale",e)}}function y5(n,t){if(n&1&&(f1(0),d(1,"date"),g(2,"ion-select-option",18),f(3),d(4,"titlecase"),v()),n&2){let e=t.$implicit;M(2);let o=r1(4),i=W0(1,2,e.date,"EEEE",void 0,o);h(2),u("value",e.value),h(),V3(w(4,7,i))}}function C5(n,t){if(n&1&&(g(0,"ion-item")(1,"ion-select",17),d(2,"localize"),d(3,"localize"),d(4,"localize"),Q1(5,y5,5,9,"ion-select-option",18,W1),v()()),n&2){let e=M();h(),u("label",w(2,4,e.EditEventFormLocalize.DaysOfWeekPlaceholder))("placeholder",w(3,6,e.EditEventFormLocalize.DaysOfWeekPlaceholder))("cancelText",w(4,8,e.EditEventFormLocalize.Cancel))("multiple",!0),h(4),K1(e.daysOfWeek)}}function S5(n,t){n&1&&y(0,"ion-spinner",13)}function B5(n,t){if(n&1&&y(0,"ion-icon",14),n&2){let e=M();u("name",e.eventId()?"checkmark-outline":"add-outline")}}var Xt=(()=>{let t=class t{constructor(){this.eventId=P(),this.startVal=v1(new Date,"yyyy-MM-dd"),this.endVal=v1(d6(new Date,1),"yyyy-MM-dd"),this.eventFormGroup=new U3({name:new O0("",b2.required),starts:new O0(this.startVal,b2.required),ends:new O0(this.endVal,b2.required),description:new O0(""),specifyDaysOfWeek:new O0(!1),isoDaysOfWeek:new O0([])}),this.startDate=y0(this.eventFormGroup.controls.starts.valueChanges,{initialValue:this.startVal}),this.endDate=y0(this.eventFormGroup.controls.ends.valueChanges,{initialValue:this.endVal}),this.isDatesInvalid=X(()=>{let o=new Date(this.startDate()),i=new Date(this.endDate());return o>=i}),this.local=p(d1),this.localizeFormat$=this.local.localizationWithFormat$,this.EditEventFormLocalize=e3,this.tools=p(Z0),this.daysOfWeek=this.tools.daysOfWeek.map((o,i)=>({date:o,value:i+1})),this.router=p(k0),this.activatedRoute=p(P3),this.toast=p(e0),this.request=p(Kt),this.loading$=new U,this.eventInfoManual$=new U,this.eventInfo$=F1(this.eventId).pipe($(()=>this.eventFormGroup.disable()),D(o=>o?this.request.getEventInfo(o):m0(null)),$(()=>this.eventFormGroup.enable()),B1(1)),this.initFormValues=this.eventFormGroup.getRawValue(),this.noUnsavedChanges=g3([this.eventFormGroup.valueChanges,u1(this.eventInfo$,this.eventInfoManual$)]).pipe(F(([o,i])=>{let s=i??this.initFormValues;return Object.entries(o).every(([a,l])=>{let r=s[a];return(0,Yt.isEqual)(r,l)})}),B1(1)),this.destroyed$=new U}ngOnInit(){this.eventInfo$.pipe($0(o=>o!==null),U1(this.destroyed$)).subscribe(o=>{this.eventFormGroup.patchValue({name:o.name,starts:o.starts,ends:o.ends,description:o.description,specifyDaysOfWeek:o.specifyDaysOfWeek===!0,isoDaysOfWeek:o.isoDaysOfWeek??[]})})}ngOnDestroy(){this.destroyed$.next(void 0),this.destroyed$.complete()}saveChanges(){let o=this.eventId(),i=this.eventFormGroup.getRawValue(),s=o?this.request.updateEvent(o,i):this.request.createEvent(i);this.eventFormGroup.disable(),s.pipe(a0(1)).subscribe(a=>{this.eventFormGroup.enable();let l=this.local.localizeSync(e3.HasBeenSaved);this.toast.info(l,"cloud-done-outline"),this.eventInfoManual$.next(a),this.updateIdQueryParam(a.id)})}updateIdQueryParam(o){let i={queryParams:{eventId:o},relativeTo:this.activatedRoute,queryParamsHandling:"merge"};this.router.navigate([],i)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=R({type:t,selectors:[["app-edit-event-form"]],inputs:{eventId:[1,"eventId"]},outputs:{noUnsavedChanges:"noUnsavedChanges"},decls:48,vars:50,consts:[["startDateModal",""],["endDateModal",""],[3,"formGroup"],["mode","ios",3,"inset"],["color","dark","slot","end","formControlName","name",3,"placeholder"],[3,"click"],["datetime","datetimeStart"],[1,"event-datetime-modal",3,"keepContentsMounted","initialBreakpoint","breakpoints"],["datetime","datetimeEnd"],["lines","none",1,"notes-item"],["color","dark","slot","end","formControlName","description",3,"autoGrow","placeholder"],["formControlName","specifyDaysOfWeek"],["mode","ios","expand","block",1,"save-changes-button",3,"click","disabled"],["mode","ios","slot","start"],["slot","start",3,"name"],["id","datetimeStart","formControlName","starts","presentation","date","mode","ios",3,"firstDayOfWeek","locale"],["id","datetimeEnd","formControlName","ends","presentation","date","mode","ios",3,"firstDayOfWeek","locale"],["formControlName","isoDaysOfWeek",1,"week-select",3,"label","placeholder","cancelText","multiple"],[3,"value"]],template:function(i,s){if(i&1){let a=N();f1(0),d(1,"async"),f1(2),d(3,"async"),f1(4),d(5,"async"),_2(6,2),g(7,"ion-list",3)(8,"ion-item")(9,"ion-label"),f(10),d(11,"localize"),v(),y(12,"ion-input",4),d(13,"localize"),v(),g(14,"ion-item",5),V("click",function(){L(a);let r=q(20);return _(r.present())}),g(15,"ion-label"),f(16),d(17,"localize"),v(),y(18,"ion-datetime-button",6),g(19,"ion-modal",7,0),s1(21,k5,1,2,"ng-template"),v()(),g(22,"ion-item",5),V("click",function(){L(a);let r=q(28);return _(r.present())}),g(23,"ion-label"),f(24),d(25,"localize"),v(),y(26,"ion-datetime-button",8),g(27,"ion-modal",7,1),s1(29,z5,1,2,"ng-template"),v()(),g(30,"ion-item",9)(31,"ion-label"),f(32),d(33,"localize"),v(),y(34,"ion-textarea",10),d(35,"localize"),v()(),g(36,"ion-list",3)(37,"ion-item")(38,"ion-checkbox",11),f(39),d(40,"localize"),v()(),G(41,C5,7,10,"ion-item"),v(),V2(),g(42,"ion-button",12),V("click",function(){return L(a),_(s.saveChanges())}),G(43,S5,1,0,"ion-spinner",13)(44,B5,1,1,"ion-icon",14),g(45,"ion-label"),f(46),d(47,"localize"),v()()}if(i&2){let a,l=s.eventFormGroup.disabled,r=((a=w(1,25,s.eventInfo$))==null?null:a.canEdit)!==!1,c=w(3,27,s.noUnsavedChanges);h(4),b1(w(5,29,s.localizeFormat$)??void 0),h(2),u("formGroup",s.eventFormGroup),h(),L1("form-disabled",l),u("inset",!0),h(3),k(" ",w(11,32,s.EditEventFormLocalize.Name)," "),h(2),u("placeholder",w(13,34,s.EditEventFormLocalize.NamePlaceholder)),h(4),k(" ",w(17,36,s.EditEventFormLocalize.Starts)," "),h(3),u("keepContentsMounted",!0)("initialBreakpoint",1)("breakpoints",M1(48,Gt)),h(5),k(" ",w(25,38,s.EditEventFormLocalize.Ends)," "),h(3),u("keepContentsMounted",!0)("initialBreakpoint",1)("breakpoints",M1(49,Gt)),h(5),k(" ",w(33,40,s.EditEventFormLocalize.Description)," "),h(2),u("autoGrow",!0)("placeholder",w(35,42,s.EditEventFormLocalize.DescriptionPlaceholder)),h(2),L1("form-disabled",l),u("inset",!0),h(3),k(" ",w(40,44,s.EditEventFormLocalize.SpecificDaysOfWeek)," "),h(2),Y(s.eventFormGroup.controls.specifyDaysOfWeek.value?41:-1),h(),u("disabled",!r||l||c||s.eventFormGroup.invalid||s.isDatesInvalid()),h(),Y(l?43:44),h(3),k(" ",w(47,46,s.EditEventFormLocalize.SaveEvent)," ")}},dependencies:[p1,a1,O1,J,Z1,E1,k1,H2,X1,Z,l6,J1,t0,Z3,v6,n6,I2,g6,i6,K3,K0,$3,W3,Q3],styles:["ion-list[_ngcontent-%COMP%]{padding:.25rem;background:var(--ion-color-light, #f4f5f8)}.form-disabled[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .form-disabled[_ngcontent-%COMP%]   ion-datetime-button[_ngcontent-%COMP%]{opacity:.5!important}ion-item[_ngcontent-%COMP%]{--background: transparent;--min-height: 56px;border-radius:.5rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:1.25rem .5rem 1.25rem 0}ion-textarea[_ngcontent-%COMP%], ion-input[_ngcontent-%COMP%]{text-align:end;margin-right:.25rem;width:60%!important}.week-select[_ngcontent-%COMP%]::part(label){display:none}.week-select[_ngcontent-%COMP%]::part(container){padding-right:1.5rem}.week-select[_ngcontent-%COMP%]::part(icon){position:absolute;right:2px}.notes-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-bottom:auto}.notes-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{margin-top:.6rem}.save-changes-button[_ngcontent-%COMP%]{margin:.5rem 1rem}.save-changes-button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-left:-.25rem;margin-inline-end:.5rem}.save-changes-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:1.75rem;height:1.75rem;margin-inline-end:.5rem}.save-changes-button[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{line-height:1.75rem}  .event-datetime-modal{--max-width: 600px;--height: auto !important}  .event-datetime-modal .ion-delegate-host{padding:1rem 1.75rem 1.5rem!important;background-color:var(--ion-color-light, #f4f5f8)!important}  .event-datetime-modal ion-datetime{width:100%!important}"]});let n=t;return n})();var y2={CreateEvent:{en:"Create event",ru:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0441\u043E\u0431\u044B\u0442\u0438\u0435"},EditEvent:{en:"Edit event",ru:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0441\u043E\u0431\u044B\u0442\u0438\u0435"},Link:{en:"Link",ru:"\u0421\u0441\u044B\u043B\u043A\u0430"},Share:{en:"Share",ru:"\u041F\u043E\u0434\u0435\u043B\u0438\u0442\u044C\u0441\u044F"},GoTo:{en:"Go to",ru:"\u041F\u0435\u0440\u0435\u0439\u0442\u0438"},ClipboardLink:{en:"Link to event was copied to clipboard",ru:"\u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u0441\u043E\u0431\u044B\u0442\u0438\u0435 \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u0430 \u0432 \u0431\u0443\u0444\u0435\u0440 \u043E\u0431\u043C\u0435\u043D\u0430"},LeaveQuestion:{en:"Leave this page?",ru:"\u041F\u043E\u043A\u0438\u043D\u0443\u0442\u044C \u044D\u0442\u0443 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443?"},LoseUnsaved:{en:"You have unsaved changes",ru:"\u0415\u0441\u0442\u044C \u043D\u0435\u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043D\u044B\u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F"}};function L5(n,t){if(n&1){let e=N();g(0,"div",5)(1,"ion-button",6),V("click",function(){L(e);let i=M();return _(i.copyToClipboard())}),y(2,"ion-icon",7),g(3,"span"),f(4),d(5,"localize"),v()(),g(6,"ion-button",6),V("click",function(){L(e);let i=M();return _(i.share())}),y(7,"ion-icon",8),g(8,"span"),f(9),d(10,"localize"),v()(),g(11,"ion-button",6),V("click",function(){L(e);let i=M();return _(i.redirectToEvent())}),y(12,"ion-icon",9),g(13,"span"),f(14),d(15,"localize"),v()()()}if(n&2){let e=M(),o=q(5);L1("disabled",o.eventFormGroup.disabled),h(4),k(" ",w(5,5,e.EditEventPageLocalize.Link)," "),h(5),k(" ",w(10,7,e.EditEventPageLocalize.Share)," "),h(5),k(" ",w(15,9,e.EditEventPageLocalize.GoTo)," ")}}var Jt=(()=>{let t=class t{constructor(){this.eventId=P(),this.router=p(k0),this.toast=p(e0),this.tg=p(z1),this.confirm=p(P1),this.local=p(d1),this.EditEventPageLocalize=y2,this.preventLeave=!1}ionViewDidLeave(){this.tg.toggleClosingConfirm(!1)}canDeactivate(){let o=this.local.localizeSync(y2.LeaveQuestion),i=this.local.localizeSync(y2.LoseUnsaved);return this.preventLeave?this.confirm.createConfirm({header:o,message:i}):m0(!0)}onNoUnsavedChanges(o){this.preventLeave=!o,this.tg.toggleClosingConfirm(!o)}copyToClipboard(){this.tg.getEventTgLink(this.eventId()).pipe(D(o=>B2(navigator.clipboard.writeText(o))),a0(1)).subscribe(()=>{let o=this.local.localizeSync(y2.ClipboardLink);this.toast.light(o,"clipboard-outline")})}share(){this.eventId()&&this.tg.shareEvent(this.eventId())}redirectToEvent(){this.router.navigate(["vote",this.eventId()])}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=R({type:t,selectors:[["app-edit-event-page"]],hostAttrs:[1,"app-page-inner"],inputs:{eventId:[1,"eventId"]},decls:7,vars:5,consts:[["form",""],[1,"ion-padding"],[1,"title"],[3,"noUnsavedChanges","eventId"],["class","done-actions",3,"disabled",4,"ngIf"],[1,"done-actions"],["mode","ios","size","small","color","light",3,"click"],["name","link-outline","slot","start"],["name","arrow-redo-outline","slot","start"],["name","arrow-forward","slot","end"]],template:function(i,s){if(i&1){let a=N();g(0,"ion-content",1)(1,"h3",2),f(2),d(3,"localize"),v(),g(4,"app-edit-event-form",3,0),V("noUnsavedChanges",function(r){return L(a),_(s.onNoUnsavedChanges(r))}),v(),s1(6,L5,16,11,"div",4),v()}i&2&&(h(2),k(" ",w(3,3,s.eventId()?s.EditEventPageLocalize.EditEvent:s.EditEventPageLocalize.CreateEvent)," "),h(2),u("eventId",s.eventId()),h(2),u("ngIf",s.eventId()))},dependencies:[N2,f0,X0,J,Z,Xt,O1],styles:[".title[_ngcontent-%COMP%]{margin-left:1.25rem;margin-bottom:1rem}.done-actions[_ngcontent-%COMP%]{margin:.925rem;display:flex;flex-wrap:wrap;justify-content:space-between;gap:.5rem}.done-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex-grow:1;--padding-top: .6rem;--padding-bottom: .6rem;--border-radius: .75rem}.done-actions.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}"]});let n=t;return n})();var Zt=[{path:"edit",component:Jt,canDeactivate:[n=>n.canDeactivate()]},{path:"vote/:eventId",component:Qt,canDeactivate:[n=>n.canDeactivate()]},{path:"not-found",loadComponent:()=>import("./chunk-MGEKKM5S.js").then(n=>n.NotFoundPageComponent)},{path:"not-permitted",loadComponent:()=>import("./chunk-QIMRL5DH.js").then(n=>n.NotPermittedPageComponent)},{path:"",redirectTo:"edit",pathMatch:"full"},{path:"**",redirectTo:"not-found"}];var o3,_5=function(){if(typeof window>"u")return new Map;if(!o3){var n=window;n.Ionicons=n.Ionicons||{},o3=n.Ionicons.map=n.Ionicons.map||new Map}return o3},i3=function(n){Object.keys(n).forEach(function(t){t8(t,n[t]);var e=t.replace(/([a-z0-9]|(?=[A-Z]))([A-Z0-9])/g,"$1-$2").toLowerCase();t!==e&&t8(e,n[t])})},t8=function(n,t){var e=_5(),o=e.get(n);o===void 0?e.set(n,t):o!==t&&console.warn('[Ionicons Warning]: Multiple icons were mapped to name "'.concat(n,'". Ensure that multiple icons are not mapped to the same icon name.'))};var e8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M256 112v288M400 256H112' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var o8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M250.26 166.05L256 288l5.73-121.95a5.74 5.74 0 00-5.79-6h0a5.74 5.74 0 00-5.68 6z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M256 367.91a20 20 0 1120-20 20 20 0 01-20 20z'/></svg>";var i8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M268 112l144 144-144 144M392 256H100' class='ionicon-fill-none'/></svg>";var n8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M448 256L272 88v96C103.57 184 64 304.77 64 424c48.61-62.24 91.6-96 208-96v96z' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var s8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 244l144-144 144 144M256 120v292' class='ionicon-fill-none'/></svg>";var a8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><circle cx='256' cy='256' r='208' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-miterlimit='10' d='M108.92 108.92l294.16 294.16' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var l8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><rect stroke-linejoin='round' x='48' y='80' width='416' height='384' rx='48' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linejoin='round' stroke-linecap='round' d='M128 48v32M384 48v32M464 160H48' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var r8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><rect stroke-linejoin='round' x='48' y='80' width='416' height='384' rx='48' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='296' cy='232' r='24'/><circle cx='376' cy='232' r='24'/><circle cx='296' cy='312' r='24'/><circle cx='376' cy='312' r='24'/><circle cx='136' cy='312' r='24'/><circle cx='216' cy='312' r='24'/><circle cx='136' cy='392' r='24'/><circle cx='216' cy='392' r='24'/><circle cx='296' cy='392' r='24'/><path stroke-linejoin='round' stroke-linecap='round' d='M128 48v32M384 48v32' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linejoin='round' d='M464 160H48' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var c8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M416 128L192 384l-96-96' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var h8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>";var g8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M336 64h32a48 48 0 0148 48v320a48 48 0 01-48 48H144a48 48 0 01-48-48V112a48 48 0 0148-48h32' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><rect x='176' y='32' width='160' height='64' rx='26.13' ry='26.13' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var v8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M368 368L144 144M368 144L144 368' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var d8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M400 240c-8.89-89.54-71-144-144-144-69 0-113.44 48.2-128 96-60 6-112 43.59-112 112 0 66 54 112 120 112h260c55 0 100-27.44 100-88 0-59.82-53-85.76-96-88z' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M317 208L209.2 336 163 284.8' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var p8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M384 224v184a40 40 0 01-40 40H104a40 40 0 01-40-40V168a40 40 0 0140-40h167.48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M459.94 53.25a16.06 16.06 0 00-23.22-.56L424.35 65a8 8 0 000 11.31l11.34 11.32a8 8 0 0011.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38zM399.34 90L218.82 270.2a9 9 0 00-2.31 3.93L208.16 299a3.91 3.91 0 004.86 4.86l24.85-8.35a9 9 0 003.93-2.31L422 112.66a9 9 0 000-12.66l-9.95-10a9 9 0 00-12.71 0z'/></svg>";var m8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='256' r='48'/><circle cx='256' cy='416' r='48'/><circle cx='256' cy='96' r='48'/></svg>";var w8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M160 164s1.44-33 33.54-59.46C212.6 88.83 235.49 84.28 256 84c18.73-.23 35.47 2.94 45.48 7.82C318.59 100.2 352 120.6 352 164c0 45.67-29.18 66.37-62.35 89.18S248 298.36 248 324' stroke-linecap='round' stroke-miterlimit='10' stroke-width='40' class='ionicon-fill-none'/><circle cx='248' cy='399.99' r='32'/></svg>";var u8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M208 352h-64a96 96 0 010-192h64M304 160h64a96 96 0 010 192h-64M163.29 256h187.42' stroke-linecap='round' stroke-linejoin='round' stroke-width='36' class='ionicon-fill-none'/></svg>";var x8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M160 144h288M160 256h288M160 368h288' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='80' cy='144' r='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='80' cy='256' r='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='80' cy='368' r='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var f8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M320 146s24.36-12-64-12a160 160 0 10160 160' stroke-linecap='round' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M256 58l80 80-80 80' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var M8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M400 256H112' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var k8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='128' cy='256' r='48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='384' cy='112' r='48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='384' cy='400' r='48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M169.83 279.53l172.34 96.94M342.17 135.53l-172.34 96.94' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var z8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 64C150 64 64 150 64 256s86 192 192 192 192-86 192-192S362 64 256 64z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M256 128v144h96' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var y8="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M80 112h352' class='ionicon-stroke-width'/><path d='M192 112V72h0a23.93 23.93 0 0124-24h80a23.93 23.93 0 0124 24h0v40M256 176v224M184 176l8 224M328 176l-8 224' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var C8=(()=>{let t=class t{constructor(){this.tg=p(z1),this.theme=p(p6),this.destroyed$=new U,i3({chevronForwardOutline:h8,checkmarkOutline:c8,timeOutline:z8,helpOutline:w8,removeOutline:M8,closeOutline:v8,refreshOutline:f8,calendarOutline:r8,listOutline:x8,calendarClearOutline:l8,clipboardOutline:g8,arrowRedoOutline:n8,linkOutline:u8,cloudDoneOutline:d8,ellipsisVertical:m8,shareSocialOutline:k8,createOutline:p8,arrowForward:i8,alertCircleOutline:o8,trashOutline:y8,addOutline:e8,banOutline:a8,arrowUp:s8})}ngOnInit(){this.tg.colorScheme$.pipe(U1(this.destroyed$)).subscribe(o=>this.theme.changeColorScheme(o))}ngOnDestroy(){this.destroyed$.next(void 0),this.destroyed$.complete()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=R({type:t,selectors:[["app-root"]],decls:2,vars:0,consts:[["mode","md"]],template:function(i,s){i&1&&(g(0,"ion-app"),y(1,"ion-router-outlet",0),v())},dependencies:[X3,Y3],encapsulation:2});let n=t;return n})();function V5(n){let t=n,e=Math.floor(Math.abs(n)),o=n.toString().replace(/^[^.]*\.?/,"").length;return o===0&&e%10===1&&e%100!==11?1:o===0&&e%10===Math.floor(e%10)&&e%10>=2&&e%10<=4&&!(e%100>=12&&e%100<=14)?3:o===0&&e%10===0||o===0&&e%10===Math.floor(e%10)&&e%10>=5&&e%10<=9||o===0&&e%100===Math.floor(e%100)&&e%100>=11&&e%100<=14?4:5}var S8=["ru",[["AM","PM"],void 0,void 0],void 0,[["\u0412","\u041F","\u0412","\u0421","\u0427","\u041F","\u0421"],["\u0432\u0441","\u043F\u043D","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043F\u0442","\u0441\u0431"],["\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435","\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A","\u0432\u0442\u043E\u0440\u043D\u0438\u043A","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043F\u044F\u0442\u043D\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043E\u0442\u0430"],["\u0432\u0441","\u043F\u043D","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043F\u0442","\u0441\u0431"]],void 0,[["\u042F","\u0424","\u041C","\u0410","\u041C","\u0418","\u0418","\u0410","\u0421","\u041E","\u041D","\u0414"],["\u044F\u043D\u0432.","\u0444\u0435\u0432\u0440.","\u043C\u0430\u0440.","\u0430\u043F\u0440.","\u043C\u0430\u044F","\u0438\u044E\u043D.","\u0438\u044E\u043B.","\u0430\u0432\u0433.","\u0441\u0435\u043D\u0442.","\u043E\u043A\u0442.","\u043D\u043E\u044F\u0431.","\u0434\u0435\u043A."],["\u044F\u043D\u0432\u0430\u0440\u044F","\u0444\u0435\u0432\u0440\u0430\u043B\u044F","\u043C\u0430\u0440\u0442\u0430","\u0430\u043F\u0440\u0435\u043B\u044F","\u043C\u0430\u044F","\u0438\u044E\u043D\u044F","\u0438\u044E\u043B\u044F","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F","\u043E\u043A\u0442\u044F\u0431\u0440\u044F","\u043D\u043E\u044F\u0431\u0440\u044F","\u0434\u0435\u043A\u0430\u0431\u0440\u044F"]],[["\u042F","\u0424","\u041C","\u0410","\u041C","\u0418","\u0418","\u0410","\u0421","\u041E","\u041D","\u0414"],["\u044F\u043D\u0432.","\u0444\u0435\u0432\u0440.","\u043C\u0430\u0440\u0442","\u0430\u043F\u0440.","\u043C\u0430\u0439","\u0438\u044E\u043D\u044C","\u0438\u044E\u043B\u044C","\u0430\u0432\u0433.","\u0441\u0435\u043D\u0442.","\u043E\u043A\u0442.","\u043D\u043E\u044F\u0431.","\u0434\u0435\u043A."],["\u044F\u043D\u0432\u0430\u0440\u044C","\u0444\u0435\u0432\u0440\u0430\u043B\u044C","\u043C\u0430\u0440\u0442","\u0430\u043F\u0440\u0435\u043B\u044C","\u043C\u0430\u0439","\u0438\u044E\u043D\u044C","\u0438\u044E\u043B\u044C","\u0430\u0432\u0433\u0443\u0441\u0442","\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u043E\u043A\u0442\u044F\u0431\u0440\u044C","\u043D\u043E\u044F\u0431\u0440\u044C","\u0434\u0435\u043A\u0430\u0431\u0440\u044C"]],[["\u0434\u043E \u043D.\u044D.","\u043D.\u044D."],["\u0434\u043E \u043D. \u044D.","\u043D. \u044D."],["\u0434\u043E \u0420\u043E\u0436\u0434\u0435\u0441\u0442\u0432\u0430 \u0425\u0440\u0438\u0441\u0442\u043E\u0432\u0430","\u043E\u0442 \u0420\u043E\u0436\u0434\u0435\u0441\u0442\u0432\u0430 \u0425\u0440\u0438\u0441\u0442\u043E\u0432\u0430"]],1,[6,0],["dd.MM.y","d MMM y '\u0433'.","d MMMM y '\u0433'.","EEEE, d MMMM y '\u0433'."],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",void 0,void 0,void 0],[",","\xA0",";","%","+","-","E","\xD7","\u2030","\u221E","\u043D\u0435\xA0\u0447\u0438\u0441\u043B\u043E",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"RUB","\u20BD","\u0440\u043E\u0441\u0441\u0438\u0439\u0441\u043A\u0438\u0439 \u0440\u0443\u0431\u043B\u044C",{BYN:[void 0,"\u0440."],GEL:[void 0,"\u10DA"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],RUB:["\u20BD"],RUR:["\u0440."],THB:["\u0E3F"],TMT:["\u0422\u041C\u0422"],TWD:["NT$"],UAH:["\u20B4"],XXX:["XXXX"]},"ltr",V5];O3(S8);T3(C8,{providers:[{provide:I3,useClass:G3},vt(),s6(),R3(Zt,N3(F3),q3()),j3(D3([dt,mt,wt])),St(J0.isTelegramMiniApp),S3(()=>p(z1).initApp())]});
