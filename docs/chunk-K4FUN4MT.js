import{b as ai,c as N}from"./chunk-6IGCFAUU.js";import{a as It,b as he,c as Xe,d as ge,e as A,f as _e,g as ri,h as U}from"./chunk-567XOYJ6.js";import{c as Mt,d as ut,e as Dt,g as Ge,h as wt,i as Je}from"./chunk-46S35REE.js";import{$ as Pe,$b as ii,Aa as je,Ab as Fe,B as y,Ba as Oe,Bb as Qt,C as b,Ca as le,Cb as mt,D as x,Da as ne,Db as Yt,Ea as He,Fa as m,Ga as _,Gb as J,H as T,Ha as O,Hb as R,I as se,Ia as Wt,Ib as de,Ja as qe,Jb as ue,K as Se,Kb as Gt,L as s,La as H,Lb as Jt,Ma as Qe,Mb as Xt,Na as Ye,O as w,Oa as D,Ob as dt,Pa as Re,Q as G,Ra as jt,S as z,Sa as Be,Sb as Kt,T as Bt,Ta as Ht,Tb as fe,Ua as ce,Ub as q,V as zt,Va as pe,Wa as ot,Wb as Zt,X as $,Xb as ei,Y as F,Yb as ti,Z as ke,_ as Te,_a as ze,a as Q,aa as u,ac as ft,b as Pt,ba as a,bc as ni,c as we,ca as l,da as v,db as qt,dc as oi,e as Et,ea as $t,fa as Ft,g as k,ga as yt,h as re,ha as I,i as Vt,ia as C,j as Y,ja as f,jb as rt,k as Lt,ka as At,la as Ut,m as We,ma as Ct,n as nt,na as bt,nb as at,o as K,oa as xt,pa as Ee,q as Ot,qa as Ve,qb as st,r as ae,ra as M,s as Z,sa as Nt,t as E,ta as Le,u as xe,ua as d,ub as me,v as V,va as g,vb as lt,w as Rt,wa as W,wb as ct,xa as ee,xb as pt,y as Ie,ya as te,za as ie,zb as $e}from"./chunk-3L6J7R6N.js";import"./chunk-Q6FFIHTR.js";import"./chunk-7KGURMOZ.js";import"./chunk-NKG53MNX.js";import"./chunk-62TPDNO2.js";import"./chunk-7PWDY3UP.js";import"./chunk-JRYKI6H5.js";import"./chunk-GIIU5PV3.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-SPMQWSIB.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{a as B,b as j,f as vt}from"./chunk-2R6CW7ES.js";var si={Search:{en:"Search",ru:"\u041F\u043E\u0438\u0441\u043A"}};var Ae=(()=>{let i=class i{set src(e){e?(this.img.src=e,this.showPlaceholder()):this.img.src=this.imgPlaceholder}get img(){return this.elRef.nativeElement}constructor(){this.imgPlaceholder="/assets/no-avatar.png",this.elRef=y(se),this.placeholderEl=this.createPlaceholderEl(),this.img.onload=()=>this.hidePlaceholder()}showPlaceholder(){let e=this.placeholderEl;e.style.width=`${this.img.width+2}px`,e.style.height=`${this.img.offsetHeight+2}px`,e.style.top=`${this.img.offsetTop-1}px`,e.style.left=`${this.img.offsetLeft-1}px`,e.style.borderRadius=window.getComputedStyle(this.img).getPropertyValue("border-radius"),this.img.after(this.placeholderEl)}hidePlaceholder(){this.placeholderEl.remove()}createPlaceholderEl(){let e=document.createElement("div");return e.style.zIndex="1",e.style.position="absolute",e.className="skeleton-placeholder",e}};i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=G({type:i,selectors:[["","appImgLoad",""]],inputs:{src:"src",imgPlaceholder:"imgPlaceholder"}});let o=i;return o})();var ve=(()=>{let i=class i{set placeholderOpacity(e){this.placeholderEl.style.opacity=e}get el(){return this.elRef.nativeElement}constructor(){this.elRef=y(se),this.placeholderEl=this.createPlaceholderEl(),this.loadingCounter$=new Pt(0),this.loading$=this.loadingCounter$.pipe(k(e=>e>0),nt()),this.destroyed$=new Q}ngOnInit(){this.el.style.position="relative",this.loading$.pipe(xe(this.destroyed$)).subscribe(e=>e?this.onLoadStarts():this.onLoadEnds())}ngOnDestroy(){this.destroyed$.next(void 0),this.destroyed$.complete()}incrLoading(){this.loadingCounter$.next(this.loadingCounter$.value+1)}decrLoading(){this.loadingCounter$.next(this.loadingCounter$.value-1)}onLoadStarts(){this.el.appendChild(this.placeholderEl)}onLoadEnds(){this.placeholderEl.remove()}createPlaceholderEl(){let e=document.createElement("div");return e.style.zIndex="2",e.style.position="absolute",e.style.top="0",e.style.bottom="0",e.style.left="0",e.style.right="0",e.style.pointerEvents="none",e.style.borderRadius="0.5rem",e.className="skeleton-placeholder",e}};i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=G({type:i,selectors:[["","appFeatureLoad",""]],inputs:{placeholderOpacity:"placeholderOpacity"},exportAs:["appFeatureLoad"]});let o=i;return o})();var Pi=["altLabel"],Ei=["end"],li=(o,i)=>({$implicit:o,index:i});function Vi(o,i){if(o&1&&yt(0,6),o&2){let r=f(),e=r.$implicit,t=r.$index,n=f();u("ngTemplateOutlet",n.altLabelTemplateRef)("ngTemplateOutletContext",He(2,li,e,t))}}function Li(o,i){if(o&1&&(a(0,"ion-label"),d(1),l()),o&2){let r=f().$implicit;s(),g(" ",r.fullName," ")}}function Oi(o,i){if(o&1&&yt(0,6),o&2){let r=f(),e=r.$implicit,t=r.$index,n=f();u("ngTemplateOutlet",n.endTemplateRef)("ngTemplateOutletContext",He(2,li,e,t))}}function Ri(o,i){if(o&1){let r=I();a(0,"ion-item",3),C("click",function(){let t=b(r),n=t.$implicit,c=t.$index,p=f();return x(p.onUserClicked(c,n))}),a(1,"ion-avatar",4),v(2,"img",5),l(),$(3,Vi,1,5,"ng-container",6)(4,Li,2,1,"ion-label"),$(5,Oi,1,5,"ng-container",6),l()}if(o&2){let r=i.$implicit,e=i.$index,t=i.$count,n=f();u("lines",e===t-1?"none":"")("button",n.clickable()),s(2),u("src",r.photoUrl,Se),s(),F(n.altLabelTemplateRef?3:4),s(2),F(n.endTemplateRef?5:-1)}}var ht=(()=>{let i=class i{constructor(){this.clickable=D(!1),this.users=D.required(),this.searchStr=T(null),this.filteredUsers=H(()=>{let e=this.users(),t=this.searchStr()?.toLowerCase();return t?e.filter(n=>n.fullName.toLowerCase().includes(t)):e}),this.searchFocused=Ye(),this.userClicked=Ye(),this.UsersListLocalize=si}onUserClicked(e,t){this.clickable()&&this.userClicked.emit({index:e,user:B({},t)})}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-users-list"]],contentQueries:function(t,n,c){if(t&1&&(Ct(c,Pi,7),Ct(c,Ei,7)),t&2){let p;bt(p=xt())&&(n.altLabelTemplateRef=p.first),bt(p=xt())&&(n.endTemplateRef=p.first)}},inputs:{clickable:[1,"clickable"],users:[1,"users"]},outputs:{searchFocused:"searchFocused",userClicked:"userClicked"},decls:5,vars:4,consts:[["mode","ios","clear-icon","close-outline",3,"ionInput","ionFocus","ionBlur","debounce","placeholder"],["mode","ios"],[3,"lines","button"],[3,"click","lines","button"],["slot","start"],["appImgLoad","",3,"src"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,n){t&1&&(a(0,"ion-searchbar",0),m(1,"localize"),C("ionInput",function(p){return n.searchStr.set(p.detail.value)})("ionFocus",function(){return n.searchFocused.emit(!0)})("ionBlur",function(){return n.searchFocused.emit(!1)}),l(),a(2,"ion-list",1),Te(3,Ri,6,5,"ion-item",2,ke),l()),t&2&&(u("debounce",300)("placeholder",_(1,2,n.UsersListLocalize.Search)),s(3),Pe(n.filteredUsers()))},dependencies:[ot,Ht,A,de,J,$e,R,ei,Ae],styles:["[_nghost-%COMP%]{height:100%;position:relative}ion-searchbar[_ngcontent-%COMP%]{position:sticky;top:0}ion-list[_ngcontent-%COMP%]{background:transparent;max-height:calc(100% - 3.75rem);overflow-y:auto}ion-item[_ngcontent-%COMP%]{--background: transparent}ion-label[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}"]});let o=i;return o})();function Bi(o,i){if(o&1&&(a(0,"ion-avatar"),v(1,"img",1),l()),o&2){let r=i.$implicit,e=i.$index,t=i.$count;Nt("z-index",t-e),s(),u("src",r.photoUrl,Se)}}var ci=(()=>{let i=class i{constructor(){this.users=D.required(),this.maxCount=D(8),this.sliced=H(()=>this.users().slice(0,this.maxCount()))}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-avatars-list"]],inputs:{users:[1,"users"],maxCount:[1,"maxCount"]},decls:2,vars:0,consts:[[3,"zIndex"],["appImgLoad","","alt","",3,"src"]],template:function(t,n){t&1&&Te(0,Bi,2,3,"ion-avatar",0,ke),t&2&&Pe(n.sliced())},dependencies:[ot,$e,Ae],styles:["[_nghost-%COMP%]{display:flex}ion-avatar[_ngcontent-%COMP%]{width:1.6rem;height:1.6rem}ion-avatar[_ngcontent-%COMP%]:not(:last-child){margin-right:-.7rem}"]});let o=i;return o})();var Ue={Member:{en:"member",ru:"\u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A"},Initiator:{en:"Initiator",ru:"\u0418\u043D\u0438\u0446\u0438\u0430\u0442\u043E\u0440"},Starts:{en:"Starts",ru:"\u041D\u0430\u0447\u0430\u043B\u043E"},Ends:{en:"Ends",ru:"\u041A\u043E\u043D\u0435\u0446"},Description:{en:"Description",ru:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},Refresh:{en:"Refresh",ru:"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C"},Share:{en:"Share",ru:"\u041F\u043E\u0434\u0435\u043B\u0438\u0442\u044C\u0441\u044F"},Link:{en:"Link",ru:"\u0421\u0441\u044B\u043B\u043A\u0430"},Edit:{en:"Edit",ru:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"},Delete:{en:"Delete",ru:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"},ClipboardLink:{en:"Link was copied to clipboard",ru:"\u0421\u0441\u044B\u043B\u043A\u0430 \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u0430 \u0432 \u0431\u0443\u0444\u0435\u0440 \u043E\u0431\u043C\u0435\u043D\u0430"},EventWasDeleted:{en:"Event was successfully deleted",ru:"\u0421\u043E\u0431\u044B\u0442\u0438\u0435 \u0431\u044B\u043B\u043E \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D\u043E"},DeleteQuestion:{en:"Delete event?",ru:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0441\u043E\u0431\u044B\u0442\u0438\u0435?"},CannotBeUndone:{en:"This cannot be undone",ru:"\u042D\u0442\u043E \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C"}};var pi=(()=>{let i=class i{constructor(){this.baseUrl="events",this.http=y(ze)}getEventInfo(e){return this.http.get(`${this.baseUrl}/info/${e}`)}getEventUsers(e){return this.http.get(`${this.baseUrl}/users/${e}`)}deleteEvent(e){return this.http.delete(`${this.baseUrl}/${e}`)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})();var zi=()=>[0,1],mi=()=>[];function $i(o,i){if(o&1){let r=I();a(0,"ion-item",16),C("click",function(){b(r);let t=f(2);return x(t.redirectToEdit())}),v(1,"ion-icon",20),a(2,"ion-label"),d(3),m(4,"localize"),l()(),a(5,"ion-item",16),C("click",function(){b(r);let t=f(2);return x(t.deleteEvent())}),v(6,"ion-icon",21),a(7,"ion-label",22),d(8),m(9,"localize"),l()()}if(o&2){let r=f(2);u("detail",!1),s(3),g(" ",_(4,4,r.EventMainInfoLocalize.Edit)," "),s(2),u("detail",!1),s(3),g(" ",_(9,6,r.EventMainInfoLocalize.Delete)," ")}}function Fi(o,i){if(o&1){let r=I();a(0,"ion-list",15)(1,"ion-item",16),C("click",function(){b(r);let t=f();return t.refreshInfo(),x(t.refreshUsers())}),v(2,"ion-icon",17),a(3,"ion-label"),d(4),m(5,"localize"),l()(),a(6,"ion-item",16),C("click",function(){b(r);let t=f();return x(t.share())}),v(7,"ion-icon",18),a(8,"ion-label"),d(9),m(10,"localize"),l()(),a(11,"ion-item",16),C("click",function(){b(r);let t=f();return x(t.copyToClipboard())}),v(12,"ion-icon",19),a(13,"ion-label"),d(14),m(15,"localize"),l()(),$(16,$i,10,8),l()}if(o&2){let r=f(),e=le(0);s(),u("detail",!1),s(3),g(" ",_(5,7,r.EventMainInfoLocalize.Refresh)," "),s(2),u("detail",!1),s(3),g(" ",_(10,9,r.EventMainInfoLocalize.Share)," "),s(2),u("detail",!1),s(3),g(" ",_(15,11,r.EventMainInfoLocalize.Link)," "),s(2),F(e!=null&&e.canEdit?16:-1)}}function Ai(o,i){if(o&1){let r=I();a(0,"ion-item",16),C("click",function(){b(r),f();let t=M(38);return x(t.present())}),a(1,"ion-label"),d(2),m(3,"localizeMany"),l(),v(4,"app-avatars-list",23),l()}if(o&2){let r=f(),e=le(1),t=le(14);u("detail",!1),s(2),W(" ",t," ",O(3,4,r.EventMainInfoLocalize.Member,t)," "),s(2),u("users",e??ne(7,mi))}}function Ui(o,i){if(o&1&&(a(0,"ion-item",13)(1,"ion-label"),d(2),m(3,"localize"),l(),a(4,"ion-note"),d(5),l()()),o&2){let r=f(),e=le(0);s(2),g(" ",_(3,2,r.EventMainInfoLocalize.Description)," "),s(3),g(" ",e==null?null:e.description," ")}}function Ni(o,i){if(o&1&&(a(0,"ion-note",26),d(1),l()),o&2){let r=f().$implicit;s(),g(" ","@"+r.username," ")}}function Wi(o,i){if(o&1&&z(0,Ni,2,1,"ion-note",25),o&2){let r=i.$implicit;u("ngIf",r.username)}}function ji(o,i){if(o&1){let r=I();a(0,"app-users-list",24),C("searchFocused",function(t){b(r),f();let n=M(38);return x(n.backdropDismiss=!t)}),z(1,Wi,1,1,"ng-template",null,1,qe),l()}if(o&2){f();let r=le(1);u("users",r??ne(1,mi))}}var gt=(()=>{let i=class i{constructor(){this.eventId=D.required(),this.eventId$=he(this.eventId),this.router=y(qt),this.toast=y(ft),this.confirm=y(oi),this.tg=y(ni),this.request=y(pi),this.featureLoad=y(ve,{optional:!0}),this.refreshInfo$=new Q,this.refreshUsers$=new Q,this.info$=this.refreshInfo$.pipe(Z(!0),E(()=>this.eventId$),V(()=>this.featureLoad?.incrLoading()),E(e=>this.request.getEventInfo(e).pipe(K(()=>this.featureLoad?.decrLoading()))),ae(1)),this.users$=this.refreshUsers$.pipe(Z(!0),E(()=>this.eventId$),V(()=>this.featureLoad?.incrLoading()),E(e=>this.request.getEventUsers(e).pipe(K(()=>this.featureLoad?.decrLoading()))),ae(1)),this.info=Xe(this.info$),this.users=Xe(this.users$),this.local=y(ge),this.EventMainInfoLocalize=Ue}refreshInfo(){this.refreshInfo$.next(!0)}refreshUsers(){this.refreshUsers$.next(!0)}copyToClipboard(){this.tg.getEventTgLink(this.eventId()).pipe(E(e=>Et(navigator.clipboard.writeText(e))),We(1)).subscribe(()=>{let e=this.local.localizeSync(Ue.ClipboardLink);this.toast.light(e,"clipboard-outline")})}share(){this.eventId()&&this.tg.shareEvent(this.eventId(),this.info()?.name)}redirectToEdit(){let e={eventId:this.eventId()};this.router.navigate(["edit"],{queryParams:e})}deleteEvent(){let e=this.local.localizeSync(Ue.DeleteQuestion),t=this.local.localizeSync(Ue.CannotBeUndone),n=this.local.localizeSync(Ue.EventWasDeleted);this.confirm.createConfirm({header:e,message:t}).pipe(Lt(Boolean),V(()=>this.featureLoad?.incrLoading()),E(()=>this.request.deleteEvent(this.eventId())),V(()=>this.toast.info(n,"trash-outline")),K(()=>this.featureLoad?.decrLoading())).subscribe(()=>this.router.navigate(["edit"]))}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-event-main-info"]],inputs:{eventId:[1,"eventId"]},decls:40,vars:31,consts:[["usersModal",""],["end",""],["mode","ios"],["value","info"],["slot","header",1,"header-item"],["slot","start"],["appImgLoad","",3,"src"],["id","menu-popover-trigger","slot","end","color","dark","fill","clear","size","large",1,"menu-button",3,"click"],["name","ellipsis-vertical","slot","icon-only"],["mode","ios","trigger","menu-popover-trigger","triggerAction","click",3,"dismissOnSelect","arrow"],["slot","content","mode","ios",1,"info-list"],["button","",3,"detail"],[3,"lines"],["lines","none",1,"notes-item"],[3,"initialBreakpoint","breakpoints"],["lines","none",1,"popover-menu-list"],["button","",3,"click","detail"],["name","refresh-outline","slot","start","color","medium"],["name","share-social-outline","slot","start","color","medium"],["name","link-outline","slot","start","color","medium"],["name","create-outline","slot","start","color","medium"],["name","trash-outline","slot","start","color","danger"],["color","danger"],[3,"users"],[3,"searchFocused","users"],["class","username",4,"ngIf"],[1,"username"]],template:function(t,n){if(t&1){let c=I();je(0)(1),a(2,"ion-accordion-group",2)(3,"ion-accordion",3)(4,"ion-item",4)(5,"ion-avatar",5),v(6,"img",6),l(),a(7,"ion-label"),d(8),l(),a(9,"ion-button",7),C("click",function(h){return b(c),x(h.stopPropagation())}),v(10,"ion-icon",8),l(),a(11,"ion-popover",9),z(12,Fi,17,13,"ng-template"),l()(),a(13,"ion-list",10),je(14),$(15,Ai,5,8,"ion-item",11),a(16,"ion-item")(17,"ion-label"),d(18),m(19,"localize"),l(),a(20,"ion-note"),d(21),l()(),a(22,"ion-item")(23,"ion-label"),d(24),m(25,"localize"),l(),a(26,"ion-note"),d(27),m(28,"date"),l()(),a(29,"ion-item",12)(30,"ion-label"),d(31),m(32,"localize"),l(),a(33,"ion-note"),d(34),m(35,"date"),l()(),$(36,Ui,6,4,"ion-item",13),l()()(),a(37,"ion-modal",14,0),z(39,ji,3,2,"ng-template"),l()}if(t&2){let c=Oe(n.info());s();let p=Oe(n.users());s(5),u("src",c==null||c.creator==null?null:c.creator.photoUrl,Se),s(2),g(" ",(c==null?null:c.name)??"Event name"," "),s(3),u("dismissOnSelect",!0)("arrow",!1),s(3);let h=Oe((p==null?null:p.length)??0);s(),F(h>0?15:-1),s(3),g(" ",_(19,18,n.EventMainInfoLocalize.Initiator)," "),s(3),g(" ",c==null||c.creator==null?null:c.creator.fullName," "),s(3),g(" ",_(25,20,n.EventMainInfoLocalize.Starts)," "),s(3),g(" ",O(28,22,c==null?null:c.starts,"dd.MM.yyyy")," "),s(2),u("lines",c!=null&&c.description?"":"none"),s(2),g(" ",_(32,25,n.EventMainInfoLocalize.Ends)," "),s(3),g(" ",O(35,27,c==null?null:c.ends,"dd.MM.yyyy")," "),s(2),F(c!=null&&c.description?36:-1),s(),u("initialBreakpoint",1)("breakpoints",ne(30,zi))}},dependencies:[U,Be,R,Fe,q,de,J,ue,pe,A,_e,pt,ct,$e,me,lt,ci,ht,Ae],styles:["ion-accordion-group[_ngcontent-%COMP%]{border-radius:.5rem}ion-list.info-list[_ngcontent-%COMP%]{margin-top:.5rem;background:transparent}ion-item[_ngcontent-%COMP%]{--background: transparent}ion-item.header-item[_ngcontent-%COMP%]{border-radius:.5rem;--padding-start: .75rem;--min-height: 3.7rem}ion-item.header-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:2.75rem!important;height:2.75rem!important}ion-item.header-item[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]{margin-right:-1rem}ion-item.header-item[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.25rem}ion-item.header-item[_ngcontent-%COMP%]     .ion-accordion-toggle-icon{position:absolute;right:3rem}ion-item.notes-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-bottom:auto}ion-item.notes-item[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{padding:.5rem 0;margin-left:max(20%,2.5rem);text-align:end}ion-popover[_ngcontent-%COMP%]{--offset-y: -.25rem;--offset-x: -.6rem;--width: auto}ion-popover[_ngcontent-%COMP%]   .popover-menu-list[_ngcontent-%COMP%]{padding:.25rem 0;background-color:var(--ion-background-color-step-100);white-space:nowrap}app-avatars-list[_ngcontent-%COMP%]{opacity:.9}ion-modal[_ngcontent-%COMP%]{--height: auto}ion-modal[_ngcontent-%COMP%]   app-users-list[_ngcontent-%COMP%]{height:60vh;padding:1rem}"],changeDetection:0});let o=i;return o})();var di={FilterResults:{en:"Filter results",ru:"\u0424\u0438\u043B\u044C\u0442\u0440\u043E\u0432\u0430\u0442\u044C \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B"},Exclude:{en:"Exclude",ru:"\u0418\u0441\u043A\u043B\u044E\u0447\u0438\u0442\u044C "},Maybe:{en:'"maybe"',ru:'"\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E"'},Time:{en:'"time"',ru:'"\u0432\u0440\u0435\u043C\u044F"'},IgnorePastDates:{en:"Ignore past dates",ru:"\u0423\u0431\u0440\u0430\u0442\u044C \u043F\u0440\u043E\u0448\u0435\u0434\u0448\u0438\u0435 \u0434\u0430\u0442\u044B"},OnlyWithMe:{en:"Only with me",ru:"\u0422\u043E\u043B\u044C\u043A\u043E \u0441\u043E \u043C\u043D\u043E\u0439"},AtLeast:{en:"At least",ru:"\u041A\u0430\u043A \u043C\u0438\u043D\u0438\u043C\u0443\u043C"},Member:{en:"member",ru:"\u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A"}};var ui=vt(It());var fi=(()=>{let i=class i{set maxOverlap(e){(0,ui.isNil)(e)||this.membersCount.set(e)}constructor(){this.disabled=!1,this.noMaybe=T(!1),this.noTime=T(!1),this.onlyWithMe=T(!1),this.trimPast=T(!0),this.membersCount=T(1),this.ResultFiltersLocalize=di}ngOnInit(){}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-result-filters"]],inputs:{disabled:"disabled",maxMembers:"maxMembers",maxOverlap:"maxOverlap"},decls:38,vars:40,consts:[["mode","ios"],["value","filters","toggleIcon","remove-outline"],["slot","header",1,"header-item"],["slot","content","mode","ios"],[3,"ngModelChange","ngModel"],["color","warning"],["color","success"],["lines","none"],["lines","none",1,"range-list-item"],[3,"ngModelChange","ngModel","snaps","min","max","ticks"]],template:function(t,n){t&1&&(a(0,"ion-accordion-group",0)(1,"ion-accordion",1)(2,"ion-item",2)(3,"ion-label"),d(4),m(5,"localize"),l()(),a(6,"ion-list",3)(7,"ion-item")(8,"ion-checkbox",4),ie("ngModelChange",function(p){return te(n.noMaybe,p)||(n.noMaybe=p),p}),d(9),m(10,"localize"),a(11,"ion-text",5),d(12),m(13,"localize"),l()()(),a(14,"ion-item")(15,"ion-checkbox",4),ie("ngModelChange",function(p){return te(n.noTime,p)||(n.noTime=p),p}),d(16),m(17,"localize"),a(18,"ion-text",6),d(19),m(20,"localize"),l()()(),a(21,"ion-item")(22,"ion-checkbox",4),ie("ngModelChange",function(p){return te(n.onlyWithMe,p)||(n.onlyWithMe=p),p}),d(23),m(24,"localize"),l()(),a(25,"ion-item")(26,"ion-checkbox",4),ie("ngModelChange",function(p){return te(n.trimPast,p)||(n.trimPast=p),p}),d(27),m(28,"localize"),l()(),a(29,"ion-item",7)(30,"ion-label"),d(31),m(32,"localize"),l(),a(33,"ion-note"),d(34),m(35,"localizeMany"),l()(),a(36,"ion-item",8)(37,"ion-range",9),ie("ngModelChange",function(p){return te(n.membersCount,p)||(n.membersCount=p),p}),l()()()()()),t&2&&(Le("disabled",n.disabled),s(4),g(" ",_(5,21,n.ResultFiltersLocalize.FilterResults)," "),s(4),ee("ngModel",n.noMaybe),s(),g(" ",_(10,23,n.ResultFiltersLocalize.Exclude)," "),s(3),g(" ",_(13,25,n.ResultFiltersLocalize.Maybe)," "),s(3),ee("ngModel",n.noTime),s(),g(" ",_(17,27,n.ResultFiltersLocalize.Exclude)," "),s(3),g(" ",_(20,29,n.ResultFiltersLocalize.Time)," "),s(3),ee("ngModel",n.onlyWithMe),s(),g(" ",_(24,31,n.ResultFiltersLocalize.OnlyWithMe)," "),s(3),ee("ngModel",n.trimPast),s(),g(" ",_(28,33,n.ResultFiltersLocalize.IgnorePastDates)," "),s(4),g(" ",_(32,35,n.ResultFiltersLocalize.AtLeast)," "),s(3),W(" ",n.membersCount()," ",O(35,37,n.ResultFiltersLocalize.Member,n.membersCount())," "),s(3),ee("ngModel",n.membersCount),u("snaps",!0)("min",1)("max",n.maxMembers)("ticks",n.maxMembers<=10))},dependencies:[U,R,de,J,ue,dt,A,_e,pt,ct,Kt,Zt,st,rt,at],styles:[".disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}ion-accordion[_ngcontent-%COMP%]{background:var(--ion-color-light, #f4f5f8);border-radius:.5rem;--padding-end: 0}.header-item[_ngcontent-%COMP%]{--inner-padding-end: .9rem}ion-list[_ngcontent-%COMP%]{background:var(--ion-color-light, #f4f5f8)}ion-item[_ngcontent-%COMP%]{--background: transparent}ion-item[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{opacity:.85}ion-item[_ngcontent-%COMP%]   ion-range[_ngcontent-%COMP%]{--knob-size: 22px}ion-item.range-list-item[_ngcontent-%COMP%]{margin-top:-.65rem;--padding-start: 1px;--inner-padding-end: .2rem}"]});let o=i;return o})();var hi=(o,i=500)=>{let r=re(o,"touchstart"),e=re(o,"touchend"),t=re(o,"touchmove");return r.pipe(E(n=>Vt(i).pipe(k(()=>n),xe(Y(e,t)))))};var ye=class{static get dayFormat(){return"yyyy-MM-dd"}static get timeFormat(){return"yyyy-MM-dd'T'HH:mm:ss"}static toJsDates(i){return j(B({},i),{date:new Date(i.date),start:i.start?new Date(String(i.start).split(".")[0]):void 0,end:i.end?new Date(String(i.end).split(".")[0]):void 0})}static toStringDates(i){return j(B({},i),{date:N(i.date,this.dayFormat),start:i.start?N(i.start,this.timeFormat):void 0,end:i.end?N(i.end,this.timeFormat):void 0})}};var S=function(o){return o.Ready="ready",o.Maybe="maybe",o.Time="time",o}(S||{});var gi=vt(It());var qi="rgba(var(--ion-color-base-rgb), 0.2)",Ze=o=>N(o,"yyyy-MM-dd"),_i=(()=>{let i=class i{set voteDates(e){let t=(0,gi.groupBy)(e,"voteType"),n=t[S.Ready]??[],c=t[S.Maybe]??[],p=t[S.Time]??[];this.readyDates.set(new Set(n.map(h=>Ze(h.date)))),this.maybeDates.set(new Set(c.map(h=>Ze(h.date)))),this.timeDates.set(new Map(p.map(h=>[Ze(h.date),h])))}get voteDates(){let e=this.readyDates(),t=this.maybeDates(),n=this.timeDates();return[...Array.from(e).map(c=>({date:new Date(c),voteType:S.Ready})),...Array.from(t).map(c=>({date:new Date(c),voteType:S.Maybe})),...Array.from(n.values())]}get rootEl(){return this.elRef.nativeElement.shadowRoot}constructor(){this.readyDates=T(new Set),this.maybeDates=T(new Set),this.timeDates=T(new Map),this.lastFocusedDateButton$=new we(1),this.focusedTimeChanges=this.lastFocusedDateButton$.pipe(k(e=>{if(!e)return;let t=Number(e.getAttribute("data-day")),n=Number(e.getAttribute("data-month")),c=Number(e.getAttribute("data-year")),p=new Date(c,n-1,t);return this.timeDates().get(Ze(p))})),this.ionDateComponent=y(fe),this.elRef=y(se),this.rootObs=new MutationObserver(()=>{let e=this.rootEl.querySelectorAll("button.calendar-day");this.dateButtons$.next(Array.from(e))}),this.dateButtons$=new we(1),this.destroyed$=new we(1),Qe(()=>{let e=this.readyDates();this.ionDateComponent.value=Array.from(e)}),Qe(()=>{let e=this.maybeDates(),t=this.timeDates();this.ionDateComponent.highlightedDates=[...Array.from(e).map(n=>({date:n,textColor:"var(--maybe-text-color)",backgroundColor:"var(--maybe-bg-color)"})),...Array.from(t.keys()).map(n=>({date:n,textColor:"var(--time-text-color)",backgroundColor:"var(--time-bg-color)"}))]})}ngAfterViewInit(){this.rootObs.observe(this.rootEl,{childList:!0,subtree:!0}),this.dateButtons$.pipe(E(e=>{let t=e.map(n=>{let c=re(n,"contextmenu"),p=hi(n);return Y(c,p).pipe(V(h=>h.preventDefault()),k(h=>j(B({},h),{target:n})),Rt(500))});return Y(...t)}),xe(this.destroyed$)).subscribe(e=>this.showPopover(e)),this.ionDateComponent.ionChange.pipe(xe(this.destroyed$)).subscribe(e=>{let t=e.detail.value,n=this.readyDates(),c=this.maybeDates(),p=this.timeDates();n.clear(),t?.forEach(h=>{c.has(h)?c.delete(h):p.has(h)?p.delete(h):n.add(h)}),this.emitAllDatesSignals()})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete(),this.dateButtons$.complete(),this.rootObs.disconnect()}showPopover(e){let t=e.target;this.popover.present(e);let n=t.style.backgroundColor??"";this.popover.willPresent.pipe(We(1)).subscribe(()=>{this.lastFocusedDateButton$.next(t),t.style.backgroundColor=qi}),this.popover.willDismiss.pipe(We(1)).subscribe(c=>{if(this.lastFocusedDateButton$.next(void 0),t.style.backgroundColor=n,c.detail.data){let p=Number(t.getAttribute("data-day")),h=Number(t.getAttribute("data-month")),P=Number(t.getAttribute("data-year"));this.handlePopoverButtons(c.detail.data,P,h,p)}})}handlePopoverButtons(e,t,n,c){let p=new Date(t,n-1,c),h=Ze(p);if(e.ready)this.readyDates().add(h),this.maybeDates().delete(h),this.timeDates().delete(h);else if(e.maybe)this.maybeDates().add(h),this.readyDates().delete(h),this.timeDates().delete(h);else if(e.time){let P=new Date(e.start),X=new Date(e.end);P.setFullYear(t,n-1,c),X.setFullYear(t,n-1,c);let tt={date:p,voteType:S.Time,start:P,end:X};this.timeDates().set(h,tt),this.readyDates().delete(h),this.maybeDates().delete(h)}this.emitAllDatesSignals()}emitAllDatesSignals(){this.readyDates.set(new Set(this.readyDates())),this.maybeDates.set(new Set(this.maybeDates())),this.timeDates.set(new Map(this.timeDates()))}};i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=G({type:i,selectors:[["","appIonDateSpecify",""]],inputs:{popover:"popover",voteDates:"voteDates"},outputs:{focusedTimeChanges:"focusedTimeChanges"},exportAs:["appIonDateSpecify"]});let o=i;return o})();var kt={Ready:{en:"Ready",ru:"\u0413\u043E\u0442\u043E\u0432"},Maybe:{en:"Maybe",ru:"\u0412\u043E\u0437\u043C\u043E\u0436\u043D\u043E"},Time:{en:"Time",ru:"\u0412\u0440\u0435\u043C\u044F"},HoldDate:{en:"Hold date",ru:"\u0423\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0439\u0442\u0435 \u0434\u0430\u0442\u0443,"},RightClickDate:{en:"Right click on date",ru:"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u043F\u0440\u0430\u0432\u043E\u0439 \u043A\u043D\u043E\u043F\u043A\u043E\u0439 \u043C\u044B\u0448\u0438 \u043F\u043E \u0434\u0430\u0442\u0435,"},SelectSpecificStatus:{en:"to select specific status",ru:"\u0447\u0442\u043E\u0431\u044B \u0432\u044B\u0431\u0440\u0430\u0442\u044C \u0441\u0442\u0430\u0442\u0443\u0441"},DoNotForgetSave:{en:"Don't forget to save changes",ru:"\u041D\u0435 \u0437\u0430\u0431\u0443\u0434\u044C\u0442\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F"},Clear:{en:"Clear",ru:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C"},Cancel:{en:"Cancel",ru:"\u041E\u0442\u043C\u0435\u043D\u0430"},Save:{en:"Save",ru:"\u0413\u043E\u0442\u043E\u0432\u043E"},StartTime:{en:"Start time",ru:"\u0412\u0440\u0435\u043C\u044F \u043D\u0430\u0447\u0430\u043B\u0430"},EndTime:{en:"End time",ru:"\u0412\u0440\u0435\u043C\u044F \u043E\u043A\u043E\u043D\u0447\u0430\u043D\u0438\u044F"},SpecifyTime:{en:"Specify time",ru:"\u0423\u043A\u0430\u0437\u0430\u0442\u044C \u0432\u0440\u0435\u043C\u044F"},HasBeenSaved:{en:"All changes have been saved successfully",ru:"\u0412\u0441\u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B"}};var vi=(()=>{let i=class i{constructor(){this.baseUrl="votes",this.http=y(ze)}getEventVote(e){let t={eventId:e};return this.http.get(this.baseUrl,{params:t}).pipe(k(n=>{let c=n.dates.map(p=>ye.toJsDates(p));return j(B({},n),{dates:c})}))}updateEventVote(e,t){let c={dates:t.map(h=>ye.toStringDates(h))},p={eventId:e};return this.http.post(this.baseUrl,c,{params:p}).pipe(k(h=>{let P=h.dates.map(X=>ye.toJsDates(X));return j(B({},h),{dates:P})}))}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})();var Qi=()=>[],Yi=()=>[0,1];function Gi(o,i){if(o&1){let r=I();a(0,"div",24)(1,"ion-button",25,3),C("click",function(){b(r),f();let t=M(41);return x(t.dismiss({ready:!0}))}),v(3,"ion-icon",26),l(),a(4,"ion-button",27,4),C("click",function(){b(r),f();let t=M(41);return x(t.dismiss({maybe:!0}))}),v(6,"ion-icon",28),l(),a(7,"ion-button",29,5),C("click",function(){b(r),f();let t=M(44);return x(t.present())}),v(9,"ion-icon",30),l()()}}function Ji(o,i){if(o&1){let r=I();a(0,"div",31)(1,"div",32)(2,"div",33)(3,"ion-label"),d(4),m(5,"localize"),l(),a(6,"ion-datetime",34),ie("ngModelChange",function(t){b(r);let n=f();return te(n.startTime,t)||(n.startTime=t),x(t)}),l()(),a(7,"div",33)(8,"ion-label"),d(9),m(10,"localize"),l(),a(11,"ion-datetime",34),ie("ngModelChange",function(t){b(r);let n=f();return te(n.endTime,t)||(n.endTime=t),x(t)}),l()()(),a(12,"ion-button",35),C("click",function(){b(r);let t=f(),n=M(41);return M(44).dismiss(),x(n.dismiss({time:!0,start:t.startTime(),end:t.endTime()}))}),d(13),m(14,"localize"),l()()}if(o&2){let r=f();s(4),g(" ",_(5,6,r.VoteCalendarLocalize.StartTime)," "),s(2),ee("ngModel",r.startTime),s(3),g(" ",_(10,8,r.VoteCalendarLocalize.EndTime)," "),s(2),ee("ngModel",r.endTime),s(),u("disabled",r.isTimeInvalid()),s(),g(" ",_(14,10,r.VoteCalendarLocalize.SpecifyTime)," ")}}var et="yyyy-MM-dd'T'HH:mm:ss",yi=(()=>{let i=class i{constructor(){this.eventId=D.required(),this.minDate=D(),this.maxDate=D(),this.voteUpdated=Ye(),this.resetDates$=new Q,this.clearDates$=new Q,this.saveDates$=new Q,this.request=y(vi),this.featureLoad=y(ve,{optional:!0}),this.loadedEventVote$=he(this.eventId).pipe(V(()=>this.featureLoad?.incrLoading()),E(e=>this.request.getEventVote(e).pipe(K(()=>this.featureLoad?.decrLoading()))),ae(1)),this.updatedEventVote$=this.saveDates$.pipe(V(()=>this.featureLoad?.incrLoading()),E(e=>this.request.updateEventVote(this.eventId(),e).pipe(K(()=>this.featureLoad?.decrLoading()))),V(e=>this.voteUpdated.emit(e)),V(()=>{let e=this.loc.localizeSync(kt.HasBeenSaved);this.toast.info(e,"cloud-done-outline")}),ae(1)),this.voteDates$=Y(this.clearDates$.pipe(k(()=>[])),this.resetDates$.pipe(Z(!0),E(()=>Y(this.loadedEventVote$,this.updatedEventVote$)),k(e=>e.dates.slice()))),this.startTime=T(N(new Date,et)),this.endTime=T(N(new Date,et)),this.isTimeInvalid=H(()=>{let e=new Date(this.startTime()),t=new Date(this.endTime());return e>=t}),this.toast=y(ft),this.tools=y(ii),this.isTouchDevice=this.tools.isTouchDevice,this.loc=y(ge),this.localizeFormat$=this.loc.localizationWithFormat$,this.VoteCalendarLocalize=kt}updateTime(e){let t=N(new Date,et),n=e?.start?N(e.start,et):t,c=e?.end?N(e.end,et):t;this.startTime.set(n),this.endTime.set(c)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-vote-calendar"]],inputs:{eventId:[1,"eventId"],minDate:[1,"minDate"],maxDate:[1,"maxDate"]},outputs:{voteUpdated:"voteUpdated"},decls:46,vars:43,consts:[["appIonDateSpecify","appIonDateSpecify"],["popover",""],["timeModal",""],["readyButton",""],["maybeButton",""],["timeButton",""],[1,"vote-calendar"],[1,"vote-calendar-header"],[1,"chips"],["color","primary",1,"ion-activated"],["name","checkmark-outline"],["color","warning",1,"ion-activated"],["name","help-outline"],["color","success",1,"ion-activated"],["name","time-outline"],[1,"subtitle"],["appIonDateSpecify","","presentation","date","mode","ios",3,"focusedTimeChanges","voteDates","popover","multiple","firstDayOfWeek","min","max","locale"],["mode","ios",1,"vote-calendar-actions"],["color","medium",3,"click"],[1,"right"],["color","danger",3,"click"],["color","primary",3,"click"],["mode","ios","side","top","alignment","center",3,"arrow"],[3,"initialBreakpoint","breakpoints"],[1,"popover-content"],["size","small","color","primary",3,"click"],["name","checkmark-outline","slot","icon-only"],["size","small","color","warning",3,"click"],["name","help-outline","slot","icon-only"],["size","small","color","success",3,"click"],["name","time-outline","slot","icon-only"],[1,"time-modal-content"],[1,"time-pickers"],[1,"pick"],["presentation","time","mode","ios",3,"ngModelChange","ngModel"],["mode","ios",3,"click","disabled"]],template:function(t,n){if(t&1){let c=I();a(0,"div",6)(1,"div",7)(2,"div",8)(3,"ion-chip",9),v(4,"ion-icon",10),a(5,"ion-label"),d(6),m(7,"localize"),l()(),a(8,"ion-chip",11),v(9,"ion-icon",12),a(10,"ion-label"),d(11),m(12,"localize"),l()(),a(13,"ion-chip",13),v(14,"ion-icon",14),a(15,"ion-label"),d(16),m(17,"localize"),l()()(),a(18,"span",15),d(19),m(20,"localize"),m(21,"localize"),v(22,"br"),d(23),m(24,"localize"),l()(),a(25,"ion-datetime",16,0),m(27,"async"),m(28,"async"),C("focusedTimeChanges",function(h){return b(c),x(n.updateTime(h))}),l(),a(29,"ion-buttons",17)(30,"ion-button",18),C("click",function(){return b(c),x(n.clearDates$.next(!0))}),d(31),m(32,"localize"),l(),a(33,"div",19)(34,"ion-button",20),C("click",function(){return b(c),x(n.resetDates$.next(!0))}),d(35),m(36,"localize"),l(),a(37,"ion-button",21),C("click",function(){b(c);let h=M(26);return x(n.saveDates$.next(h.voteDates))}),d(38),m(39,"localize"),l()()()(),a(40,"ion-popover",22,1),z(42,Gi,10,0,"ng-template"),l(),a(43,"ion-modal",23,2),z(45,Ji,15,12,"ng-template"),l()}if(t&2){let c=M(41);s(6),g(" ",_(7,19,n.VoteCalendarLocalize.Ready)," "),s(5),g(" ",_(12,21,n.VoteCalendarLocalize.Maybe)," "),s(5),g(" ",_(17,23,n.VoteCalendarLocalize.Time)," "),s(3),W(" ",_(20,25,n.isTouchDevice?n.VoteCalendarLocalize.HoldDate:n.VoteCalendarLocalize.RightClickDate)," ",_(21,27,n.VoteCalendarLocalize.SelectSpecificStatus)," "),s(4),g(" ",_(24,29,n.VoteCalendarLocalize.DoNotForgetSave)," "),s(2),u("voteDates",_(27,31,n.voteDates$)??ne(41,Qi))("popover",c)("multiple",!0)("firstDayOfWeek",1)("min",n.minDate()??void 0)("max",n.maxDate()??void 0)("locale",_(28,33,n.localizeFormat$)),s(6),g(" ",_(32,35,n.VoteCalendarLocalize.Clear)," "),s(4),g(" ",_(36,37,n.VoteCalendarLocalize.Cancel)," "),s(3),g(" ",_(39,39,n.VoteCalendarLocalize.Save)," "),s(2),u("arrow",!0),s(3),u("initialBreakpoint",1)("breakpoints",ne(42,Yi))}},dependencies:[U,R,Fe,Qt,q,ce,A,_i,fe,mt,lt,me,st,rt,at],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;height:100%}.vote-calendar-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;background-color:var(--ion-color-light, #f4f5f8);padding:.5rem .5rem .25rem;border-top-left-radius:.5rem;border-top-right-radius:.5rem}.vote-calendar-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{padding:0 .5rem;color:var(--ion-text-color-step-600, #b3b3b3);font-size:.9rem;line-height:1.25rem;margin-top:.125rem;margin-bottom:1rem}.vote-calendar-header[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]{display:flex;padding:0 .2rem;justify-content:space-between;gap:.25rem}.vote-calendar-header[_ngcontent-%COMP%]   .ion-activated[_ngcontent-%COMP%]{pointer-events:none}.vote-calendar-actions[_ngcontent-%COMP%]{padding:.5rem .75rem;background-color:var(--ion-color-light, #f4f5f8);justify-content:space-between;border-bottom-left-radius:.5rem;border-bottom-right-radius:.5rem;gap:1rem}.vote-calendar-actions[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;gap:.5rem}ion-datetime[_ngcontent-%COMP%]{border-radius:0}ion-popover[_ngcontent-%COMP%]{--offset-y: -.15rem;--width: 8rem}.popover-content[_ngcontent-%COMP%]{padding:.5rem;width:100%;display:flex;justify-content:space-between;gap:.25rem;opacity:.95}ion-modal[_ngcontent-%COMP%]{--height: auto}.time-modal-content[_ngcontent-%COMP%]{padding:1.5rem;display:flex;flex-direction:column;gap:1rem}.time-modal-content[_ngcontent-%COMP%]   .time-pickers[_ngcontent-%COMP%]{display:flex;gap:1rem}.time-modal-content[_ngcontent-%COMP%]   .time-pickers[_ngcontent-%COMP%]   .pick[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;align-items:center;gap:1rem}.time-modal-content[_ngcontent-%COMP%]   .time-pickers[_ngcontent-%COMP%]   .pick[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%]{width:100%;border-radius:1rem}"],changeDetection:0});let o=i;return o})();var oe=function(o){return o.List="list",o.Calendar="calendar",o}(oe||{});var Ci=(()=>{let i=class i{constructor(){this.disabled=!1,this.ViewPick=oe,this.value=T(oe.List),this.refresh=new Bt}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-result-view-picker-control"]],inputs:{disabled:"disabled"},outputs:{refresh:"refresh"},decls:7,vars:3,consts:[[1,"picker",3,"ngClass"],[1,"item",3,"click"],["name","list-outline"],["name","calendar-outline"],[3,"click"],["slot","icon-only","name","refresh-outline"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1),C("click",function(){return n.value.set(n.ViewPick.List)}),v(2,"ion-icon",2),l(),a(3,"div",1),C("click",function(){return n.value.set(n.ViewPick.Calendar)}),v(4,"ion-icon",3),l()(),a(5,"ion-button",4),C("click",function(){return n.refresh.emit()}),v(6,"ion-icon",5),l()),t&2&&(Le("disabled",n.disabled),u("ngClass",n.value()))},dependencies:[U,jt,Fe,q],styles:['[_nghost-%COMP%]{display:flex;justify-content:space-between;align-items:center}.picker[_ngcontent-%COMP%]{position:relative;display:flex;border-radius:.5rem;background-color:var(--ion-color-light, #f4f5f8);--border-size: 2px}.picker.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.picker[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{z-index:2;padding:.8rem 1.25rem;display:flex;align-items:center;cursor:pointer}.picker[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:hover{opacity:.7}.picker[_ngcontent-%COMP%]:after{content:"";transition:left .2s ease-in-out;z-index:1;position:absolute;top:var(--border-size);bottom:var(--border-size);width:calc(50% - var(--border-size) * 2);box-shadow:var(--picker-box-shadow);background-color:var(--ion-background-color-step-350, #fff);border-radius:.5rem}.picker.list[_ngcontent-%COMP%]:after{left:var(--border-size)!important}.picker.calendar[_ngcontent-%COMP%]:after{left:calc(50% + var(--border-size))!important}ion-button[_ngcontent-%COMP%]{margin:0;--border-radius: .5rem;--padding-bottom: .75rem;--padding-end: .75rem;--padding-start: .75rem;--padding-top: .75rem}']});let o=i;return o})();var Xi=["*"],Ki=(o,i)=>({value:o,params:i}),bi="0.4s ease-in-out",Zi={transform:"translateX(0)"},en={transform:"translateX({{ leaveEnd }}%)"},tn={transform:"translateX({{ enterStart }}%)"},xi=(()=>{let i=class i{constructor(){this.viewPick=D.required(),this.animationDisabled=T(!0),this.animationParams=H(()=>{switch(this.viewPick()){case oe.List:return{leaveEnd:120,enterStart:-120};case oe.Calendar:return{leaveEnd:-120,enterStart:120};default:return{}}}),zt(()=>{this.animationDisabled()&&this.animationDisabled.set(!1)})}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-result-view-picker-container"]],inputs:{viewPick:[1,"viewPick"]},ngContentSelectors:Xi,decls:2,vars:5,consts:[[1,"result-view-picker-container-animated"]],template:function(t,n){t&1&&(At(),a(0,"div",0),Ut(1),l()),t&2&&u("@.disabled",n.animationDisabled())("@openCloseResultView",He(2,Ki,n.viewPick(),n.animationParams()))},styles:[".result-view-picker-container-animated[_ngcontent-%COMP%]{display:grid;overflow:hidden;place-items:start}  .result-view-picker-container-animated>*{display:block;grid-column:1;grid-row:1;width:100%}"],data:{animation:[Mt("openCloseResultView",[wt("* => *",[Dt([Je(":enter",Ge(tn)),Je(":leave",[ut(bi,Ge(en))],{optional:!0}),Je(":enter",[ut(bi),Ge(Zi)])])],{params:{leaveEnd:-120,enterStart:120}})])]},changeDetection:0});let o=i;return o})();var Mi=(()=>{let i=class i{constructor(){this.baseUrl="results",this.http=y(ze)}getEventResults(e){let t={eventId:e};return this.http.get(this.baseUrl,{params:t}).pipe(k(n=>{let c=n.dates.map(p=>ye.toJsDates(p));return j(B({},n),{dates:c})}))}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})();var nn=ai(new Date),Ce=(()=>{let i=class i{constructor(){this.eventId=D.required(),this.min=D.required(),this.noMaybe=D.required(),this.noTime=D.required(),this.onlyWithMe=D.required(),this.trimPast=D.required(),this.request=y(Mi),this.featureLoad=y(ve,{optional:!0}),this.refresh$=new Q,this.eventid$=he(this.eventId),this.info$=this.refresh$.pipe(Z(!0),E(()=>this.eventid$),V(()=>this.featureLoad?.incrLoading()),E(e=>this.request.getEventResults(e).pipe(K(()=>this.featureLoad?.decrLoading()))),ae(1)),this.info=Xe(this.info$),this.dates=H(()=>this.info()?.dates??[]),this.filteredDates=H(()=>this.dates().filter(e=>e.users.length>=this.min()&&(!this.trimPast()||e.date>=nn)&&(!this.noMaybe()||e.voteType!==S.Maybe)&&(!this.noTime()||e.voteType!==S.Time)&&(!this.onlyWithMe()||e.isWithMe))),this.filteredDatesMap=H(()=>{let e=this.filteredDates();return new Map(e.map(t=>[this.formatVoteDate(t.date),t]))})}refresh(){this.refresh$.next(!0)}formatVoteDate(e){return N(e,"yyyy-MM-dd")}getVoteDate(e){let t=this.formatVoteDate(e);return this.filteredDatesMap().get(t)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=G({type:i,selectors:[["","appResultView",""]],inputs:{eventId:[1,"eventId"],min:[1,"min"],noMaybe:[1,"noMaybe"],noTime:[1,"noTime"],onlyWithMe:[1,"onlyWithMe"],trimPast:[1,"trimPast"]},exportAs:["appResultView"]});let o=i;return o})();var wi=vt(It());var be=class{static getColorByType(i){switch(i){case S.Ready:return"primary";case S.Maybe:return"warning";case S.Time:return"success"}}static getIconByType(i){switch(i){case S.Ready:return"checkmark-outline";case S.Maybe:return"help-outline";case S.Time:return"time-outline"}}};var Ne={Member:{en:"member",ru:"\u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A"},NoData:{en:"No data, try to change filters",ru:"\u041F\u0443\u0441\u0442\u043E, \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0434\u0440\u0443\u0433\u0438\u0435 \u0444\u0438\u043B\u044C\u0442\u0440\u044B"},NoTimeOverlap:{en:"No time overlap",ru:"\u041D\u0435\u0442 \u043E\u0431\u0449\u0435\u0433\u043E \u0432\u0440\u0435\u043C\u0435\u043D\u0438"}};var on=()=>[0,1];function rn(o,i){if(o&1&&($t(0),a(1,"h3"),d(2),m(3,"date"),l(),Ft()),o&2){let r=i.ngIf,e=f(3);s(2),g(" ",Wt(3,1,e.resultDate.date,r.dateFormat,void 0,r.localize)," ")}}function an(o,i){if(o&1&&(a(0,"ion-chip",6),v(1,"ion-icon",9),a(2,"ion-label"),d(3),m(4,"localize"),l()()),o&2){let r=f(3);s(3),g(" ",_(4,1,r.ResultViewLocalize.NoTimeOverlap)," ")}}function sn(o,i){if(o&1&&(a(0,"ion-chip",7),v(1,"ion-icon",10),a(2,"ion-label"),d(3),m(4,"date"),m(5,"date"),l()()),o&2){let r=f(3);u("color",r.Helpers.getColorByType(r.resultDate.voteType)),s(),u("name",r.Helpers.getIconByType(r.resultDate.voteType)),s(2),W(" ",r.resultDate.start?O(4,4,r.resultDate.start,"HH:mm"):"00:00"," - ",r.resultDate.end?O(5,7,r.resultDate.end,"HH:mm"):"23:59"," ")}}function ln(o,i){if(o&1&&(a(0,"ion-text",11),d(1),l()),o&2){let r=f().$implicit;s(),g(" ",r.username?"@"+r.username:r.fullName," ")}}function cn(o,i){if(o&1&&d(0),o&2){let r=f().$implicit;g(" ",r.fullName," ")}}function pn(o,i){if(o&1&&(a(0,"ion-label"),$(1,ln,2,1,"ion-text",11)(2,cn,1,1),l()),o&2){let r=i.$implicit,e=f(3);s(),F(e.timeModeIndexes.has(r.index)?1:2)}}function mn(o,i){if(o&1&&(a(0,"ion-text",12),d(1),m(2,"date"),m(3,"date"),l()),o&2){let r=f().$implicit,e=f(3);u("color",e.Helpers.getColorByType(r.voteType)),s(),W(" ",r.start?O(2,3,r.start,"HH:mm"):"00:00"," - ",r.end?O(3,6,r.end,"HH:mm"):"23:59"," ")}}function dn(o,i){if(o&1&&v(0,"ion-icon",13),o&2){let r=f().$implicit,e=f(3);u("color",e.Helpers.getColorByType(r.voteType))("icon",e.Helpers.getIconByType(r.voteType))}}function un(o,i){if(o&1&&$(0,mn,4,9,"ion-text",12)(1,dn,1,2,"ion-icon",13),o&2){let r=i.$implicit,e=f(3);F(e.timeModeIndexes.has(r.index)?0:1)}}function fn(o,i){if(o&1){let r=I();a(0,"div",4),z(1,rn,4,6,"ng-container",5),m(2,"async"),$(3,an,5,3,"ion-chip",6)(4,sn,6,10,"ion-chip",7),l(),a(5,"app-users-list",8),C("userClicked",function(t){b(r);let n=f(2);return x(n.toggleUserMode(t.user))})("searchFocused",function(t){b(r),f(2);let n=M(1);return x(n.backdropDismiss=!t)}),z(6,pn,3,1,"ng-template",null,1,qe)(8,un,2,1,"ng-template",null,2,qe),l()}if(o&2){let r=f(2);s(),u("ngIf",_(2,4,r.dateFormat$)),s(2),F(r.resultDate.noTimeOverlap?3:4),s(2),u("users",r.resultDate.users)("clickable",!0)}}function hn(o,i){if(o&1&&$(0,fn,10,6),o&2){let r=f();F(r.resultDate?0:-1)}}var _t=(()=>{let i=class i{constructor(){this.ionModal=Re(me),this.timeModeIndexes=new Set,this.Helpers=be,this.localizeService=y(ge),this.ResultViewLocalize=Ne,this.dateFormat$=this.localizeService.localizeLongDateFormat$}present(e){let t=this.ionModal();t&&(this.resultDate=e,e.users=e.users.map((n,c)=>j(B({},n),{index:c})),t.present())}clearData(){this.resultDate=void 0,this.timeModeIndexes=new Set}toggleUserMode(e){let t=e.index;this.timeModeIndexes.has(t)?this.timeModeIndexes.delete(t):this.timeModeIndexes.add(t)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-result-date-info-modal"]],viewQuery:function(t,n){t&1&&Ee(n.ionModal,me,5),t&2&&Ve()},decls:3,vars:3,consts:[["modal",""],["altLabel",""],["end",""],[3,"ionModalDidDismiss","initialBreakpoint","breakpoints"],[1,"header"],[4,"ngIf"],["color","danger"],[1,"ion-activated",3,"color"],[3,"userClicked","searchFocused","users","clickable"],["name","alert-circle-outline"],[3,"name"],["color","medium"],[1,"user-time-info",3,"color"],[3,"color","icon"]],template:function(t,n){if(t&1){let c=I();a(0,"ion-modal",3,0),C("ionModalDidDismiss",function(){return b(c),x(n.clearData())}),z(2,hn,1,1,"ng-template"),l()}t&2&&u("initialBreakpoint",1)("breakpoints",ne(2,on))},dependencies:[U,Be,R,q,dt,ce,pe,A,ht,me,mt],styles:["ion-modal[_ngcontent-%COMP%]{--height: auto}ion-modal[_ngcontent-%COMP%]   app-users-list[_ngcontent-%COMP%]{height:52vh;padding:0 1rem 1rem}.header[_ngcontent-%COMP%]{padding:2rem 2rem .5rem;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;column-gap:.5rem;row-gap:.25rem}.header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.header[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{pointer-events:none;margin:0}.user-time-info[_ngcontent-%COMP%]{font-size:.8rem;margin-bottom:-1px}"]});let o=i;return o})();var Di=(()=>{let i=class i{get rootEl(){return this.elRef.nativeElement.shadowRoot}constructor(){this.data=y(Ce),this.elRef=y(se),this.rootObs=new MutationObserver(()=>{let e=this.rootEl.querySelectorAll("button.calendar-day");this.dateButtons$.next(Array.from(e))}),this.dateButtons$=new we(1),this.voteDateSelected$=this.dateButtons$.pipe(E(e=>{let t=e.map(n=>re(n,"click",{capture:!0}).pipe(V(c=>c.stopPropagation()),k(()=>n)));return Y(...t)}),nt((e,t)=>!this.noActionsAfterReset&&e===t),k(e=>this.getDateSelectedEvent(e)),k(e=>e.voteDate?e:void 0),Z(void 0),Ot(),V(([e,t])=>this.handleButtonStyles(e,t)),k(([e,t])=>t?.voteDate),V(()=>this.noActionsAfterReset=!1)),this.noActionsAfterReset=!0,this.dateSelected=Y(this.voteDateSelected$,this.getResetDateEvent(this.dateButtons$),this.getResetDateEvent(he(this.data.filteredDates)))}ngAfterViewInit(){this.rootObs.observe(this.rootEl,{childList:!0,subtree:!0})}ngOnDestroy(){this.dateButtons$.complete(),this.rootObs.disconnect()}getResetDateEvent(e){return e.pipe(V(()=>this.noActionsAfterReset=!0),k(()=>{}))}getDateSelectedEvent(e){let t=Number(e.getAttribute("data-day")),n=Number(e.getAttribute("data-month")),c=Number(e.getAttribute("data-year")),p=new Date(c,n-1,t);return{prevBgColor:e.style.backgroundColor,prevColor:e.style.color,voteDate:this.data.getVoteDate(p),buttonEl:e}}handleButtonStyles(e,t){if(e&&!this.noActionsAfterReset){let n=e.buttonEl;n.style.backgroundColor=e.prevBgColor,n.style.color=e.prevColor}if(t){let n=t.buttonEl;n.style.backgroundColor=n.style.color,n.style.color="var(--ion-color-contrast)"}}};i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=G({type:i,selectors:[["","appResultViewCalendarPicker",""]],outputs:{dateSelected:"dateSelected"}});let o=i;return o})();function gn(o,i){if(o&1){let r=I();a(0,"div",4)(1,"ion-item",5),C("click",function(){let t=b(r).ngIf;f();let n=M(6);return x(n.present(t))}),v(2,"ion-icon",6),a(3,"ion-label"),d(4),m(5,"date"),l(),a(6,"ion-note",7),d(7),m(8,"localizeMany"),l()()()}if(o&2){let r=i.ngIf,e=f();s(2),u("color",r.noTimeOverlap?"danger":e.Helpers.getColorByType(r.voteType))("name",e.Helpers.getIconByType(r.voteType)),s(2),g(" ",O(5,5,r.date,"dd.MM.yyyy")," "),s(3),W(" ",r.users.length," ",O(8,8,e.ResultViewLocalize.Member,r.users.length)," ")}}var Ii=(()=>{let i=class i{constructor(){this.minDate=D(),this.maxDate=D(),this.ionDateComponent=Re(fe),this.data=y(Ce),this.Helpers=be,this.ResultViewLocalize=Ne,this.selectedDate=T(void 0),this.localizeService=y(ge),this.localizeFormat$=this.localizeService.localizationWithFormat$,Qe(()=>{let e=this.ionDateComponent(),t=this.data.filteredDates();if(e)if(t.length===0){e.highlightedDates=[];return}else{let n=(0,wi.groupBy)(t,"voteType"),c=n[S.Ready]??[],p=n[S.Maybe]??[],h=n[S.Time]??[];e.highlightedDates=[...c.map(P=>({date:this.data.formatVoteDate(P.date),textColor:"var(--ready-text-color)",backgroundColor:"var(--ready-bg-color)"})),...p.map(P=>({date:this.data.formatVoteDate(P.date),textColor:"var(--maybe-text-color)",backgroundColor:"var(--maybe-bg-color)"})),...h.map(P=>({date:this.data.formatVoteDate(P.date),textColor:"var(--time-text-color)",backgroundColor:"var(--time-bg-color)"}))]}else return})}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-result-view-calendar"]],viewQuery:function(t,n){t&1&&Ee(n.ionDateComponent,fe,5),t&2&&Ve()},inputs:{minDate:[1,"minDate"],maxDate:[1,"maxDate"]},decls:7,vars:7,consts:[["infoModal",""],[1,"calendar-header"],["appResultViewCalendarPicker","","presentation","date","mode","ios",3,"dateSelected","firstDayOfWeek","min","max","locale"],["class","calendar-footer",4,"ngIf"],[1,"calendar-footer"],["button","","lines","none",3,"click"],["slot","start",3,"color","name"],["slot","end"]],template:function(t,n){if(t&1){let c=I();a(0,"div"),v(1,"div",1),a(2,"ion-datetime",2),m(3,"async"),C("dateSelected",function(h){return b(c),x(n.selectedDate.set(h))}),l(),z(4,gn,9,11,"div",3),l(),v(5,"app-result-date-info-modal",null,0)}t&2&&(s(2),u("firstDayOfWeek",1)("min",n.minDate()??void 0)("max",n.maxDate()??void 0)("locale",_(3,5,n.localizeFormat$)),s(2),u("ngIf",n.selectedDate()))},dependencies:[U,Be,R,q,J,ue,ce,pe,_e,fe,_t,Di],styles:[".calendar-header[_ngcontent-%COMP%]{background-color:var(--ion-color-light, #f4f5f8);border-top-left-radius:.5rem;border-top-right-radius:.5rem;width:100%;height:.5rem}ion-datetime[_ngcontent-%COMP%]:last-child{border-bottom-left-radius:.5rem;border-bottom-right-radius:.5rem}.calendar-footer[_ngcontent-%COMP%]{background-color:var(--ion-color-light, #f4f5f8);border-bottom-left-radius:.5rem;border-bottom-right-radius:.5rem;padding-bottom:.25rem}.calendar-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent}"],changeDetection:0});let o=i;return o})();function _n(o,i){if(o&1){let r=I();a(0,"ion-item",4),C("click",function(){let t=b(r).$implicit;f();let n=M(5);return x(n.present(t))}),v(1,"ion-icon",5),a(2,"ion-label"),d(3),m(4,"date"),l(),a(5,"ion-note",6),d(6),m(7,"localizeMany"),l()()}if(o&2){let r=i.$implicit,e=i.$index,t=i.$count,n=f();u("lines",e===t-1?"none":""),s(),u("color",r.noTimeOverlap?"danger":n.Helpers.getColorByType(r.voteType))("name",n.Helpers.getIconByType(r.voteType)),s(2),g(" ",O(4,6,r.date,"dd.MM.yyyy")," "),s(3),W(" ",r.users.length," ",O(7,9,n.ResultViewLocalize.Member,r.users.length)," ")}}function vn(o,i){if(o&1&&(a(0,"ion-item",3),v(1,"ion-icon",7),a(2,"ion-note",8),d(3),m(4,"localize"),l()()),o&2){let r=f();s(3),g(" ",_(4,1,r.ResultViewLocalize.NoData)," ")}}var Si=(()=>{let i=class i{constructor(){this.data=y(Ce),this.filteredDates=this.data.filteredDates,this.Helpers=be,this.ResultViewLocalize=Ne}ngOnInit(){}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-result-view-list"]],decls:6,vars:1,consts:[["infoModal",""],["mode","ios"],["button","",3,"lines"],["lines","none"],["button","",3,"click","lines"],["slot","start",3,"color","name"],["slot","end"],["slot","start","name","calendar-clear-outline","color","medium"],[1,"no-data"]],template:function(t,n){t&1&&(a(0,"ion-list",1),Te(1,_n,8,12,"ion-item",2,ke,!1,vn,5,3,"ion-item",3),l(),v(4,"app-result-date-info-modal",null,0)),t&2&&(s(),Pe(n.filteredDates()))},dependencies:[U,R,q,de,J,ue,pe,A,_e,_t],styles:["ion-list[_ngcontent-%COMP%]{background:var(--ion-color-light, #f4f5f8);border-radius:.5rem;padding-block:.25rem}ion-item[_ngcontent-%COMP%]{--background: transparent}.no-data[_ngcontent-%COMP%]{font-size:.9rem;line-height:.9rem}"],changeDetection:0});let o=i;return o})();var ki={Results:{en:"Results",ru:"\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B"},Vote:{en:"Vote",ru:"\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0434\u0430\u0442\u044B"}};function yn(o,i){o&1&&v(0,"app-result-view-list")}function Cn(o,i){if(o&1&&v(0,"app-result-view-calendar",15),o&2){f();let r=le(3);u("minDate",r==null?null:r.starts)("maxDate",r==null?null:r.ends)}}var $s=(()=>{let i=class i{constructor(){this.eventId=D.required(),this.mainInfoComponent=Re(gt),this.hideIonContent=!0,this.alreadyInit=!1,this.ViewPick=oe,this.VotePageLocalize=ki,setTimeout(()=>this.hideIonContent=!1,250)}ionViewWillEnter(){this.alreadyInit?this.mainInfoComponent()?.refreshInfo():this.alreadyInit=!0}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-vote-event-page"]],viewQuery:function(t,n){t&1&&Ee(n.mainInfoComponent,gt,5),t&2&&Ve()},hostAttrs:[1,"app-page-inner"],inputs:{eventId:[1,"eventId"]},decls:30,vars:29,consts:[["eventMainInfo",""],["filters",""],["viewPicker",""],["resLoading","appFeatureLoad","result","appResultView"],[1,"ion-padding"],["appFeatureLoad","",3,"eventId"],["mode","ios","value","vote"],["value","info","contentId","info"],["value","vote","contentId","vote"],["mode","ios"],["id","info"],[1,"segment-view-content"],[3,"disabled","maxMembers","maxOverlap"],[3,"refresh","disabled"],["appFeatureLoad","","placeholderOpacity","0.5","appResultView","",3,"viewPick","eventId","min","noMaybe","noTime","onlyWithMe","trimPast"],[3,"minDate","maxDate"],["id","vote"],["appFeatureLoad","","placeholderOpacity","0.5",3,"voteUpdated","eventId","minDate","maxDate"]],template:function(t,n){if(t&1){let c=I();a(0,"ion-content",4),v(1,"app-event-main-info",5,0),je(3),a(4,"ion-segment",6)(5,"ion-segment-button",7)(6,"ion-label"),d(7),m(8,"localize"),l()(),a(9,"ion-segment-button",8)(10,"ion-label"),d(11),m(12,"localize"),l()()(),a(13,"ion-segment-view",9)(14,"ion-segment-content",10)(15,"div",11),v(16,"app-result-filters",12,1),m(18,"async"),a(19,"app-result-view-picker-control",13,2),m(21,"async"),C("refresh",function(){b(c);let h=M(24);return x(h.refresh())}),l(),a(22,"app-result-view-picker-container",14,3),$(25,yn,1,0,"app-result-view-list")(26,Cn,1,2,"app-result-view-calendar",15),l()()(),a(27,"ion-segment-content",16)(28,"div",11)(29,"app-vote-calendar",17),C("voteUpdated",function(h){b(c);let P=M(2),X=M(24);return h.alreadyVoted||P.refreshUsers(),x(X.refresh())}),l()()()()()}if(t&2){let c,p,h=M(2),P=M(17),X=M(20),tt=M(23),Ti=M(24);s(),u("eventId",n.eventId()),s(2);let it=Oe(h.info()),Tt=h.users();s(4),g(" ",_(8,21,n.VotePageLocalize.Results)," "),s(4),g(" ",_(12,23,n.VotePageLocalize.Vote)," "),s(3),Le("hide",n.hideIonContent),s(2),u("disabled",_(18,25,tt.loading$))("maxMembers",(Tt==null?null:Tt.length)??0)("maxOverlap",(c=Ti.info())==null?null:c.maxOverlap),s(3),u("disabled",_(21,27,tt.loading$)),s(3),u("viewPick",X.value())("eventId",n.eventId())("min",P.membersCount())("noMaybe",P.noMaybe())("noTime",P.noTime())("onlyWithMe",P.onlyWithMe())("trimPast",P.trimPast()),s(3),F((p=X.value())===n.ViewPick.List?25:p===n.ViewPick.Calendar?26:-1),s(4),u("eventId",n.eventId())("minDate",it==null?null:it.starts)("maxDate",it==null?null:it.ends)}},dependencies:[ri,Yt,R,ce,A,yi,gt,fi,Ci,xi,Si,Ii,Ce,ti,Gt,Jt,Xt,ve],styles:["ion-segment[_ngcontent-%COMP%]{margin:1rem 0 .5rem;background:var(--ion-color-light, #f4f5f8)}ion-segment-view[_ngcontent-%COMP%]{height:auto}ion-segment-content.hide[_ngcontent-%COMP%]{display:none}.segment-view-content[_ngcontent-%COMP%]{padding:.25rem .75rem 1.25rem;display:flex;flex-direction:column;gap:.75rem}"],changeDetection:0});let o=i;return o})();export{$s as VoteEventPageComponent};
